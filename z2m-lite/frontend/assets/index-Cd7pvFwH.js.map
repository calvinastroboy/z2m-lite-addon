{"version":3,"mappings":"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","names":["m","require$$0","client","__insertCSS","code","head","style","getAsset","type","SuccessIcon","InfoIcon","WarningIcon","ErrorIcon","bars","Loader","visible","className","React","_","i","CloseIcon","useIsDocumentHidden","isDocumentHidden","setIsDocumentHidden","callback","toastsCounter","Observer","subscriber","index","data","_data_id","message","rest","id","alreadyExists","toast","dismissible","promise","p","shouldDismiss","result","originalPromise","response","isHttpResponse","promiseData","description","toastSettings","error","unwrap","resolve","reject","jsx","ToastState","toastFunction","basicToast","getHistory","getToasts","isAction","action","VISIBLE_TOASTS_AMOUNT","VIEWPORT_OFFSET","MOBILE_VIEWPORT_OFFSET","TOAST_LIFETIME","TOAST_WIDTH","GAP","SWIPE_THRESHOLD","TIME_BEFORE_UNMOUNT","cn","classes","getDefaultSwipeDirections","position","y","x","directions","Toast","props","_toast_classNames","_toast_classNames1","_toast_classNames2","_toast_classNames3","_toast_classNames4","_toast_classNames5","_toast_classNames6","_toast_classNames7","_toast_classNames8","ToasterInvert","unstyled","interacting","setHeights","visibleToasts","heights","toasts","expanded","removeToast","defaultRichColors","closeButtonFromToaster","cancelButtonStyle","actionButtonStyle","descriptionClassName","durationFromToaster","gap","expandByDefault","classNames","icons","closeButtonAriaLabel","swipeDirection","setSwipeDirection","swipeOutDirection","setSwipeOutDirection","mounted","setMounted","removed","setRemoved","swiping","setSwiping","swipeOut","setSwipeOut","isSwiped","setIsSwiped","offsetBeforeRemove","setOffsetBeforeRemove","initialHeight","setInitialHeight","remainingTime","dragStartTime","toastRef","isFront","isVisible","toastType","toastClassname","toastDescriptionClassname","heightIndex","height","closeButton","_toast_closeButton","duration","closeTimerStartTimeRef","offset","lastCloseTimerStartTimeRef","pointerStartRef","toastsHeightBefore","prev","curr","reducerIndex","invert","disabled","toastNode","h","originalHeight","newHeight","deleteToast","timeoutId","elapsedTime","getLoadingIcon","icon","_toast_richColors","_icons_close","event","_toastRef_current","_toastRef_current1","_dragStartTime_current","swipeAmountX","swipeAmountY","timeTaken","swipeAmount","velocity","_toastRef_current2","_toastRef_current3","_window_getSelection","yDelta","xDelta","_props_swipeDirections","swipeDirections","getDampening","delta","dampenedDelta","getDocumentDirection","dirAttribute","assignOffset","defaultOffset","mobileOffset","styles","isMobile","prefix","defaultValue","assignAll","key","Toaster","ref","hotkey","expand","theme","richColors","toastOptions","dir","containerAriaLabel","setToasts","filteredToasts","possiblePositions","setExpanded","setInteracting","actualTheme","setActualTheme","listRef","hotkeyLabel","lastFocusedElementRef","isFocusWithinRef","toastToRemove","_toasts_find","t","ReactDOM","indexOfExistingToast","darkMediaQuery","matches","e","handleKeyDown","_listRef_current","_listRef_current1","_heights_","_toastOptions_duration","_toastOptions_closeButton","Sonner","CheckCircle","Info","AlertTriangle","XCircle","ErrorBoundary","Component","errorInfo","jsxs","WebSocketService","urlParams","loc","wsProtocol","host","port","secure","path","delay","handler","topic","payload","command","listener","connected","newUrl","websocketService","createStoreImpl","createState","state","listeners","setState","partial","replace","nextState","previousState","getState","api","initialState","__vite_import_meta_env__","createStore","is","objectIs","useState","useEffect","useLayoutEffect","useDebugValue","useSyncExternalStore$2","subscribe","getSnapshot","value","_useState","inst","forceUpdate","checkIfSnapshotChanged","latestGetSnapshot","nextValue","useSyncExternalStore$1","shim","useSyncExternalStoreShim_production","shimModule","require$$1","useSyncExternalStore","useRef","useMemo","withSelector_production","getServerSnapshot","selector","isEqual","instRef","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","didWarnAboutEqualityFn","identity","arg","useStore","equalityFn","slice","createImpl","useBoundStore","create","defaultConfig","useConnectionStore","set","bridgeState","permitJoin","permitJoinTimeout","newConfig","parseCapabilities","exposes","caps","endpoints","scanFeatures","items","parentEndpoint","_parentType","item","name","endpoint","stateFeature","f","epFeatures","mapDeviceType","z2mType","lower","hasLight","hasSwitch","hasCover","hasSensor","n","normalizeDevice","raw","definition","useDeviceStore","get","rawDevices","byId","allIds","device","friendlyName","updates","stateUpdates","_removed","oldName","newName","restById","renamedDevice","fiveMinutes","useGroupStore","groups","group","updatedGroup","g","deviceStates","memberStates","member","allOn","allOff","brightnesses","b","sum","acc","useWebSocket","connectionState","handleMessage","connStore","devStore","grpStore","normalizedTopic","msg","devices","from","to","stateMsg","matchedGroup","unsubscribe","unsubscribeConnection","connect","useCallback","disconnect","STORAGE_PREFIX","STORAGE_VERSION","StorageService","options","storageKey","maxAgeMs","timestamp","storageService","ROOMS_STORAGE_KEY","ROOM_ASSIGNMENTS_KEY","RoomService","room","rooms","now","newRoom","roomIndex","existingRoom","updatedRoom","filteredRooms","assignments","updatedAssignments","deviceId","roomId","r","roomService","useRoomStore","deviceRoomAssignments","assignedRoomId","allDeviceIds","PREFERENCES_KEY","defaultPreferences","usePreferencesStore","language","seconds","remainingSeconds","stored","pairingState","tabs","Home","Users","Plus","Settings","BottomNav","onPairing","location","useLocation","navigate","useNavigate","tab","isActive","Icon","DeviceService","percentage","transition","brightness","kelvin","mired","currentName","timeSeconds","groupName","deviceName","deviceService","DEFAULT_PAIRING_DURATION","usePairing","useTranslation","startPairingState","stopPairingState","decrementPairingTimer","deviceStore","timerRef","prevDeviceCountRef","allDevices","deviceCount","newDevices","d","stopPairing","startPairing","PairingModal","open","onClose","isPairing","started","setStarted","handleStart","handleStop","minutes","Wifi","Fragment","ConnectionStatus","MainLayout","pairingOpen","setPairingOpen","Outlet","getIcon","hasTemp","hasOccupancy","hasContact","Lightbulb","Blinds","Eye","DoorOpen","Thermometer","Power","Radio","Plug","HelpCircle","getStateText","isOn","isOnline","temp","hum","pos","ep","epOn","DeviceGridCard","memo","onToggle","onBrightnessChange","onEndpointToggle","hasOnOff","hasBrightness","hasBattery","isMultiEndpoint","battery","stateText","longPressTimer","didLongPress","handleTouchStart","handleTouchEnd","handleCardClick","handleSliderInput","statusColor","epState","useDevices","controlDevice","errorMsg","toggleDevice","setBrightness","setColorTemperature","renameDevice","s","activeRoom","setActiveRoom","filteredDevices","onlineCount","offlineCount","checked","val","_endpoint","property","DeviceDetail","lazy","__vitePreload","GroupManagement","RoomManagement","PageLoader","App","loadRooms","loadPreferences","BrowserRouter","Routes","Route","Suspense","Navigate","defaultLanguage","i18n","initReactI18next","zhTW","en","rootElement"],"ignoreList":[0,1,5,6,7,8,9,10],"sources":["../../node_modules/react-dom/client.js","../../node_modules/sonner/dist/index.mjs","../../src/components/ui/sonner.tsx","../../src/components/ErrorBoundary.tsx","../../src/services/websocketService.ts","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../src/stores/connectionStore.ts","../../src/stores/deviceStore.ts","../../src/stores/groupStore.ts","../../src/hooks/useWebSocket.ts","../../src/services/storageService.ts","../../src/services/roomService.ts","../../src/stores/roomStore.ts","../../src/stores/preferencesStore.ts","../../src/components/layout/BottomNav.tsx","../../src/services/deviceService.ts","../../src/hooks/usePairing.ts","../../src/components/pairing/PairingModal.tsx","../../src/components/layout/ConnectionStatus.tsx","../../src/components/layout/MainLayout.tsx","../../src/components/devices/DeviceGridCard.tsx","../../src/hooks/useDevices.ts","../../src/pages/Home.tsx","../../src/App.tsx","../../src/i18n/config.ts","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","'use client';\nfunction __insertCSS(code) {\n  if (!code || typeof document == 'undefined') return\n  let head = document.head || document.getElementsByTagName('head')[0]\n  let style = document.createElement('style')\n  style.type = 'text/css'\n  head.appendChild(style)\n  ;style.styleSheet ? (style.styleSheet.cssText = code) : style.appendChild(document.createTextNode(code))\n}\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst getAsset = (type)=>{\n    switch(type){\n        case 'success':\n            return SuccessIcon;\n        case 'info':\n            return InfoIcon;\n        case 'warning':\n            return WarningIcon;\n        case 'error':\n            return ErrorIcon;\n        default:\n            return null;\n    }\n};\nconst bars = Array(12).fill(0);\nconst Loader = ({ visible, className })=>{\n    return /*#__PURE__*/ React.createElement(\"div\", {\n        className: [\n            'sonner-loading-wrapper',\n            className\n        ].filter(Boolean).join(' '),\n        \"data-visible\": visible\n    }, /*#__PURE__*/ React.createElement(\"div\", {\n        className: \"sonner-spinner\"\n    }, bars.map((_, i)=>/*#__PURE__*/ React.createElement(\"div\", {\n            className: \"sonner-loading-bar\",\n            key: `spinner-bar-${i}`\n        }))));\n};\nconst SuccessIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\",\n    clipRule: \"evenodd\"\n}));\nconst WarningIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z\",\n    clipRule: \"evenodd\"\n}));\nconst InfoIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z\",\n    clipRule: \"evenodd\"\n}));\nconst ErrorIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    height: \"20\",\n    width: \"20\"\n}, /*#__PURE__*/ React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z\",\n    clipRule: \"evenodd\"\n}));\nconst CloseIcon = /*#__PURE__*/ React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"12\",\n    height: \"12\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"1.5\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n}, /*#__PURE__*/ React.createElement(\"line\", {\n    x1: \"18\",\n    y1: \"6\",\n    x2: \"6\",\n    y2: \"18\"\n}), /*#__PURE__*/ React.createElement(\"line\", {\n    x1: \"6\",\n    y1: \"6\",\n    x2: \"18\",\n    y2: \"18\"\n}));\n\nconst useIsDocumentHidden = ()=>{\n    const [isDocumentHidden, setIsDocumentHidden] = React.useState(document.hidden);\n    React.useEffect(()=>{\n        const callback = ()=>{\n            setIsDocumentHidden(document.hidden);\n        };\n        document.addEventListener('visibilitychange', callback);\n        return ()=>window.removeEventListener('visibilitychange', callback);\n    }, []);\n    return isDocumentHidden;\n};\n\nlet toastsCounter = 1;\nclass Observer {\n    constructor(){\n        // We use arrow functions to maintain the correct `this` reference\n        this.subscribe = (subscriber)=>{\n            this.subscribers.push(subscriber);\n            return ()=>{\n                const index = this.subscribers.indexOf(subscriber);\n                this.subscribers.splice(index, 1);\n            };\n        };\n        this.publish = (data)=>{\n            this.subscribers.forEach((subscriber)=>subscriber(data));\n        };\n        this.addToast = (data)=>{\n            this.publish(data);\n            this.toasts = [\n                ...this.toasts,\n                data\n            ];\n        };\n        this.create = (data)=>{\n            var _data_id;\n            const { message, ...rest } = data;\n            const id = typeof (data == null ? void 0 : data.id) === 'number' || ((_data_id = data.id) == null ? void 0 : _data_id.length) > 0 ? data.id : toastsCounter++;\n            const alreadyExists = this.toasts.find((toast)=>{\n                return toast.id === id;\n            });\n            const dismissible = data.dismissible === undefined ? true : data.dismissible;\n            if (this.dismissedToasts.has(id)) {\n                this.dismissedToasts.delete(id);\n            }\n            if (alreadyExists) {\n                this.toasts = this.toasts.map((toast)=>{\n                    if (toast.id === id) {\n                        this.publish({\n                            ...toast,\n                            ...data,\n                            id,\n                            title: message\n                        });\n                        return {\n                            ...toast,\n                            ...data,\n                            id,\n                            dismissible,\n                            title: message\n                        };\n                    }\n                    return toast;\n                });\n            } else {\n                this.addToast({\n                    title: message,\n                    ...rest,\n                    dismissible,\n                    id\n                });\n            }\n            return id;\n        };\n        this.dismiss = (id)=>{\n            if (id) {\n                this.dismissedToasts.add(id);\n                requestAnimationFrame(()=>this.subscribers.forEach((subscriber)=>subscriber({\n                            id,\n                            dismiss: true\n                        })));\n            } else {\n                this.toasts.forEach((toast)=>{\n                    this.subscribers.forEach((subscriber)=>subscriber({\n                            id: toast.id,\n                            dismiss: true\n                        }));\n                });\n            }\n            return id;\n        };\n        this.message = (message, data)=>{\n            return this.create({\n                ...data,\n                message\n            });\n        };\n        this.error = (message, data)=>{\n            return this.create({\n                ...data,\n                message,\n                type: 'error'\n            });\n        };\n        this.success = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'success',\n                message\n            });\n        };\n        this.info = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'info',\n                message\n            });\n        };\n        this.warning = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'warning',\n                message\n            });\n        };\n        this.loading = (message, data)=>{\n            return this.create({\n                ...data,\n                type: 'loading',\n                message\n            });\n        };\n        this.promise = (promise, data)=>{\n            if (!data) {\n                // Nothing to show\n                return;\n            }\n            let id = undefined;\n            if (data.loading !== undefined) {\n                id = this.create({\n                    ...data,\n                    promise,\n                    type: 'loading',\n                    message: data.loading,\n                    description: typeof data.description !== 'function' ? data.description : undefined\n                });\n            }\n            const p = Promise.resolve(promise instanceof Function ? promise() : promise);\n            let shouldDismiss = id !== undefined;\n            let result;\n            const originalPromise = p.then(async (response)=>{\n                result = [\n                    'resolve',\n                    response\n                ];\n                const isReactElementResponse = React.isValidElement(response);\n                if (isReactElementResponse) {\n                    shouldDismiss = false;\n                    this.create({\n                        id,\n                        type: 'default',\n                        message: response\n                    });\n                } else if (isHttpResponse(response) && !response.ok) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(`HTTP error! status: ${response.status}`) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(`HTTP error! status: ${response.status}`) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                } else if (response instanceof Error) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(response) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(response) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                } else if (data.success !== undefined) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.success === 'function' ? await data.success(response) : data.success;\n                    const description = typeof data.description === 'function' ? await data.description(response) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'success',\n                        description,\n                        ...toastSettings\n                    });\n                }\n            }).catch(async (error)=>{\n                result = [\n                    'reject',\n                    error\n                ];\n                if (data.error !== undefined) {\n                    shouldDismiss = false;\n                    const promiseData = typeof data.error === 'function' ? await data.error(error) : data.error;\n                    const description = typeof data.description === 'function' ? await data.description(error) : data.description;\n                    const isExtendedResult = typeof promiseData === 'object' && !React.isValidElement(promiseData);\n                    const toastSettings = isExtendedResult ? promiseData : {\n                        message: promiseData\n                    };\n                    this.create({\n                        id,\n                        type: 'error',\n                        description,\n                        ...toastSettings\n                    });\n                }\n            }).finally(()=>{\n                if (shouldDismiss) {\n                    // Toast is still in load state (and will be indefinitely  dismiss it)\n                    this.dismiss(id);\n                    id = undefined;\n                }\n                data.finally == null ? void 0 : data.finally.call(data);\n            });\n            const unwrap = ()=>new Promise((resolve, reject)=>originalPromise.then(()=>result[0] === 'reject' ? reject(result[1]) : resolve(result[1])).catch(reject));\n            if (typeof id !== 'string' && typeof id !== 'number') {\n                // cannot Object.assign on undefined\n                return {\n                    unwrap\n                };\n            } else {\n                return Object.assign(id, {\n                    unwrap\n                });\n            }\n        };\n        this.custom = (jsx, data)=>{\n            const id = (data == null ? void 0 : data.id) || toastsCounter++;\n            this.create({\n                jsx: jsx(id),\n                id,\n                ...data\n            });\n            return id;\n        };\n        this.getActiveToasts = ()=>{\n            return this.toasts.filter((toast)=>!this.dismissedToasts.has(toast.id));\n        };\n        this.subscribers = [];\n        this.toasts = [];\n        this.dismissedToasts = new Set();\n    }\n}\nconst ToastState = new Observer();\n// bind this to the toast function\nconst toastFunction = (message, data)=>{\n    const id = (data == null ? void 0 : data.id) || toastsCounter++;\n    ToastState.addToast({\n        title: message,\n        ...data,\n        id\n    });\n    return id;\n};\nconst isHttpResponse = (data)=>{\n    return data && typeof data === 'object' && 'ok' in data && typeof data.ok === 'boolean' && 'status' in data && typeof data.status === 'number';\n};\nconst basicToast = toastFunction;\nconst getHistory = ()=>ToastState.toasts;\nconst getToasts = ()=>ToastState.getActiveToasts();\n// We use `Object.assign` to maintain the correct types as we would lose them otherwise\nconst toast = Object.assign(basicToast, {\n    success: ToastState.success,\n    info: ToastState.info,\n    warning: ToastState.warning,\n    error: ToastState.error,\n    custom: ToastState.custom,\n    message: ToastState.message,\n    promise: ToastState.promise,\n    dismiss: ToastState.dismiss,\n    loading: ToastState.loading\n}, {\n    getHistory,\n    getToasts\n});\n\n__insertCSS(\"[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\");\n\nfunction isAction(action) {\n    return action.label !== undefined;\n}\n\n// Visible toasts amount\nconst VISIBLE_TOASTS_AMOUNT = 3;\n// Viewport padding\nconst VIEWPORT_OFFSET = '24px';\n// Mobile viewport padding\nconst MOBILE_VIEWPORT_OFFSET = '16px';\n// Default lifetime of a toasts (in ms)\nconst TOAST_LIFETIME = 4000;\n// Default toast width\nconst TOAST_WIDTH = 356;\n// Default gap between toasts\nconst GAP = 14;\n// Threshold to dismiss a toast\nconst SWIPE_THRESHOLD = 45;\n// Equal to exit animation duration\nconst TIME_BEFORE_UNMOUNT = 200;\nfunction cn(...classes) {\n    return classes.filter(Boolean).join(' ');\n}\nfunction getDefaultSwipeDirections(position) {\n    const [y, x] = position.split('-');\n    const directions = [];\n    if (y) {\n        directions.push(y);\n    }\n    if (x) {\n        directions.push(x);\n    }\n    return directions;\n}\nconst Toast = (props)=>{\n    var _toast_classNames, _toast_classNames1, _toast_classNames2, _toast_classNames3, _toast_classNames4, _toast_classNames5, _toast_classNames6, _toast_classNames7, _toast_classNames8;\n    const { invert: ToasterInvert, toast, unstyled, interacting, setHeights, visibleToasts, heights, index, toasts, expanded, removeToast, defaultRichColors, closeButton: closeButtonFromToaster, style, cancelButtonStyle, actionButtonStyle, className = '', descriptionClassName = '', duration: durationFromToaster, position, gap, expandByDefault, classNames, icons, closeButtonAriaLabel = 'Close toast' } = props;\n    const [swipeDirection, setSwipeDirection] = React.useState(null);\n    const [swipeOutDirection, setSwipeOutDirection] = React.useState(null);\n    const [mounted, setMounted] = React.useState(false);\n    const [removed, setRemoved] = React.useState(false);\n    const [swiping, setSwiping] = React.useState(false);\n    const [swipeOut, setSwipeOut] = React.useState(false);\n    const [isSwiped, setIsSwiped] = React.useState(false);\n    const [offsetBeforeRemove, setOffsetBeforeRemove] = React.useState(0);\n    const [initialHeight, setInitialHeight] = React.useState(0);\n    const remainingTime = React.useRef(toast.duration || durationFromToaster || TOAST_LIFETIME);\n    const dragStartTime = React.useRef(null);\n    const toastRef = React.useRef(null);\n    const isFront = index === 0;\n    const isVisible = index + 1 <= visibleToasts;\n    const toastType = toast.type;\n    const dismissible = toast.dismissible !== false;\n    const toastClassname = toast.className || '';\n    const toastDescriptionClassname = toast.descriptionClassName || '';\n    // Height index is used to calculate the offset as it gets updated before the toast array, which means we can calculate the new layout faster.\n    const heightIndex = React.useMemo(()=>heights.findIndex((height)=>height.toastId === toast.id) || 0, [\n        heights,\n        toast.id\n    ]);\n    const closeButton = React.useMemo(()=>{\n        var _toast_closeButton;\n        return (_toast_closeButton = toast.closeButton) != null ? _toast_closeButton : closeButtonFromToaster;\n    }, [\n        toast.closeButton,\n        closeButtonFromToaster\n    ]);\n    const duration = React.useMemo(()=>toast.duration || durationFromToaster || TOAST_LIFETIME, [\n        toast.duration,\n        durationFromToaster\n    ]);\n    const closeTimerStartTimeRef = React.useRef(0);\n    const offset = React.useRef(0);\n    const lastCloseTimerStartTimeRef = React.useRef(0);\n    const pointerStartRef = React.useRef(null);\n    const [y, x] = position.split('-');\n    const toastsHeightBefore = React.useMemo(()=>{\n        return heights.reduce((prev, curr, reducerIndex)=>{\n            // Calculate offset up until current toast\n            if (reducerIndex >= heightIndex) {\n                return prev;\n            }\n            return prev + curr.height;\n        }, 0);\n    }, [\n        heights,\n        heightIndex\n    ]);\n    const isDocumentHidden = useIsDocumentHidden();\n    const invert = toast.invert || ToasterInvert;\n    const disabled = toastType === 'loading';\n    offset.current = React.useMemo(()=>heightIndex * gap + toastsHeightBefore, [\n        heightIndex,\n        toastsHeightBefore\n    ]);\n    React.useEffect(()=>{\n        remainingTime.current = duration;\n    }, [\n        duration\n    ]);\n    React.useEffect(()=>{\n        // Trigger enter animation without using CSS animation\n        setMounted(true);\n    }, []);\n    React.useEffect(()=>{\n        const toastNode = toastRef.current;\n        if (toastNode) {\n            const height = toastNode.getBoundingClientRect().height;\n            // Add toast height to heights array after the toast is mounted\n            setInitialHeight(height);\n            setHeights((h)=>[\n                    {\n                        toastId: toast.id,\n                        height,\n                        position: toast.position\n                    },\n                    ...h\n                ]);\n            return ()=>setHeights((h)=>h.filter((height)=>height.toastId !== toast.id));\n        }\n    }, [\n        setHeights,\n        toast.id\n    ]);\n    React.useLayoutEffect(()=>{\n        // Keep height up to date with the content in case it updates\n        if (!mounted) return;\n        const toastNode = toastRef.current;\n        const originalHeight = toastNode.style.height;\n        toastNode.style.height = 'auto';\n        const newHeight = toastNode.getBoundingClientRect().height;\n        toastNode.style.height = originalHeight;\n        setInitialHeight(newHeight);\n        setHeights((heights)=>{\n            const alreadyExists = heights.find((height)=>height.toastId === toast.id);\n            if (!alreadyExists) {\n                return [\n                    {\n                        toastId: toast.id,\n                        height: newHeight,\n                        position: toast.position\n                    },\n                    ...heights\n                ];\n            } else {\n                return heights.map((height)=>height.toastId === toast.id ? {\n                        ...height,\n                        height: newHeight\n                    } : height);\n            }\n        });\n    }, [\n        mounted,\n        toast.title,\n        toast.description,\n        setHeights,\n        toast.id,\n        toast.jsx,\n        toast.action,\n        toast.cancel\n    ]);\n    const deleteToast = React.useCallback(()=>{\n        // Save the offset for the exit swipe animation\n        setRemoved(true);\n        setOffsetBeforeRemove(offset.current);\n        setHeights((h)=>h.filter((height)=>height.toastId !== toast.id));\n        setTimeout(()=>{\n            removeToast(toast);\n        }, TIME_BEFORE_UNMOUNT);\n    }, [\n        toast,\n        removeToast,\n        setHeights,\n        offset\n    ]);\n    React.useEffect(()=>{\n        if (toast.promise && toastType === 'loading' || toast.duration === Infinity || toast.type === 'loading') return;\n        let timeoutId;\n        // Pause the timer on each hover\n        const pauseTimer = ()=>{\n            if (lastCloseTimerStartTimeRef.current < closeTimerStartTimeRef.current) {\n                // Get the elapsed time since the timer started\n                const elapsedTime = new Date().getTime() - closeTimerStartTimeRef.current;\n                remainingTime.current = remainingTime.current - elapsedTime;\n            }\n            lastCloseTimerStartTimeRef.current = new Date().getTime();\n        };\n        const startTimer = ()=>{\n            // setTimeout(, Infinity) behaves as if the delay is 0.\n            // As a result, the toast would be closed immediately, giving the appearance that it was never rendered.\n            // See: https://github.com/denysdovhan/wtfjs?tab=readme-ov-file#an-infinite-timeout\n            if (remainingTime.current === Infinity) return;\n            closeTimerStartTimeRef.current = new Date().getTime();\n            // Let the toast know it has started\n            timeoutId = setTimeout(()=>{\n                toast.onAutoClose == null ? void 0 : toast.onAutoClose.call(toast, toast);\n                deleteToast();\n            }, remainingTime.current);\n        };\n        if (expanded || interacting || isDocumentHidden) {\n            pauseTimer();\n        } else {\n            startTimer();\n        }\n        return ()=>clearTimeout(timeoutId);\n    }, [\n        expanded,\n        interacting,\n        toast,\n        toastType,\n        isDocumentHidden,\n        deleteToast\n    ]);\n    React.useEffect(()=>{\n        if (toast.delete) {\n            deleteToast();\n            toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n        }\n    }, [\n        deleteToast,\n        toast.delete\n    ]);\n    function getLoadingIcon() {\n        var _toast_classNames;\n        if (icons == null ? void 0 : icons.loading) {\n            var _toast_classNames1;\n            return /*#__PURE__*/ React.createElement(\"div\", {\n                className: cn(classNames == null ? void 0 : classNames.loader, toast == null ? void 0 : (_toast_classNames1 = toast.classNames) == null ? void 0 : _toast_classNames1.loader, 'sonner-loader'),\n                \"data-visible\": toastType === 'loading'\n            }, icons.loading);\n        }\n        return /*#__PURE__*/ React.createElement(Loader, {\n            className: cn(classNames == null ? void 0 : classNames.loader, toast == null ? void 0 : (_toast_classNames = toast.classNames) == null ? void 0 : _toast_classNames.loader),\n            visible: toastType === 'loading'\n        });\n    }\n    const icon = toast.icon || (icons == null ? void 0 : icons[toastType]) || getAsset(toastType);\n    var _toast_richColors, _icons_close;\n    return /*#__PURE__*/ React.createElement(\"li\", {\n        tabIndex: 0,\n        ref: toastRef,\n        className: cn(className, toastClassname, classNames == null ? void 0 : classNames.toast, toast == null ? void 0 : (_toast_classNames = toast.classNames) == null ? void 0 : _toast_classNames.toast, classNames == null ? void 0 : classNames.default, classNames == null ? void 0 : classNames[toastType], toast == null ? void 0 : (_toast_classNames1 = toast.classNames) == null ? void 0 : _toast_classNames1[toastType]),\n        \"data-sonner-toast\": \"\",\n        \"data-rich-colors\": (_toast_richColors = toast.richColors) != null ? _toast_richColors : defaultRichColors,\n        \"data-styled\": !Boolean(toast.jsx || toast.unstyled || unstyled),\n        \"data-mounted\": mounted,\n        \"data-promise\": Boolean(toast.promise),\n        \"data-swiped\": isSwiped,\n        \"data-removed\": removed,\n        \"data-visible\": isVisible,\n        \"data-y-position\": y,\n        \"data-x-position\": x,\n        \"data-index\": index,\n        \"data-front\": isFront,\n        \"data-swiping\": swiping,\n        \"data-dismissible\": dismissible,\n        \"data-type\": toastType,\n        \"data-invert\": invert,\n        \"data-swipe-out\": swipeOut,\n        \"data-swipe-direction\": swipeOutDirection,\n        \"data-expanded\": Boolean(expanded || expandByDefault && mounted),\n        \"data-testid\": toast.testId,\n        style: {\n            '--index': index,\n            '--toasts-before': index,\n            '--z-index': toasts.length - index,\n            '--offset': `${removed ? offsetBeforeRemove : offset.current}px`,\n            '--initial-height': expandByDefault ? 'auto' : `${initialHeight}px`,\n            ...style,\n            ...toast.style\n        },\n        onDragEnd: ()=>{\n            setSwiping(false);\n            setSwipeDirection(null);\n            pointerStartRef.current = null;\n        },\n        onPointerDown: (event)=>{\n            if (event.button === 2) return; // Return early on right click\n            if (disabled || !dismissible) return;\n            dragStartTime.current = new Date();\n            setOffsetBeforeRemove(offset.current);\n            // Ensure we maintain correct pointer capture even when going outside of the toast (e.g. when swiping)\n            event.target.setPointerCapture(event.pointerId);\n            if (event.target.tagName === 'BUTTON') return;\n            setSwiping(true);\n            pointerStartRef.current = {\n                x: event.clientX,\n                y: event.clientY\n            };\n        },\n        onPointerUp: ()=>{\n            var _toastRef_current, _toastRef_current1, _dragStartTime_current;\n            if (swipeOut || !dismissible) return;\n            pointerStartRef.current = null;\n            const swipeAmountX = Number(((_toastRef_current = toastRef.current) == null ? void 0 : _toastRef_current.style.getPropertyValue('--swipe-amount-x').replace('px', '')) || 0);\n            const swipeAmountY = Number(((_toastRef_current1 = toastRef.current) == null ? void 0 : _toastRef_current1.style.getPropertyValue('--swipe-amount-y').replace('px', '')) || 0);\n            const timeTaken = new Date().getTime() - ((_dragStartTime_current = dragStartTime.current) == null ? void 0 : _dragStartTime_current.getTime());\n            const swipeAmount = swipeDirection === 'x' ? swipeAmountX : swipeAmountY;\n            const velocity = Math.abs(swipeAmount) / timeTaken;\n            if (Math.abs(swipeAmount) >= SWIPE_THRESHOLD || velocity > 0.11) {\n                setOffsetBeforeRemove(offset.current);\n                toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n                if (swipeDirection === 'x') {\n                    setSwipeOutDirection(swipeAmountX > 0 ? 'right' : 'left');\n                } else {\n                    setSwipeOutDirection(swipeAmountY > 0 ? 'down' : 'up');\n                }\n                deleteToast();\n                setSwipeOut(true);\n                return;\n            } else {\n                var _toastRef_current2, _toastRef_current3;\n                (_toastRef_current2 = toastRef.current) == null ? void 0 : _toastRef_current2.style.setProperty('--swipe-amount-x', `0px`);\n                (_toastRef_current3 = toastRef.current) == null ? void 0 : _toastRef_current3.style.setProperty('--swipe-amount-y', `0px`);\n            }\n            setIsSwiped(false);\n            setSwiping(false);\n            setSwipeDirection(null);\n        },\n        onPointerMove: (event)=>{\n            var _window_getSelection, // Apply transform using both x and y values\n            _toastRef_current, _toastRef_current1;\n            if (!pointerStartRef.current || !dismissible) return;\n            const isHighlighted = ((_window_getSelection = window.getSelection()) == null ? void 0 : _window_getSelection.toString().length) > 0;\n            if (isHighlighted) return;\n            const yDelta = event.clientY - pointerStartRef.current.y;\n            const xDelta = event.clientX - pointerStartRef.current.x;\n            var _props_swipeDirections;\n            const swipeDirections = (_props_swipeDirections = props.swipeDirections) != null ? _props_swipeDirections : getDefaultSwipeDirections(position);\n            // Determine swipe direction if not already locked\n            if (!swipeDirection && (Math.abs(xDelta) > 1 || Math.abs(yDelta) > 1)) {\n                setSwipeDirection(Math.abs(xDelta) > Math.abs(yDelta) ? 'x' : 'y');\n            }\n            let swipeAmount = {\n                x: 0,\n                y: 0\n            };\n            const getDampening = (delta)=>{\n                const factor = Math.abs(delta) / 20;\n                return 1 / (1.5 + factor);\n            };\n            // Only apply swipe in the locked direction\n            if (swipeDirection === 'y') {\n                // Handle vertical swipes\n                if (swipeDirections.includes('top') || swipeDirections.includes('bottom')) {\n                    if (swipeDirections.includes('top') && yDelta < 0 || swipeDirections.includes('bottom') && yDelta > 0) {\n                        swipeAmount.y = yDelta;\n                    } else {\n                        // Smoothly transition to dampened movement\n                        const dampenedDelta = yDelta * getDampening(yDelta);\n                        // Ensure we don't jump when transitioning to dampened movement\n                        swipeAmount.y = Math.abs(dampenedDelta) < Math.abs(yDelta) ? dampenedDelta : yDelta;\n                    }\n                }\n            } else if (swipeDirection === 'x') {\n                // Handle horizontal swipes\n                if (swipeDirections.includes('left') || swipeDirections.includes('right')) {\n                    if (swipeDirections.includes('left') && xDelta < 0 || swipeDirections.includes('right') && xDelta > 0) {\n                        swipeAmount.x = xDelta;\n                    } else {\n                        // Smoothly transition to dampened movement\n                        const dampenedDelta = xDelta * getDampening(xDelta);\n                        // Ensure we don't jump when transitioning to dampened movement\n                        swipeAmount.x = Math.abs(dampenedDelta) < Math.abs(xDelta) ? dampenedDelta : xDelta;\n                    }\n                }\n            }\n            if (Math.abs(swipeAmount.x) > 0 || Math.abs(swipeAmount.y) > 0) {\n                setIsSwiped(true);\n            }\n            (_toastRef_current = toastRef.current) == null ? void 0 : _toastRef_current.style.setProperty('--swipe-amount-x', `${swipeAmount.x}px`);\n            (_toastRef_current1 = toastRef.current) == null ? void 0 : _toastRef_current1.style.setProperty('--swipe-amount-y', `${swipeAmount.y}px`);\n        }\n    }, closeButton && !toast.jsx && toastType !== 'loading' ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"aria-label\": closeButtonAriaLabel,\n        \"data-disabled\": disabled,\n        \"data-close-button\": true,\n        onClick: disabled || !dismissible ? ()=>{} : ()=>{\n            deleteToast();\n            toast.onDismiss == null ? void 0 : toast.onDismiss.call(toast, toast);\n        },\n        className: cn(classNames == null ? void 0 : classNames.closeButton, toast == null ? void 0 : (_toast_classNames2 = toast.classNames) == null ? void 0 : _toast_classNames2.closeButton)\n    }, (_icons_close = icons == null ? void 0 : icons.close) != null ? _icons_close : CloseIcon) : null, (toastType || toast.icon || toast.promise) && toast.icon !== null && ((icons == null ? void 0 : icons[toastType]) !== null || toast.icon) ? /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-icon\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.icon, toast == null ? void 0 : (_toast_classNames3 = toast.classNames) == null ? void 0 : _toast_classNames3.icon)\n    }, toast.promise || toast.type === 'loading' && !toast.icon ? toast.icon || getLoadingIcon() : null, toast.type !== 'loading' ? icon : null) : null, /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-content\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.content, toast == null ? void 0 : (_toast_classNames4 = toast.classNames) == null ? void 0 : _toast_classNames4.content)\n    }, /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-title\": \"\",\n        className: cn(classNames == null ? void 0 : classNames.title, toast == null ? void 0 : (_toast_classNames5 = toast.classNames) == null ? void 0 : _toast_classNames5.title)\n    }, toast.jsx ? toast.jsx : typeof toast.title === 'function' ? toast.title() : toast.title), toast.description ? /*#__PURE__*/ React.createElement(\"div\", {\n        \"data-description\": \"\",\n        className: cn(descriptionClassName, toastDescriptionClassname, classNames == null ? void 0 : classNames.description, toast == null ? void 0 : (_toast_classNames6 = toast.classNames) == null ? void 0 : _toast_classNames6.description)\n    }, typeof toast.description === 'function' ? toast.description() : toast.description) : null), /*#__PURE__*/ React.isValidElement(toast.cancel) ? toast.cancel : toast.cancel && isAction(toast.cancel) ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"data-button\": true,\n        \"data-cancel\": true,\n        style: toast.cancelButtonStyle || cancelButtonStyle,\n        onClick: (event)=>{\n            // We need to check twice because typescript\n            if (!isAction(toast.cancel)) return;\n            if (!dismissible) return;\n            toast.cancel.onClick == null ? void 0 : toast.cancel.onClick.call(toast.cancel, event);\n            deleteToast();\n        },\n        className: cn(classNames == null ? void 0 : classNames.cancelButton, toast == null ? void 0 : (_toast_classNames7 = toast.classNames) == null ? void 0 : _toast_classNames7.cancelButton)\n    }, toast.cancel.label) : null, /*#__PURE__*/ React.isValidElement(toast.action) ? toast.action : toast.action && isAction(toast.action) ? /*#__PURE__*/ React.createElement(\"button\", {\n        \"data-button\": true,\n        \"data-action\": true,\n        style: toast.actionButtonStyle || actionButtonStyle,\n        onClick: (event)=>{\n            // We need to check twice because typescript\n            if (!isAction(toast.action)) return;\n            toast.action.onClick == null ? void 0 : toast.action.onClick.call(toast.action, event);\n            if (event.defaultPrevented) return;\n            deleteToast();\n        },\n        className: cn(classNames == null ? void 0 : classNames.actionButton, toast == null ? void 0 : (_toast_classNames8 = toast.classNames) == null ? void 0 : _toast_classNames8.actionButton)\n    }, toast.action.label) : null);\n};\nfunction getDocumentDirection() {\n    if (typeof window === 'undefined') return 'ltr';\n    if (typeof document === 'undefined') return 'ltr'; // For Fresh purpose\n    const dirAttribute = document.documentElement.getAttribute('dir');\n    if (dirAttribute === 'auto' || !dirAttribute) {\n        return window.getComputedStyle(document.documentElement).direction;\n    }\n    return dirAttribute;\n}\nfunction assignOffset(defaultOffset, mobileOffset) {\n    const styles = {};\n    [\n        defaultOffset,\n        mobileOffset\n    ].forEach((offset, index)=>{\n        const isMobile = index === 1;\n        const prefix = isMobile ? '--mobile-offset' : '--offset';\n        const defaultValue = isMobile ? MOBILE_VIEWPORT_OFFSET : VIEWPORT_OFFSET;\n        function assignAll(offset) {\n            [\n                'top',\n                'right',\n                'bottom',\n                'left'\n            ].forEach((key)=>{\n                styles[`${prefix}-${key}`] = typeof offset === 'number' ? `${offset}px` : offset;\n            });\n        }\n        if (typeof offset === 'number' || typeof offset === 'string') {\n            assignAll(offset);\n        } else if (typeof offset === 'object') {\n            [\n                'top',\n                'right',\n                'bottom',\n                'left'\n            ].forEach((key)=>{\n                if (offset[key] === undefined) {\n                    styles[`${prefix}-${key}`] = defaultValue;\n                } else {\n                    styles[`${prefix}-${key}`] = typeof offset[key] === 'number' ? `${offset[key]}px` : offset[key];\n                }\n            });\n        } else {\n            assignAll(defaultValue);\n        }\n    });\n    return styles;\n}\nfunction useSonner() {\n    const [activeToasts, setActiveToasts] = React.useState([]);\n    React.useEffect(()=>{\n        return ToastState.subscribe((toast)=>{\n            if (toast.dismiss) {\n                setTimeout(()=>{\n                    ReactDOM.flushSync(()=>{\n                        setActiveToasts((toasts)=>toasts.filter((t)=>t.id !== toast.id));\n                    });\n                });\n                return;\n            }\n            // Prevent batching, temp solution.\n            setTimeout(()=>{\n                ReactDOM.flushSync(()=>{\n                    setActiveToasts((toasts)=>{\n                        const indexOfExistingToast = toasts.findIndex((t)=>t.id === toast.id);\n                        // Update the toast if it already exists\n                        if (indexOfExistingToast !== -1) {\n                            return [\n                                ...toasts.slice(0, indexOfExistingToast),\n                                {\n                                    ...toasts[indexOfExistingToast],\n                                    ...toast\n                                },\n                                ...toasts.slice(indexOfExistingToast + 1)\n                            ];\n                        }\n                        return [\n                            toast,\n                            ...toasts\n                        ];\n                    });\n                });\n            });\n        });\n    }, []);\n    return {\n        toasts: activeToasts\n    };\n}\nconst Toaster = /*#__PURE__*/ React.forwardRef(function Toaster(props, ref) {\n    const { id, invert, position = 'bottom-right', hotkey = [\n        'altKey',\n        'KeyT'\n    ], expand, closeButton, className, offset, mobileOffset, theme = 'light', richColors, duration, style, visibleToasts = VISIBLE_TOASTS_AMOUNT, toastOptions, dir = getDocumentDirection(), gap = GAP, icons, containerAriaLabel = 'Notifications' } = props;\n    const [toasts, setToasts] = React.useState([]);\n    const filteredToasts = React.useMemo(()=>{\n        if (id) {\n            return toasts.filter((toast)=>toast.toasterId === id);\n        }\n        return toasts.filter((toast)=>!toast.toasterId);\n    }, [\n        toasts,\n        id\n    ]);\n    const possiblePositions = React.useMemo(()=>{\n        return Array.from(new Set([\n            position\n        ].concat(filteredToasts.filter((toast)=>toast.position).map((toast)=>toast.position))));\n    }, [\n        filteredToasts,\n        position\n    ]);\n    const [heights, setHeights] = React.useState([]);\n    const [expanded, setExpanded] = React.useState(false);\n    const [interacting, setInteracting] = React.useState(false);\n    const [actualTheme, setActualTheme] = React.useState(theme !== 'system' ? theme : typeof window !== 'undefined' ? window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light');\n    const listRef = React.useRef(null);\n    const hotkeyLabel = hotkey.join('+').replace(/Key/g, '').replace(/Digit/g, '');\n    const lastFocusedElementRef = React.useRef(null);\n    const isFocusWithinRef = React.useRef(false);\n    const removeToast = React.useCallback((toastToRemove)=>{\n        setToasts((toasts)=>{\n            var _toasts_find;\n            if (!((_toasts_find = toasts.find((toast)=>toast.id === toastToRemove.id)) == null ? void 0 : _toasts_find.delete)) {\n                ToastState.dismiss(toastToRemove.id);\n            }\n            return toasts.filter(({ id })=>id !== toastToRemove.id);\n        });\n    }, []);\n    React.useEffect(()=>{\n        return ToastState.subscribe((toast)=>{\n            if (toast.dismiss) {\n                // Prevent batching of other state updates\n                requestAnimationFrame(()=>{\n                    setToasts((toasts)=>toasts.map((t)=>t.id === toast.id ? {\n                                ...t,\n                                delete: true\n                            } : t));\n                });\n                return;\n            }\n            // Prevent batching, temp solution.\n            setTimeout(()=>{\n                ReactDOM.flushSync(()=>{\n                    setToasts((toasts)=>{\n                        const indexOfExistingToast = toasts.findIndex((t)=>t.id === toast.id);\n                        // Update the toast if it already exists\n                        if (indexOfExistingToast !== -1) {\n                            return [\n                                ...toasts.slice(0, indexOfExistingToast),\n                                {\n                                    ...toasts[indexOfExistingToast],\n                                    ...toast\n                                },\n                                ...toasts.slice(indexOfExistingToast + 1)\n                            ];\n                        }\n                        return [\n                            toast,\n                            ...toasts\n                        ];\n                    });\n                });\n            });\n        });\n    }, [\n        toasts\n    ]);\n    React.useEffect(()=>{\n        if (theme !== 'system') {\n            setActualTheme(theme);\n            return;\n        }\n        if (theme === 'system') {\n            // check if current preference is dark\n            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n                // it's currently dark\n                setActualTheme('dark');\n            } else {\n                // it's not dark\n                setActualTheme('light');\n            }\n        }\n        if (typeof window === 'undefined') return;\n        const darkMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n        try {\n            // Chrome & Firefox\n            darkMediaQuery.addEventListener('change', ({ matches })=>{\n                if (matches) {\n                    setActualTheme('dark');\n                } else {\n                    setActualTheme('light');\n                }\n            });\n        } catch (error) {\n            // Safari < 14\n            darkMediaQuery.addListener(({ matches })=>{\n                try {\n                    if (matches) {\n                        setActualTheme('dark');\n                    } else {\n                        setActualTheme('light');\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n            });\n        }\n    }, [\n        theme\n    ]);\n    React.useEffect(()=>{\n        // Ensure expanded is always false when no toasts are present / only one left\n        if (toasts.length <= 1) {\n            setExpanded(false);\n        }\n    }, [\n        toasts\n    ]);\n    React.useEffect(()=>{\n        const handleKeyDown = (event)=>{\n            var _listRef_current;\n            const isHotkeyPressed = hotkey.every((key)=>event[key] || event.code === key);\n            if (isHotkeyPressed) {\n                var _listRef_current1;\n                setExpanded(true);\n                (_listRef_current1 = listRef.current) == null ? void 0 : _listRef_current1.focus();\n            }\n            if (event.code === 'Escape' && (document.activeElement === listRef.current || ((_listRef_current = listRef.current) == null ? void 0 : _listRef_current.contains(document.activeElement)))) {\n                setExpanded(false);\n            }\n        };\n        document.addEventListener('keydown', handleKeyDown);\n        return ()=>document.removeEventListener('keydown', handleKeyDown);\n    }, [\n        hotkey\n    ]);\n    React.useEffect(()=>{\n        if (listRef.current) {\n            return ()=>{\n                if (lastFocusedElementRef.current) {\n                    lastFocusedElementRef.current.focus({\n                        preventScroll: true\n                    });\n                    lastFocusedElementRef.current = null;\n                    isFocusWithinRef.current = false;\n                }\n            };\n        }\n    }, [\n        listRef.current\n    ]);\n    return(// Remove item from normal navigation flow, only available via hotkey\n    /*#__PURE__*/ React.createElement(\"section\", {\n        ref: ref,\n        \"aria-label\": `${containerAriaLabel} ${hotkeyLabel}`,\n        tabIndex: -1,\n        \"aria-live\": \"polite\",\n        \"aria-relevant\": \"additions text\",\n        \"aria-atomic\": \"false\",\n        suppressHydrationWarning: true\n    }, possiblePositions.map((position, index)=>{\n        var _heights_;\n        const [y, x] = position.split('-');\n        if (!filteredToasts.length) return null;\n        return /*#__PURE__*/ React.createElement(\"ol\", {\n            key: position,\n            dir: dir === 'auto' ? getDocumentDirection() : dir,\n            tabIndex: -1,\n            ref: listRef,\n            className: className,\n            \"data-sonner-toaster\": true,\n            \"data-sonner-theme\": actualTheme,\n            \"data-y-position\": y,\n            \"data-x-position\": x,\n            style: {\n                '--front-toast-height': `${((_heights_ = heights[0]) == null ? void 0 : _heights_.height) || 0}px`,\n                '--width': `${TOAST_WIDTH}px`,\n                '--gap': `${gap}px`,\n                ...style,\n                ...assignOffset(offset, mobileOffset)\n            },\n            onBlur: (event)=>{\n                if (isFocusWithinRef.current && !event.currentTarget.contains(event.relatedTarget)) {\n                    isFocusWithinRef.current = false;\n                    if (lastFocusedElementRef.current) {\n                        lastFocusedElementRef.current.focus({\n                            preventScroll: true\n                        });\n                        lastFocusedElementRef.current = null;\n                    }\n                }\n            },\n            onFocus: (event)=>{\n                const isNotDismissible = event.target instanceof HTMLElement && event.target.dataset.dismissible === 'false';\n                if (isNotDismissible) return;\n                if (!isFocusWithinRef.current) {\n                    isFocusWithinRef.current = true;\n                    lastFocusedElementRef.current = event.relatedTarget;\n                }\n            },\n            onMouseEnter: ()=>setExpanded(true),\n            onMouseMove: ()=>setExpanded(true),\n            onMouseLeave: ()=>{\n                // Avoid setting expanded to false when interacting with a toast, e.g. swiping\n                if (!interacting) {\n                    setExpanded(false);\n                }\n            },\n            onDragEnd: ()=>setExpanded(false),\n            onPointerDown: (event)=>{\n                const isNotDismissible = event.target instanceof HTMLElement && event.target.dataset.dismissible === 'false';\n                if (isNotDismissible) return;\n                setInteracting(true);\n            },\n            onPointerUp: ()=>setInteracting(false)\n        }, filteredToasts.filter((toast)=>!toast.position && index === 0 || toast.position === position).map((toast, index)=>{\n            var _toastOptions_duration, _toastOptions_closeButton;\n            return /*#__PURE__*/ React.createElement(Toast, {\n                key: toast.id,\n                icons: icons,\n                index: index,\n                toast: toast,\n                defaultRichColors: richColors,\n                duration: (_toastOptions_duration = toastOptions == null ? void 0 : toastOptions.duration) != null ? _toastOptions_duration : duration,\n                className: toastOptions == null ? void 0 : toastOptions.className,\n                descriptionClassName: toastOptions == null ? void 0 : toastOptions.descriptionClassName,\n                invert: invert,\n                visibleToasts: visibleToasts,\n                closeButton: (_toastOptions_closeButton = toastOptions == null ? void 0 : toastOptions.closeButton) != null ? _toastOptions_closeButton : closeButton,\n                interacting: interacting,\n                position: position,\n                style: toastOptions == null ? void 0 : toastOptions.style,\n                unstyled: toastOptions == null ? void 0 : toastOptions.unstyled,\n                classNames: toastOptions == null ? void 0 : toastOptions.classNames,\n                cancelButtonStyle: toastOptions == null ? void 0 : toastOptions.cancelButtonStyle,\n                actionButtonStyle: toastOptions == null ? void 0 : toastOptions.actionButtonStyle,\n                closeButtonAriaLabel: toastOptions == null ? void 0 : toastOptions.closeButtonAriaLabel,\n                removeToast: removeToast,\n                toasts: filteredToasts.filter((t)=>t.position == toast.position),\n                heights: heights.filter((h)=>h.position == toast.position),\n                setHeights: setHeights,\n                expandByDefault: expand,\n                gap: gap,\n                expanded: expanded,\n                swipeDirections: props.swipeDirections\n            });\n        }));\n    })));\n});\n\nexport { Toaster, toast, useSonner };\n","import {\n  CheckCircle,\n  Info,\n  Loader,\n  XCircle,\n  AlertTriangle,\n} from \"lucide-react\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  return (\n    <Sonner\n      theme=\"light\"\n      className=\"toaster group\"\n      icons={{\n        success: <CheckCircle className=\"h-4 w-4\" />,\n        info: <Info className=\"h-4 w-4\" />,\n        warning: <AlertTriangle className=\"h-4 w-4\" />,\n        error: <XCircle className=\"h-4 w-4\" />,\n        loading: <Loader className=\"h-4 w-4 animate-spin\" />,\n      }}\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","import { Component, type ErrorInfo, type ReactNode } from 'react';\n\ninterface ErrorBoundaryProps {\n  children: ReactNode;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { hasError: true, error };\n  }\n\n  override componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    console.error('[ErrorBoundary] Uncaught error:', error, errorInfo);\n  }\n\n  handleReset = () => {\n    this.setState({ hasError: false, error: null });\n  };\n\n  override render(): ReactNode {\n    if (this.state.hasError) {\n      return (\n        <div className=\"flex min-h-screen items-center justify-center p-5 bg-z-bg-primary\">\n          <div className=\"w-full max-w-md bg-z-bg-card rounded-2xl border border-z-border p-6 text-center space-y-4\">\n            <h2 className=\"text-xl font-semibold text-z-red\">\n              \n            </h2>\n            <p className=\"text-sm text-z-text-secondary\">\n              {this.state.error?.message || ''}\n            </p>\n            <div className=\"flex gap-3 justify-center\">\n              <button\n                onClick={this.handleReset}\n                className=\"px-4 py-2 rounded-xl bg-z-bg-elevated text-z-text-primary border border-z-border text-sm font-medium transition-all active:scale-95\"\n              >\n                \n              </button>\n              <button\n                onClick={() => { window.location.href = '/'; }}\n                className=\"px-4 py-2 rounded-xl bg-z-accent text-black text-sm font-semibold transition-all active:scale-95\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","// WebSocket service for Z2M Lite\n// T027: WebSocket service with connection lifecycle management\n\nimport type { Z2MMessage, BridgeRequest, BridgeResponse } from '../types/websocket';\n\ntype MessageHandler = (topic: string, payload: unknown) => void;\ntype ConnectionListener = (connected: boolean) => void;\n\nclass WebSocketService {\n  private ws: WebSocket | null = null;\n  private url: string = '';\n  private reconnectAttempt: number = 0;\n  private maxReconnectAttempts: number = Infinity; // T154: Unlimited reconnection\n  private reconnectDelay: number = 1000; // Start with 1s\n  private maxReconnectDelay: number = 30000; // Max 30s\n  private reconnectTimeout: NodeJS.Timeout | null = null;\n  private messageHandlers: Set<MessageHandler> = new Set();\n  private connectionListeners: Set<ConnectionListener> = new Set();\n  private commandQueue: BridgeRequest[] = [];\n  private isIntentionalClose: boolean = false;\n\n  constructor() {\n    // Mode 1: HA Add-on (proxy mode)  connect to same host /z2m-ws\n    // Mode 2: URL params (HA integration mode)\n    // Mode 3: Env vars (standalone dev)\n    const urlParams = new URLSearchParams(window.location.search);\n    const loc = window.location;\n\n    if (loc.pathname.includes('/api/hassio_ingress/') || document.querySelector('meta[name=\"z2m-proxy\"]')) {\n      // HA Ingress mode: WebSocket proxied through nginx at /z2m-ws\n      const wsProtocol = loc.protocol === 'https:' ? 'wss' : 'ws';\n      this.url = `${wsProtocol}://${loc.host}${loc.pathname.replace(/\\/+$/, '')}/z2m-ws`;\n    } else if (urlParams.get('z2m_host')) {\n      // URL params mode (HA panel_custom integration)\n      const host = urlParams.get('z2m_host')!;\n      const port = urlParams.get('z2m_port') || '8080';\n      const secure = urlParams.get('z2m_secure') === 'true';\n      this.url = `${secure ? 'wss' : 'ws'}://${host}:${port}/api`;\n    } else {\n      // Standalone mode (env vars)\n      const host = import.meta.env.VITE_Z2M_HOST || 'localhost';\n      const port = import.meta.env.VITE_Z2M_PORT || '8080';\n      const secure = import.meta.env.VITE_Z2M_SECURE === 'true';\n      const path = import.meta.env.VITE_Z2M_PATH || '/api';\n      this.url = `${secure ? 'wss' : 'ws'}://${host}:${port}${path}`;\n    }\n\n    console.log('[WebSocket] Target URL:', this.url);\n  }\n\n  connect(): void {\n    if (this.ws?.readyState === WebSocket.OPEN || this.ws?.readyState === WebSocket.CONNECTING) {\n      return;\n    }\n\n    this.isIntentionalClose = false;\n\n    try {\n      this.ws = new WebSocket(this.url);\n\n      this.ws.onopen = () => {\n        console.log('[WebSocket] Connected to Z2M');\n        this.reconnectAttempt = 0;\n        this.reconnectDelay = 1000;\n        this.notifyConnectionListeners(true);\n        this.processCommandQueue();\n      };\n\n      this.ws.onmessage = (event) => {\n        try {\n          const message: Z2MMessage = JSON.parse(event.data);\n          this.handleMessage(message);\n        } catch (error) {\n          console.error('[WebSocket] Failed to parse message:', error);\n        }\n      };\n\n      this.ws.onerror = (error) => {\n        console.error('[WebSocket] Error:', error);\n      };\n\n      this.ws.onclose = () => {\n        console.log('[WebSocket] Disconnected from Z2M');\n        this.notifyConnectionListeners(false);\n        \n        if (!this.isIntentionalClose) {\n          this.scheduleReconnect();\n        }\n      };\n    } catch (error) {\n      console.error('[WebSocket] Connection failed:', error);\n      this.scheduleReconnect();\n    }\n  }\n\n  disconnect(): void {\n    this.isIntentionalClose = true;\n    if (this.reconnectTimeout) {\n      clearTimeout(this.reconnectTimeout);\n      this.reconnectTimeout = null;\n    }\n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n\n  private scheduleReconnect(): void {\n    if (this.reconnectAttempt >= this.maxReconnectAttempts) {\n      console.error('[WebSocket] Max reconnect attempts reached');\n      return;\n    }\n\n    this.reconnectAttempt++;\n    const delay = Math.min(\n      this.reconnectDelay * Math.pow(2, this.reconnectAttempt - 1),\n      this.maxReconnectDelay\n    );\n\n    console.log(`[WebSocket] Reconnecting in ${delay}ms (attempt ${this.reconnectAttempt}/${this.maxReconnectAttempts})`);\n\n    this.reconnectTimeout = setTimeout(() => {\n      this.connect();\n    }, delay);\n  }\n\n  private handleMessage(message: Z2MMessage): void {\n    this.messageHandlers.forEach((handler) => {\n      try {\n        handler(message.topic, message.payload);\n      } catch (error) {\n        console.error('[WebSocket] Handler error:', error);\n      }\n    });\n  }\n\n  send(topic: string, payload: unknown): Promise<BridgeResponse | void> {\n    return new Promise((resolve, reject) => {\n      if (this.ws?.readyState !== WebSocket.OPEN) {\n        // Queue command for retry after reconnection\n        this.commandQueue.push({ topic, message: payload });\n        reject(new Error('WebSocket not connected'));\n        return;\n      }\n\n      try {\n        const message: Z2MMessage = { topic, payload };\n        console.log('[WebSocket] Sending:', JSON.stringify(message));\n        this.ws.send(JSON.stringify(message));\n        \n        // For bridge/request messages, we could implement transaction tracking\n        // For now, just resolve immediately\n        resolve();\n      } catch (error) {\n        console.error('[WebSocket] Send failed:', error);\n        reject(error);\n      }\n    });\n  }\n\n  private processCommandQueue(): void {\n    while (this.commandQueue.length > 0) {\n      const command = this.commandQueue.shift();\n      if (command) {\n        this.send(command.topic, command.message).catch((error) => {\n          console.error('[WebSocket] Queued command failed:', error);\n        });\n      }\n    }\n  }\n\n  subscribe(handler: MessageHandler): () => void {\n    this.messageHandlers.add(handler);\n    return () => this.messageHandlers.delete(handler);\n  }\n\n  onConnectionChange(listener: ConnectionListener): () => void {\n    this.connectionListeners.add(listener);\n    return () => this.connectionListeners.delete(listener);\n  }\n\n  private notifyConnectionListeners(connected: boolean): void {\n    this.connectionListeners.forEach((listener) => {\n      try {\n        listener(connected);\n      } catch (error) {\n        console.error('[WebSocket] Listener error:', error);\n      }\n    });\n  }\n\n  isConnected(): boolean {\n    return this.ws?.readyState === WebSocket.OPEN;\n  }\n\n  updateConfig(host: string, port: string, secure: boolean, path: string = '/api'): void {\n    const protocol = secure ? 'wss' : 'ws';\n    const newUrl = `${protocol}://${host}:${port}${path}`;\n    \n    if (newUrl !== this.url) {\n      this.url = newUrl;\n      this.disconnect();\n      this.connect();\n    }\n  }\n}\n\nexport const websocketService = new WebSocketService();\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","// Connection store for Z2M Lite\n// T031: WebSocket connection state management\n\nimport { create } from 'zustand';\nimport type { Connection, ConnectionConfig, ConnectionState } from '../types/connection';\n\ninterface ConnectionStore extends Connection {\n  setConnectionState: (state: ConnectionState) => void;\n  setError: (error: string | undefined) => void;\n  setBridgeState: (state: 'online' | 'offline') => void;\n  setPermitJoin: (permitJoin: boolean, timeout?: number) => void;\n  incrementReconnectAttempt: () => void;\n  resetReconnectAttempt: () => void;\n  updateConfig: (config: Partial<ConnectionConfig>) => void;\n  updateLastConnected: () => void;\n  updateLastDisconnected: () => void;\n}\n\nconst defaultConfig: ConnectionConfig = {\n  host: import.meta.env.VITE_Z2M_HOST || 'localhost',\n  port: parseInt(import.meta.env.VITE_Z2M_PORT || '8080', 10),\n  secure: import.meta.env.VITE_Z2M_SECURE === 'true',\n  path: import.meta.env.VITE_Z2M_PATH || '/api',\n  reconnectDelay: 1000,\n  maxReconnectDelay: 30000,\n  reconnectAttempts: 10,\n};\n\nexport const useConnectionStore = create<ConnectionStore>((set) => ({\n  state: 'disconnected',\n  config: defaultConfig,\n  error: undefined,\n  lastConnected: undefined,\n  lastDisconnected: undefined,\n  reconnectAttempt: 0,\n  bridgeState: undefined,\n  permitJoin: false,\n  permitJoinTimeout: undefined,\n\n  setConnectionState: (state) => { set({ state }); },\n  \n  setError: (error) => { set({ error }); },\n  \n  setBridgeState: (bridgeState) => { set({ bridgeState }); },\n  \n  setPermitJoin: (permitJoin, permitJoinTimeout) => \n    { set({ permitJoin, permitJoinTimeout }); },\n  \n  incrementReconnectAttempt: () =>\n    { set((state) => ({ reconnectAttempt: state.reconnectAttempt + 1 })); },\n  \n  resetReconnectAttempt: () => { set({ reconnectAttempt: 0 }); },\n  \n  updateConfig: (newConfig) =>\n    { set((state) => ({\n      config: { ...state.config, ...newConfig },\n    })); },\n  \n  updateLastConnected: () => { set({ lastConnected: Date.now() }); },\n  \n  updateLastDisconnected: () => { set({ lastDisconnected: Date.now() }); },\n}));\n","// Device store for Z2M Lite\n// T032: Normalized device state management\n\nimport { create } from 'zustand';\nimport type { Device, DeviceCapabilities, DeviceState, DeviceType } from '../types/device';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n// Parse Z2M exposes array into our DeviceCapabilities format\nfunction parseCapabilities(exposes: any[]): DeviceCapabilities {\n  const caps: DeviceCapabilities = {};\n  const endpoints: import('../types/device').EndpointInfo[] = [];\n\n  function scanFeatures(items: any[], parentEndpoint?: string, _parentType?: string) {\n    for (const item of items) {\n      const type: string | undefined = item.type;\n      const name: string | undefined = item.name;\n      const endpoint: string | undefined = item.endpoint || parentEndpoint;\n\n      // Composite types (light, switch, cover, fan, lock, climate) have nested features\n      if (Array.isArray(item.features)) {\n        if (type === 'light' || type === 'switch') {\n          caps.onOff = true;\n\n          // Track endpoint info for multi-gang devices\n          if (endpoint) {\n            const stateFeature = item.features.find((f: any) => f.name === 'state');\n            const epFeatures: string[] = [];\n            for (const f of item.features) {\n              if (f.name === 'brightness') epFeatures.push('brightness');\n              if (f.name === 'color_temp') epFeatures.push('color_temp');\n            }\n            endpoints.push({\n              endpoint,\n              property: stateFeature?.property || `state_${endpoint}`,\n              type: type as 'switch' | 'light',\n              features: epFeatures.length > 0 ? epFeatures : undefined,\n            });\n          }\n        }\n        if (type === 'cover') {\n          caps['cover'] = true;\n        }\n        scanFeatures(item.features, endpoint, type);\n        continue;\n      }\n\n      // Direct feature names\n      if (name === 'state' && (type === 'binary' || type === 'enum')) {\n        caps.onOff = true;\n      }\n      if (name === 'brightness' && type === 'numeric') {\n        caps.brightness = true;\n      }\n      if (name === 'color_temp' && type === 'numeric') {\n        caps.colorTemperature = true;\n      }\n      if (name === 'color_xy') {\n        caps.colorXY = true;\n      }\n      if (name === 'color_hs') {\n        caps.colorHS = true;\n      }\n    }\n  }\n\n  scanFeatures(exposes);\n\n  // Only store endpoints if device has multiple (multi-gang)\n  if (endpoints.length > 1) {\n    caps.endpoints = endpoints;\n  }\n\n  return caps;\n}\n\n// Map Z2M device type string to our DeviceType\nfunction mapDeviceType(z2mType: string, exposes: any[]): DeviceType {\n  const lower = z2mType.toLowerCase();\n  if (lower === 'coordinator') return 'coordinator';\n\n  const hasLight = exposes.some((e: any) => e.type === 'light');\n  const hasSwitch = exposes.some((e: any) => e.type === 'switch');\n  const hasCover = exposes.some((e: any) => e.type === 'cover');\n  const hasSensor = exposes.some((e: any) => {\n    const n: string | undefined = e.name;\n    return n === 'temperature' || n === 'humidity' || n === 'occupancy' || n === 'contact';\n  });\n\n  if (hasLight) return 'light';\n  if (hasSwitch) return 'switch';\n  if (hasCover) return 'switch'; // treat cover as switch for now\n  if (hasSensor) return 'sensor';\n  if (lower === 'router') return 'router';\n  return 'unknown';\n}\n\n// Normalize a raw Z2M device object into our Device type\nfunction normalizeDevice(raw: any): Device {\n  const definition = raw.definition;\n  const exposes: any[] = definition?.exposes ?? [];\n  const z2mType: string = raw.type ?? 'unknown';\n\n  return {\n    ieee_address: raw.ieee_address ?? '',\n    type: mapDeviceType(z2mType, exposes),\n    friendly_name: raw.friendly_name ?? '',\n    model_id: raw.model_id,\n    manufacturer: raw.manufacturer,\n    definition: definition,\n    capabilities: parseCapabilities(exposes),\n    state: raw.state ?? {},\n    supported: raw.supported ?? false,\n    disabled: raw.disabled ?? false,\n    power_source: raw.power_source,\n    date_code: raw.date_code,\n    software_build_id: raw.software_build_id,\n    interviewing: raw.interviewing,\n    interview_completed: raw.interview_completed,\n    lastSeen: typeof raw.last_seen === 'number' ? raw.last_seen : Date.now(),\n    isNew: false,\n  };\n}\n\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\ninterface DeviceStore {\n  // Normalized state\n  byId: Record<string, Device>;\n  allIds: string[];\n  \n  // Actions\n  setDevices: (devices: Device[]) => void;\n  addDevice: (device: Device) => void;\n  updateDevice: (friendlyName: string, updates: Partial<Device>) => void;\n  updateDeviceState: (friendlyName: string, state: Partial<DeviceState>) => void;\n  removeDevice: (friendlyName: string) => void;\n  markDeviceAsNew: (friendlyName: string) => void;\n  clearNewFlag: (friendlyName: string) => void;\n  \n  renameDevice: (oldName: string, newName: string) => void;\n\n  // Selectors\n  getDevice: (friendlyName: string) => Device | undefined;\n  getAllDevices: () => Device[];\n  getDevicesByType: (type: string) => Device[];\n  getOnlineDevices: () => Device[];\n  getOfflineDevices: () => Device[];\n}\n\nexport const useDeviceStore = create<DeviceStore>((set, get) => ({\n  byId: {},\n  allIds: [],\n\n  setDevices: (rawDevices) => {\n    const byId: Record<string, Device> = {};\n    const allIds: string[] = [];\n    \n    (rawDevices as unknown as Array<Record<string, unknown>>).forEach((raw) => {\n      const device = normalizeDevice(raw);\n      byId[device.friendly_name] = device;\n      allIds.push(device.friendly_name);\n    });\n    \n    set({ byId, allIds });\n  },\n\n  addDevice: (device) => {\n    set((state) => ({\n      byId: { ...state.byId, [device.friendly_name]: device },\n      allIds: state.allIds.includes(device.friendly_name)\n        ? state.allIds\n        : [...state.allIds, device.friendly_name],\n    }));\n  },\n\n  updateDevice: (friendlyName, updates) => {\n    set((state) => {\n      const device = state.byId[friendlyName];\n      if (!device) return state;\n\n      return {\n        byId: {\n          ...state.byId,\n          [friendlyName]: { ...device, ...updates },\n        },\n      };\n    });\n  },\n\n  updateDeviceState: (friendlyName, stateUpdates) => {\n    set((state) => {\n      const device = state.byId[friendlyName];\n      if (!device) return state;\n\n      return {\n        byId: {\n          ...state.byId,\n          [friendlyName]: {\n            ...device,\n            state: { ...device.state, ...stateUpdates },\n            lastSeen: Date.now(),\n          },\n        },\n      };\n    });\n  },\n\n  removeDevice: (friendlyName) => {\n    set((state) => {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { [friendlyName]: _removed, ...rest } = state.byId;\n      return {\n        byId: rest,\n        allIds: state.allIds.filter((id) => id !== friendlyName),\n      };\n    });\n  },\n\n  markDeviceAsNew: (friendlyName) => {\n    set((state) => {\n      const device = state.byId[friendlyName];\n      if (!device) return state;\n\n      return {\n        byId: {\n          ...state.byId,\n          [friendlyName]: { ...device, isNew: true },\n        },\n      };\n    });\n  },\n\n  clearNewFlag: (friendlyName) => {\n    set((state) => {\n      const device = state.byId[friendlyName];\n      if (!device) return state;\n\n      return {\n        byId: {\n          ...state.byId,\n          [friendlyName]: { ...device, isNew: false },\n        },\n      };\n    });\n  },\n\n  renameDevice: (oldName, newName) => {\n    set((state) => {\n      const device = state.byId[oldName];\n      if (!device) return state;\n\n      const { [oldName]: _, ...restById } = state.byId;\n      const renamedDevice = { ...device, friendly_name: newName };\n\n      return {\n        byId: { ...restById, [newName]: renamedDevice },\n        allIds: state.allIds.map((id) => (id === oldName ? newName : id)),\n      };\n    });\n  },\n\n  // Selectors\n  getDevice: (friendlyName) => {\n    return get().byId[friendlyName];\n  },\n\n  getAllDevices: () => {\n    const { byId, allIds } = get();\n    return allIds.map((id) => byId[id]).filter((device): device is Device => Boolean(device));\n  },\n\n  getDevicesByType: (type) => {\n    return get().getAllDevices().filter((device) => device.type === type);\n  },\n\n  getOnlineDevices: () => {\n    return get().getAllDevices().filter((device) => {\n      if (!device.lastSeen) return false;\n      const fiveMinutes = 5 * 60 * 1000;\n      return Date.now() - device.lastSeen < fiveMinutes;\n    });\n  },\n\n  getOfflineDevices: () => {\n    return get().getAllDevices().filter((device) => {\n      if (!device.lastSeen) return true;\n      const fiveMinutes = 5 * 60 * 1000;\n      return Date.now() - device.lastSeen >= fiveMinutes;\n    });\n  },\n}));\n","// Group store for Z2M Lite\n// T034: Group definitions and member tracking\n\nimport { create } from 'zustand';\nimport type { Group, GroupId, GroupAggregateState } from '../types/group';\n\ninterface GroupStore {\n  groups: Group[];\n  byId: Record<GroupId, Group>;\n  \n  // Actions\n  setGroups: (groups: Group[]) => void;\n  addGroup: (group: Group) => void;\n  updateGroup: (id: GroupId, updates: Partial<Group>) => void;\n  removeGroup: (id: GroupId) => void;\n  updateGroupState: (id: GroupId, state: Partial<Group['state']>) => void;\n  \n  // Selectors\n  getGroup: (id: GroupId) => Group | undefined;\n  getGroupAggregateState: (id: GroupId, deviceStates: Record<string, { state?: 'ON' | 'OFF' }>) => GroupAggregateState;\n  getGroupAverageBrightness: (id: GroupId, deviceStates: Record<string, { brightness?: number }>) => number | undefined;\n}\n\nexport const useGroupStore = create<GroupStore>((set, get) => ({\n  groups: [],\n  byId: {},\n\n  setGroups: (groups) => {\n    const byId: Record<GroupId, Group> = {};\n    groups.forEach((group) => {\n      byId[group.id] = group;\n    });\n    set({ groups, byId });\n  },\n\n  addGroup: (group) => {\n    set((state) => ({\n      groups: [...state.groups, group],\n      byId: { ...state.byId, [group.id]: group },\n    }));\n  },\n\n  updateGroup: (id, updates) => {\n    set((state) => {\n      const group = state.byId[id];\n      if (!group) return state;\n\n      const updatedGroup = { ...group, ...updates };\n      return {\n        groups: state.groups.map((g) => (g.id === id ? updatedGroup : g)),\n        byId: { ...state.byId, [id]: updatedGroup },\n      };\n    });\n  },\n\n  removeGroup: (id) => {\n    set((state) => {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { [id]: _removed, ...rest } = state.byId;\n      return {\n        groups: state.groups.filter((g) => g.id !== id),\n        byId: rest,\n      };\n    });\n  },\n\n  updateGroupState: (id, stateUpdates) => {\n    set((state) => {\n      const group = state.byId[id];\n      if (!group) return state;\n\n      const updatedGroup = {\n        ...group,\n        state: { ...group.state, ...stateUpdates },\n      };\n\n      return {\n        groups: state.groups.map((g) => (g.id === id ? updatedGroup : g)),\n        byId: { ...state.byId, [id]: updatedGroup },\n      };\n    });\n  },\n\n  // Selectors\n  getGroup: (id) => {\n    return get().byId[id];\n  },\n\n  getGroupAggregateState: (id, deviceStates) => {\n    const group = get().byId[id];\n    if (!group || group.members.length === 0) {\n      return 'all_off';\n    }\n\n    const memberStates = group.members\n      .map((member) => deviceStates[member.ieee_address]?.state)\n      .filter(Boolean);\n\n    if (memberStates.length === 0) {\n      return 'all_off';\n    }\n\n    const allOn = memberStates.every((state) => state === 'ON');\n    const allOff = memberStates.every((state) => state === 'OFF');\n\n    if (allOn) return 'all_on';\n    if (allOff) return 'all_off';\n    return 'mixed';\n  },\n\n  getGroupAverageBrightness: (id, deviceStates) => {\n    const group = get().byId[id];\n    if (!group || group.members.length === 0) {\n      return undefined;\n    }\n\n    const brightnesses = group.members\n      .map((member) => deviceStates[member.ieee_address]?.brightness)\n      .filter((b): b is number => typeof b === 'number');\n\n    if (brightnesses.length === 0) {\n      return undefined;\n    }\n\n    const sum = brightnesses.reduce((acc, b) => acc + b, 0);\n    return Math.round(sum / brightnesses.length);\n  },\n}));\n","// WebSocket hook for Z2M Lite\n// T036: Integrate websocketService with connection store\n\nimport { useEffect, useCallback } from 'react';\nimport { websocketService } from '../services/websocketService';\nimport { useConnectionStore } from '../stores/connectionStore';\nimport { useDeviceStore } from '../stores/deviceStore';\nimport { useGroupStore } from '../stores/groupStore';\nimport type {\n  BridgeStateMessage,\n  BridgeInfoResponse,\n  BridgeEventMessage,\n  DeviceStateMessage,\n} from '../types/websocket';\n\nexport function useWebSocket() {\n  // Use selectors to avoid subscribing to entire store objects,\n  // which would cause infinite re-renders when effects update the store.\n  const connectionState = useConnectionStore((s) => s.state);\n  const bridgeState = useConnectionStore((s) => s.bridgeState);\n\n  useEffect(() => {\n    // Access stores via getState() inside callbacks to avoid stale closures\n    // and to keep effect dependencies stable (empty array).\n    const handleMessage = (topic: string, payload: unknown) => {\n      const connStore = useConnectionStore.getState();\n      const devStore = useDeviceStore.getState();\n      const grpStore = useGroupStore.getState();\n\n      // Normalize topic: Z2M WebSocket sends without 'zigbee2mqtt/' prefix\n      const normalizedTopic = topic.startsWith('zigbee2mqtt/')\n        ? topic.replace('zigbee2mqtt/', '')\n        : topic;\n\n      // Bridge state updates\n      if (normalizedTopic === 'bridge/state') {\n        if (payload && typeof payload === 'object' && 'state' in payload) {\n          const msg = payload as BridgeStateMessage;\n          connStore.setBridgeState(msg.state);\n        }\n      }\n\n      // Bridge info (permit join status, etc.)\n      else if (normalizedTopic === 'bridge/info') {\n        if (payload && typeof payload === 'object') {\n          const msg = payload as BridgeInfoResponse;\n          connStore.setPermitJoin(!!msg.permit_join, msg.permit_join_timeout ?? undefined);\n        }\n      }\n\n      // Bridge converters (ignore)\n      else if (normalizedTopic === 'bridge/converters') {\n        // Skip - not needed\n      }\n\n      // Device list response\n      else if (normalizedTopic === 'bridge/devices') {\n        const devices = Array.isArray(payload) ? payload : [];\n        devStore.setDevices(devices);\n      }\n\n      // Group list response\n      else if (normalizedTopic === 'bridge/groups') {\n        const groups = Array.isArray(payload) ? payload : [];\n        grpStore.setGroups(groups);\n      }\n\n      // Bridge events (device joined, removed, etc.)\n      else if (normalizedTopic === 'bridge/event') {\n        if (!payload || typeof payload !== 'object') return;\n        const msg = payload as BridgeEventMessage;\n\n        if (msg.type === 'device_joined' && msg.data.friendly_name) {\n          devStore.markDeviceAsNew(msg.data.friendly_name);\n        } else if (msg.type === 'device_leave' && msg.data.friendly_name) {\n          devStore.removeDevice(msg.data.friendly_name);\n        } else if (msg.type === 'device_renamed' && msg.data['from'] && msg.data['to']) {\n          const from = msg.data['from'] as string;\n          const to = msg.data['to'] as string;\n          devStore.renameDevice(from, to);\n        }\n      }\n\n      // Device and group state updates (T144, T145, T146)\n      else if (!normalizedTopic.startsWith('bridge/')) {\n        const name = normalizedTopic.split('/')[0];\n        const stateMsg = payload as DeviceStateMessage;\n\n        if (name) {\n          // T144: Check if this is a group state update\n          const matchedGroup = grpStore.groups.find(\n            (g) => g.friendly_name === name\n          );\n          if (matchedGroup) {\n            grpStore.updateGroupState(matchedGroup.id, stateMsg);\n          }\n\n          // Also update device state (device and group names can overlap)\n          devStore.updateDeviceState(name, stateMsg);\n        }\n      }\n    };\n\n    // Subscribe to WebSocket messages\n    const unsubscribe = websocketService.subscribe(handleMessage);\n\n    // Subscribe to connection changes\n    const unsubscribeConnection = websocketService.onConnectionChange((connected) => {\n      const connStore = useConnectionStore.getState();\n      if (connected) {\n        connStore.setConnectionState('connected');\n        connStore.updateLastConnected();\n        connStore.resetReconnectAttempt();\n\n        // Request initial data\n        websocketService.send('bridge/request/config', {});\n        websocketService.send('bridge/request/device/list', {});\n        websocketService.send('bridge/request/group/list', {});\n      } else {\n        connStore.setConnectionState('disconnected');\n        connStore.updateLastDisconnected();\n      }\n    });\n\n    // Auto-connect on mount\n    useConnectionStore.getState().setConnectionState('connecting');\n    websocketService.connect();\n\n    return () => {\n      unsubscribe();\n      unsubscribeConnection();\n    };\n  }, []);\n\n  const connect = useCallback(() => {\n    useConnectionStore.getState().setConnectionState('connecting');\n    websocketService.connect();\n  }, []);\n\n  const disconnect = useCallback(() => {\n    websocketService.disconnect();\n    useConnectionStore.getState().setConnectionState('disconnected');\n  }, []);\n\n  return {\n    connect,\n    disconnect,\n    isConnected: connectionState === 'connected',\n    connectionState,\n    bridgeState,\n  };\n}\n","// Storage service for Z2M Lite\n// T028: localStorage persistence helpers\n\nconst STORAGE_PREFIX = 'z2m-lite:';\nconst STORAGE_VERSION = '1';\n\nexport interface StorageOptions {\n  version?: string;\n  expiresIn?: number; // milliseconds\n}\n\ninterface StorageItem<T> {\n  version: string;\n  data: T;\n  timestamp: number;\n  expiresAt?: number;\n}\n\nclass StorageService {\n  private getKey(key: string): string {\n    return `${STORAGE_PREFIX}${key}`;\n  }\n\n  set<T>(key: string, value: T, options?: StorageOptions): boolean {\n    try {\n      const storageKey = this.getKey(key);\n      const item: StorageItem<T> = {\n        version: options?.version || STORAGE_VERSION,\n        data: value,\n        timestamp: Date.now(),\n        expiresAt: options?.expiresIn ? Date.now() + options.expiresIn : undefined,\n      };\n      \n      localStorage.setItem(storageKey, JSON.stringify(item));\n      return true;\n    } catch (error) {\n      console.error(`[Storage] Failed to set ${key}:`, error);\n      return false;\n    }\n  }\n\n  get<T>(key: string, defaultValue?: T): T | undefined {\n    try {\n      const storageKey = this.getKey(key);\n      const raw = localStorage.getItem(storageKey);\n      \n      if (!raw) {\n        return defaultValue;\n      }\n\n      const item: StorageItem<T> = JSON.parse(raw);\n\n      // Check expiration\n      if (item.expiresAt && Date.now() > item.expiresAt) {\n        this.remove(key);\n        return defaultValue;\n      }\n\n      // Version mismatch - return default and clear old data\n      if (item.version !== STORAGE_VERSION) {\n        console.warn(`[Storage] Version mismatch for ${key}, clearing old data`);\n        this.remove(key);\n        return defaultValue;\n      }\n\n      return item.data;\n    } catch (error) {\n      console.error(`[Storage] Failed to get ${key}:`, error);\n      return defaultValue;\n    }\n  }\n\n  remove(key: string): void {\n    try {\n      const storageKey = this.getKey(key);\n      localStorage.removeItem(storageKey);\n    } catch (error) {\n      console.error(`[Storage] Failed to remove ${key}:`, error);\n    }\n  }\n\n  clear(): void {\n    try {\n      const keys = Object.keys(localStorage);\n      keys.forEach((key) => {\n        if (key.startsWith(STORAGE_PREFIX)) {\n          localStorage.removeItem(key);\n        }\n      });\n    } catch (error) {\n      console.error('[Storage] Failed to clear storage:', error);\n    }\n  }\n\n  has(key: string): boolean {\n    const storageKey = this.getKey(key);\n    return localStorage.getItem(storageKey) !== null;\n  }\n\n  getTimestamp(key: string): number | undefined {\n    try {\n      const storageKey = this.getKey(key);\n      const raw = localStorage.getItem(storageKey);\n      \n      if (!raw) {\n        return undefined;\n      }\n\n      const item: StorageItem<unknown> = JSON.parse(raw);\n      return item.timestamp;\n    } catch (error) {\n      console.error(`[Storage] Failed to get timestamp for ${key}:`, error);\n      return undefined;\n    }\n  }\n\n  isStale(key: string, maxAgeMs: number): boolean {\n    const timestamp = this.getTimestamp(key);\n    if (!timestamp) {\n      return true;\n    }\n    return Date.now() - timestamp > maxAgeMs;\n  }\n}\n\nexport const storageService = new StorageService();\n","// Room service for Z2M Lite\n// T030: CRUD operations for rooms\n\nimport type { Room, RoomId, RoomIcon } from '../types/room';\nimport { storageService } from './storageService';\n\nconst ROOMS_STORAGE_KEY = 'rooms';\nconst ROOM_ASSIGNMENTS_KEY = 'room-assignments';\n\nclass RoomService {\n  /**\n   * Get all rooms\n   */\n  getRooms(): Room[] {\n    return storageService.get<Room[]>(ROOMS_STORAGE_KEY, []) ?? [];\n  }\n\n  /**\n   * Get a single room by ID\n   */\n  getRoom(id: RoomId): Room | undefined {\n    const rooms = this.getRooms();\n    return rooms.find((room) => room.id === id);\n  }\n\n  /**\n   * Create a new room\n   */\n  createRoom(name: string, icon: RoomIcon): Room {\n    const rooms = this.getRooms();\n    const now = Date.now();\n    \n    const newRoom: Room = {\n      id: `room-${now}`,\n      name,\n      icon,\n      deviceIds: [],\n      createdAt: now,\n      updatedAt: now,\n    };\n\n    rooms.push(newRoom);\n    storageService.set(ROOMS_STORAGE_KEY, rooms);\n    \n    return newRoom;\n  }\n\n  /**\n   * Update an existing room\n   */\n  updateRoom(id: RoomId, updates: Partial<Pick<Room, 'name' | 'icon'>>): Room | undefined {\n    const rooms = this.getRooms();\n    const roomIndex = rooms.findIndex((room) => room.id === id);\n\n    if (roomIndex === -1) {\n      return undefined;\n    }\n\n    const existingRoom = rooms[roomIndex]!;\n    const updatedRoom: Room = {\n      id: existingRoom.id,\n      name: updates.name ?? existingRoom.name,\n      icon: updates.icon ?? existingRoom.icon,\n      deviceIds: existingRoom.deviceIds,\n      createdAt: existingRoom.createdAt,\n      updatedAt: Date.now(),\n    };\n\n    rooms[roomIndex] = updatedRoom;\n    storageService.set(ROOMS_STORAGE_KEY, rooms);\n\n    return updatedRoom;\n  }\n\n  /**\n   * Delete a room\n   */\n  deleteRoom(id: RoomId): boolean {\n    const rooms = this.getRooms();\n    const filteredRooms = rooms.filter((room) => room.id !== id);\n    \n    if (filteredRooms.length === rooms.length) {\n      return false; // Room not found\n    }\n\n    storageService.set(ROOMS_STORAGE_KEY, filteredRooms);\n    \n    // Remove device assignments for this room\n    const assignments = this.getRoomAssignments();\n    const updatedAssignments: Record<string, RoomId> = {};\n    \n    Object.entries(assignments).forEach(([deviceId, roomId]) => {\n      if (roomId !== id) {\n        updatedAssignments[deviceId] = roomId;\n      }\n    });\n    \n    storageService.set(ROOM_ASSIGNMENTS_KEY, updatedAssignments);\n    \n    return true;\n  }\n\n  /**\n   * Get all device-room assignments\n   */\n  getRoomAssignments(): Record<string, RoomId> {\n    return storageService.get<Record<string, RoomId>>(ROOM_ASSIGNMENTS_KEY, {}) ?? {};\n  }\n\n  /**\n   * Assign a device to a room\n   */\n  assignDeviceToRoom(deviceId: string, roomId: RoomId): void {\n    const assignments = this.getRoomAssignments();\n    assignments[deviceId] = roomId;\n    storageService.set(ROOM_ASSIGNMENTS_KEY, assignments);\n    \n    // Update room's deviceIds\n    const rooms = this.getRooms();\n    rooms.forEach((room) => {\n      if (room.id === roomId && !room.deviceIds.includes(deviceId)) {\n        room.deviceIds.push(deviceId);\n        room.updatedAt = Date.now();\n      } else if (room.id !== roomId && room.deviceIds.includes(deviceId)) {\n        room.deviceIds = room.deviceIds.filter((id) => id !== deviceId);\n        room.updatedAt = Date.now();\n      }\n    });\n    \n    storageService.set(ROOMS_STORAGE_KEY, rooms);\n  }\n\n  /**\n   * Unassign a device from its room\n   */\n  unassignDevice(deviceId: string): void {\n    const assignments = this.getRoomAssignments();\n    const roomId = assignments[deviceId];\n    \n    delete assignments[deviceId];\n    storageService.set(ROOM_ASSIGNMENTS_KEY, assignments);\n    \n    // Update room's deviceIds\n    if (roomId) {\n      const rooms = this.getRooms();\n      const room = rooms.find((r) => r.id === roomId);\n      if (room) {\n        room.deviceIds = room.deviceIds.filter((id) => id !== deviceId);\n        room.updatedAt = Date.now();\n        storageService.set(ROOMS_STORAGE_KEY, rooms);\n      }\n    }\n  }\n\n  /**\n   * Get the room ID for a device\n   */\n  getDeviceRoom(deviceId: string): RoomId | undefined {\n    const assignments = this.getRoomAssignments();\n    return assignments[deviceId];\n  }\n\n  /**\n   * Get all devices in a room\n   */\n  getDevicesInRoom(roomId: RoomId): string[] {\n    const room = this.getRoom(roomId);\n    return room?.deviceIds || [];\n  }\n}\n\nexport const roomService = new RoomService();\n","// Room store for Z2M Lite\n// T033: Room definitions and device assignments\n\nimport { create } from 'zustand';\nimport type { Room, RoomId } from '../types/room';\nimport { roomService } from '../services/roomService';\n\ninterface RoomStore {\n  rooms: Room[];\n  deviceRoomAssignments: Record<string, RoomId>;\n  \n  // Actions\n  loadRooms: () => void;\n  addRoom: (room: Room) => void;\n  updateRoom: (id: RoomId, updates: Partial<Room>) => void;\n  deleteRoom: (id: RoomId) => void;\n  assignDevice: (deviceId: string, roomId: RoomId) => void;\n  unassignDevice: (deviceId: string) => void;\n  \n  // Selectors\n  getRoom: (id: RoomId) => Room | undefined;\n  getDeviceRoom: (deviceId: string) => RoomId | undefined;\n  getRoomDevices: (roomId: RoomId) => string[];\n  getUnassignedDevices: (allDeviceIds: string[]) => string[];\n}\n\nexport const useRoomStore = create<RoomStore>((set, get) => ({\n  rooms: [],\n  deviceRoomAssignments: {},\n\n  loadRooms: () => {\n    const rooms = roomService.getRooms();\n    const deviceRoomAssignments = roomService.getRoomAssignments();\n    set({ rooms, deviceRoomAssignments });\n  },\n\n  addRoom: (room) => {\n    set((state) => ({\n      rooms: [...state.rooms, room],\n    }));\n  },\n\n  updateRoom: (id, updates) => {\n    set((state) => ({\n      rooms: state.rooms.map((room) =>\n        room.id === id ? { ...room, ...updates, updatedAt: Date.now() } : room\n      ),\n    }));\n  },\n\n  deleteRoom: (id) => {\n    set((state) => {\n      // Remove assignments for devices in this room\n      const updatedAssignments = { ...state.deviceRoomAssignments };\n      Object.entries(updatedAssignments).forEach(([deviceId, roomId]) => {\n        if (roomId === id) {\n          delete updatedAssignments[deviceId];\n        }\n      });\n\n      return {\n        rooms: state.rooms.filter((room) => room.id !== id),\n        deviceRoomAssignments: updatedAssignments,\n      };\n    });\n  },\n\n  // T083: Room assignment handler with localStorage persistence\n  assignDevice: (deviceId, roomId) => {\n    roomService.assignDeviceToRoom(deviceId, roomId);\n    set((state) => ({\n      deviceRoomAssignments: {\n        ...state.deviceRoomAssignments,\n        [deviceId]: roomId,\n      },\n    }));\n  },\n\n  unassignDevice: (deviceId) => {\n    roomService.unassignDevice(deviceId);\n    set((state) => {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { [deviceId]: _removed, ...rest } = state.deviceRoomAssignments;\n      return { deviceRoomAssignments: rest };\n    });\n  },\n\n  // Selectors\n  getRoom: (id) => {\n    return get().rooms.find((room) => room.id === id);\n  },\n\n  getDeviceRoom: (deviceId) => {\n    return get().deviceRoomAssignments[deviceId];\n  },\n\n  getRoomDevices: (roomId) => {\n    const { deviceRoomAssignments } = get();\n    return Object.entries(deviceRoomAssignments)\n      .filter(([, assignedRoomId]) => assignedRoomId === roomId)\n      .map(([deviceId]) => deviceId);\n  },\n\n  getUnassignedDevices: (allDeviceIds) => {\n    const { deviceRoomAssignments } = get();\n    return allDeviceIds.filter((deviceId) => !deviceRoomAssignments[deviceId]);\n  },\n}));\n","// Preferences store for Z2M Lite\n// T035: Theme, language, and user settings\n\nimport { create } from 'zustand';\nimport { storageService } from '../services/storageService';\n\nconst PREFERENCES_KEY = 'preferences';\n\nexport type Theme = 'dark' | 'light' | 'system';\nexport type Language = 'zh-TW' | 'en';\n\ninterface PairingState {\n  active: boolean;\n  remainingSeconds: number;\n}\n\ninterface Preferences {\n  theme: Theme;\n  language: Language;\n  pairingState: PairingState;\n  \n  // Actions\n  setTheme: (theme: Theme) => void;\n  setLanguage: (language: Language) => void;\n  startPairing: (seconds: number) => void;\n  stopPairing: () => void;\n  decrementPairingTimer: () => void;\n  loadPreferences: () => void;\n  savePreferences: () => void;\n}\n\nconst defaultPreferences = {\n  theme: 'dark' as Theme,\n  language: 'zh-TW' as Language,\n  pairingState: {\n    active: false,\n    remainingSeconds: 0,\n  },\n};\n\nexport const usePreferencesStore = create<Preferences>((set, get) => ({\n  ...defaultPreferences,\n\n  setTheme: (theme) => {\n    set({ theme });\n    get().savePreferences();\n  },\n\n  setLanguage: (language) => {\n    set({ language });\n    get().savePreferences();\n  },\n\n  startPairing: (seconds) => {\n    set({\n      pairingState: {\n        active: true,\n        remainingSeconds: seconds,\n      },\n    });\n  },\n\n  stopPairing: () => {\n    set({\n      pairingState: {\n        active: false,\n        remainingSeconds: 0,\n      },\n    });\n  },\n\n  decrementPairingTimer: () => {\n    set((state) => {\n      if (!state.pairingState.active) return state;\n\n      const remainingSeconds = state.pairingState.remainingSeconds - 1;\n\n      if (remainingSeconds <= 0) {\n        return {\n          pairingState: {\n            active: false,\n            remainingSeconds: 0,\n          },\n        };\n      }\n\n      return {\n        pairingState: {\n          active: true,\n          remainingSeconds,\n        },\n      };\n    });\n  },\n\n  loadPreferences: () => {\n    const stored = storageService.get<Omit<Preferences, 'setTheme' | 'setLanguage' | 'startPairing' | 'stopPairing' | 'decrementPairingTimer' | 'loadPreferences' | 'savePreferences'>>(\n      PREFERENCES_KEY\n    );\n    \n    if (stored) {\n      set({\n        theme: stored.theme || defaultPreferences.theme,\n        language: stored.language || defaultPreferences.language,\n        pairingState: stored.pairingState || defaultPreferences.pairingState,\n      });\n    }\n  },\n\n  savePreferences: () => {\n    const { theme, language, pairingState } = get();\n    storageService.set(PREFERENCES_KEY, {\n      theme,\n      language,\n      pairingState,\n    });\n  },\n}));\n","import { useLocation, useNavigate } from 'react-router-dom';\nimport { Home, Users, Plus, Settings } from 'lucide-react';\n\nconst tabs = [\n  { path: '/', icon: Home, label: '' },\n  { path: '/groups', icon: Users, label: '' },\n  { path: '/pairing', icon: Plus, label: '', isCenter: true },\n  { path: '/settings', icon: Settings, label: '' },\n];\n\nexport function BottomNav({ onPairing }: { onPairing: () => void }) {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 z-50 border-t backdrop-blur-xl\"\n      style={{ \n        background: 'var(--bg-secondary)', \n        borderColor: 'var(--z2m-border)',\n      }}>\n      <div className=\"mx-auto flex max-w-[430px] justify-around px-0 pb-7 pt-2\">\n        {tabs.map((tab) => {\n          const isActive = tab.path === '/' \n            ? location.pathname === '/' \n            : location.pathname.startsWith(tab.path);\n          const Icon = tab.icon;\n\n          return (\n            <button\n              key={tab.path}\n              onClick={() => {\n                if (tab.path === '/pairing') {\n                  onPairing();\n                } else {\n                  navigate(tab.path);\n                }\n              }}\n              className=\"flex flex-col items-center gap-1 px-4 py-1 transition-colors\"\n              style={{ \n                color: isActive ? 'var(--z2m-accent)' : 'var(--text-tertiary)',\n                minHeight: 'auto',\n                minWidth: 'auto',\n              }}\n            >\n              <div className=\"flex h-7 items-center justify-center\">\n                <Icon size={tab.isCenter ? 28 : 22} strokeWidth={tab.isCenter ? 2.5 : 2} />\n              </div>\n              <span className=\"text-[11px]\">{tab.label}</span>\n            </button>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n","// Device service for Z2M Lite\n// T029: Device control command builders\n\nimport type { DeviceControlCommand } from '../types/device';\nimport { websocketService } from './websocketService';\n\nclass DeviceService {\n  /**\n   * Control a device (on/off, brightness, color temp, etc.)\n   */\n  async controlDevice(friendlyName: string, command: DeviceControlCommand): Promise<void> {\n    // Z2M WebSocket API does NOT use zigbee2mqtt/ prefix\n    const topic = `${friendlyName}/set`;\n    console.log('[DeviceService] controlDevice:', topic, command);\n    await websocketService.send(topic, command);\n  }\n\n  /**\n   * Toggle device on/off\n   */\n  async toggleDevice(friendlyName: string): Promise<void> {\n    await this.controlDevice(friendlyName, { state: 'TOGGLE' });\n  }\n\n  /**\n   * Turn device on\n   */\n  async turnOn(friendlyName: string): Promise<void> {\n    await this.controlDevice(friendlyName, { state: 'ON' });\n  }\n\n  /**\n   * Turn device off\n   */\n  async turnOff(friendlyName: string): Promise<void> {\n    await this.controlDevice(friendlyName, { state: 'OFF' });\n  }\n\n  /**\n   * Set brightness (0-100%)\n   * Converts percentage to Z2M scale (0-254)\n   */\n  async setBrightness(friendlyName: string, percentage: number, transition: number = 0): Promise<void> {\n    const brightness = Math.round((percentage / 100) * 254);\n    await this.controlDevice(friendlyName, { brightness, transition });\n  }\n\n  /**\n   * Set color temperature (in Kelvin)\n   * Converts Kelvin to mired for Z2M\n   */\n  async setColorTemperature(friendlyName: string, kelvin: number, transition: number = 0): Promise<void> {\n    const mired = Math.round(1000000 / kelvin);\n    await this.controlDevice(friendlyName, { color_temp: mired, transition });\n  }\n\n  /**\n   * Rename a device\n   */\n  async renameDevice(currentName: string, newName: string): Promise<void> {\n    const topic = 'bridge/request/device/rename';\n    const payload = {\n      from: currentName,\n      to: newName,\n    };\n    await websocketService.send(topic, payload);\n  }\n\n  /**\n   * Remove a device from the network\n   */\n  async removeDevice(friendlyName: string): Promise<void> {\n    const topic = 'bridge/request/device/remove';\n    const payload = { id: friendlyName };\n    await websocketService.send(topic, payload);\n  }\n\n  /**\n   * Start pairing mode (permit join)\n   */\n  async startPairing(timeSeconds: number = 120): Promise<void> {\n    const topic = 'bridge/request/permit_join';\n    const payload = {\n      value: true,\n      time: timeSeconds,\n    };\n    await websocketService.send(topic, payload);\n  }\n\n  /**\n   * Stop pairing mode (disable permit join)\n   */\n  async stopPairing(): Promise<void> {\n    const topic = 'bridge/request/permit_join';\n    const payload = {\n      value: false,\n    };\n    await websocketService.send(topic, payload);\n  }\n\n  // T140: Control a group (on/off, brightness)\n  async controlGroup(\n    groupName: string,\n    command: { state?: 'ON' | 'OFF'; brightness?: number },\n  ): Promise<void> {\n    const topic = `${groupName}/set`;\n    await websocketService.send(topic, command);\n  }\n\n  // T143: Add a device to a group\n  async addGroupMember(groupName: string, deviceName: string): Promise<void> {\n    const topic = 'bridge/request/group/members/add';\n    const payload = { group: groupName, device: deviceName };\n    await websocketService.send(topic, payload);\n  }\n\n  // T143: Remove a device from a group\n  async removeGroupMember(groupName: string, deviceName: string): Promise<void> {\n    const topic = 'bridge/request/group/members/remove';\n    const payload = { group: groupName, device: deviceName };\n    await websocketService.send(topic, payload);\n  }\n\n  // T139: Create a group\n  async createGroup(name: string): Promise<void> {\n    const topic = 'bridge/request/group/add';\n    const payload = { friendly_name: name };\n    await websocketService.send(topic, payload);\n  }\n\n  // T139: Delete a group\n  async deleteGroup(groupName: string): Promise<void> {\n    const topic = 'bridge/request/group/remove';\n    const payload = { id: groupName };\n    await websocketService.send(topic, payload);\n  }\n\n  /**\n   * Request device list from Z2M\n   */\n  async requestDevices(): Promise<void> {\n    const topic = 'bridge/request/device/list';\n    await websocketService.send(topic, {});\n  }\n\n  /**\n   * Convert Z2M brightness (0-254) to percentage (0-100)\n   */\n  brightnessToPercentage(brightness: number): number {\n    return Math.round((brightness / 254) * 100);\n  }\n\n  /**\n   * Convert mired to Kelvin\n   */\n  miredToKelvin(mired: number): number {\n    return Math.round(1000000 / mired);\n  }\n\n  /**\n   * Convert Kelvin to mired\n   */\n  kelvinToMired(kelvin: number): number {\n    return Math.round(1000000 / kelvin);\n  }\n}\n\nexport const deviceService = new DeviceService();\n","// Pairing hook for Z2M Lite\n// T111: Countdown timer logic with setInterval\n// T112: Automatic pairing mode exit after 120 seconds\n// T114: Success notification when new device joins\n// T116: Auto-exit pairing mode when device successfully joins\n\nimport { useEffect, useRef, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'sonner';\nimport { usePreferencesStore } from '../stores/preferencesStore';\nimport { useDeviceStore } from '../stores/deviceStore';\nimport { deviceService } from '../services/deviceService';\n\nconst DEFAULT_PAIRING_DURATION = 120; // seconds\n\nexport function usePairing() {\n  const { t } = useTranslation();\n  const { pairingState, startPairing: startPairingState, stopPairing: stopPairingState, decrementPairingTimer } = usePreferencesStore();\n  const deviceStore = useDeviceStore();\n  const timerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const prevDeviceCountRef = useRef<number>(0);\n\n  // Track device count to detect new joins during pairing\n  const allDevices = deviceStore.getAllDevices();\n  const deviceCount = allDevices.length;\n\n  // Detect new device joins during active pairing\n  useEffect(() => {\n    if (pairingState.active && deviceCount > prevDeviceCountRef.current && prevDeviceCountRef.current > 0) {\n      // Find newly joined devices\n      const newDevices = allDevices.filter((d) => d.isNew);\n      if (newDevices.length > 0) {\n        const deviceName = newDevices[newDevices.length - 1]!.friendly_name;\n        toast.success(t('pairing.deviceJoined'), {\n          description: deviceName,\n        });\n\n        // Auto-exit pairing mode\n        void stopPairing();\n      }\n    }\n    prevDeviceCountRef.current = deviceCount;\n  }, [deviceCount, pairingState.active, allDevices, t]);\n\n  // Countdown timer interval\n  useEffect(() => {\n    if (pairingState.active) {\n      timerRef.current = setInterval(() => {\n        decrementPairingTimer();\n      }, 1000);\n    }\n\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    };\n  }, [pairingState.active, decrementPairingTimer]);\n\n  // Auto-stop when timer reaches zero (handled by store, but also stop Z2M)\n  useEffect(() => {\n    if (!pairingState.active && timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  }, [pairingState.active]);\n\n  const startPairing = useCallback(async (duration: number = DEFAULT_PAIRING_DURATION) => {\n    try {\n      await deviceService.startPairing(duration);\n      startPairingState(duration);\n    } catch (error) {\n      console.error('Failed to start pairing:', error);\n      toast.error(t('pairing.startFailed'));\n    }\n  }, [startPairingState, t]);\n\n  const stopPairing = useCallback(async () => {\n    try {\n      await deviceService.stopPairing();\n    } catch (error) {\n      console.error('Failed to stop pairing:', error);\n    } finally {\n      stopPairingState();\n    }\n  }, [stopPairingState]);\n\n  return {\n    isPairing: pairingState.active,\n    remainingSeconds: pairingState.remainingSeconds,\n    startPairing,\n    stopPairing,\n  };\n}\n","import { useEffect, useState, useCallback } from 'react';\nimport { Wifi } from 'lucide-react';\nimport { usePairing } from '../../hooks/usePairing';\n\ninterface PairingModalProps {\n  open: boolean;\n  onClose: () => void;\n}\n\nexport function PairingModal({ open, onClose }: PairingModalProps) {\n  const { startPairing, stopPairing, isPairing, remainingSeconds } = usePairing();\n  const [started, setStarted] = useState(false);\n\n  const handleStart = useCallback(() => {\n    startPairing(120);\n    setStarted(true);\n  }, [startPairing]);\n\n  const handleStop = useCallback(() => {\n    stopPairing();\n    setStarted(false);\n    onClose();\n  }, [stopPairing, onClose]);\n\n  useEffect(() => {\n    if (!open) {\n      setStarted(false);\n    }\n  }, [open]);\n\n  if (!open) return null;\n\n  const minutes = Math.floor((remainingSeconds ?? 0) / 60);\n  const seconds = (remainingSeconds ?? 0) % 60;\n\n  return (\n    <div\n      className=\"fixed inset-0 z-[200] flex items-end justify-center\"\n      style={{ background: 'rgba(0,0,0,0.6)', backdropFilter: 'blur(8px)' }}\n      onClick={handleStop}\n    >\n      <div\n        className=\"animate-slide-up w-full max-w-[430px] rounded-t-3xl px-5 pb-10 pt-6\"\n        style={{ background: 'var(--bg-secondary)' }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Handle */}\n        <div className=\"mx-auto mb-5 h-1 w-9 rounded-full\" style={{ background: 'var(--text-tertiary)' }} />\n\n        <h2 className=\"mb-2 text-center text-xl font-bold\"></h2>\n        <p className=\"mb-6 text-center text-sm\" style={{ color: 'var(--text-secondary)' }}>\n          \n        </p>\n\n        {/* Pulse animation */}\n        <div\n          className=\"mx-auto mb-6 flex h-[120px] w-[120px] items-center justify-center rounded-full border-[3px]\"\n          style={{\n            borderColor: 'var(--z2m-accent)',\n            animation: isPairing ? 'pulse-glow 2s ease-in-out infinite' : 'none',\n          }}\n        >\n          <Wifi size={48} style={{ color: 'var(--z2m-accent)' }} />\n        </div>\n\n        {started && isPairing ? (\n          <>\n            <div className=\"mb-2 text-center text-3xl font-bold tabular-nums\" style={{ color: 'var(--z2m-accent)' }}>\n              {minutes}:{String(seconds).padStart(2, '0')}\n            </div>\n            <p className=\"mb-6 text-center text-sm\" style={{ color: 'var(--text-secondary)' }}>\n              ...\n            </p>\n          </>\n        ) : null}\n\n        {!started ? (\n          <button\n            onClick={handleStart}\n            className=\"w-full rounded-xl py-4 text-base font-semibold transition-all active:scale-[0.98] active:opacity-90\"\n            style={{ background: 'var(--z2m-accent)', color: '#000' }}\n          >\n            \n          </button>\n        ) : (\n          <button\n            onClick={handleStop}\n            className=\"w-full rounded-xl py-4 text-base font-semibold transition-all active:scale-[0.98] active:opacity-90\"\n            style={{ background: 'var(--z2m-accent)', color: '#000' }}\n          >\n            \n          </button>\n        )}\n\n        <button\n          onClick={handleStop}\n          className=\"mt-2 w-full rounded-xl border py-4 text-base font-medium transition-all active:scale-[0.98]\"\n          style={{ background: 'var(--bg-card)', borderColor: 'var(--z2m-border)', color: 'var(--text-primary)' }}\n        >\n          \n        </button>\n      </div>\n    </div>\n  );\n}\n","// ConnectionStatus - kept for backward compatibility\nexport function ConnectionStatus() {\n  return null;\n}\n","import { useState } from 'react';\nimport { Outlet } from 'react-router-dom';\nimport { BottomNav } from './BottomNav';\nimport { PairingModal } from '../pairing/PairingModal';\nimport { ConnectionStatus } from './ConnectionStatus';\n\nexport function MainLayout() {\n  const [pairingOpen, setPairingOpen] = useState(false);\n\n  return (\n    <div className=\"relative mx-auto min-h-screen w-full max-w-[430px]\" style={{ background: 'var(--bg-primary)' }}>\n      <ConnectionStatus />\n      <main className=\"pb-24\">\n        <Outlet />\n      </main>\n      <BottomNav onPairing={() => setPairingOpen(true)} />\n      <PairingModal open={pairingOpen} onClose={() => setPairingOpen(false)} />\n    </div>\n  );\n}\n","import { memo, useCallback, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Lightbulb, Power, Thermometer, Eye, DoorOpen, Blinds,\n  Radio, HelpCircle, Plug\n} from 'lucide-react';\nimport type { Device } from '../../types/device';\n\ninterface DeviceGridCardProps {\n  device: Device;\n  onToggle: (checked: boolean) => void;\n  onBrightnessChange: (percent: number) => void;\n  onEndpointToggle?: (endpoint: string, property: string, checked: boolean) => void;\n}\n\nfunction getIcon(device: Device) {\n  const type = device.type;\n  const caps = device.capabilities;\n  const exposes = device.definition?.exposes ?? [];\n  const hasCover = caps?.['cover'] || exposes.some((e) => e.type === 'cover');\n  const hasTemp = exposes.some((e) => e.name === 'temperature');\n  const hasOccupancy = exposes.some((e) => e.name === 'occupancy');\n  const hasContact = exposes.some((e) => e.name === 'contact');\n\n  if (type === 'light' || caps?.brightness || caps?.colorTemperature) return Lightbulb;\n  if (hasCover) return Blinds;\n  if (hasOccupancy) return Eye;\n  if (hasContact) return DoorOpen;\n  if (hasTemp) return Thermometer;\n  if (type === 'switch') return Power;\n  if (type === 'router') return Radio;\n  if (caps?.onOff) return Plug;\n  return HelpCircle;\n}\n\nfunction getStateText(device: Device, isOn: boolean, isOnline: boolean): string {\n  if (!isOnline) return '';\n\n  const state = device.state;\n  const caps = device.capabilities;\n  const exposes = device.definition?.exposes ?? [];\n  const hasTemp = exposes.some((e) => e.name === 'temperature');\n  const hasContact = exposes.some((e) => e.name === 'contact');\n  const hasOccupancy = exposes.some((e) => e.name === 'occupancy');\n  const hasCover = caps?.['cover'] || exposes.some((e) => e.type === 'cover');\n\n  if (hasTemp && state?.temperature != null) {\n    const temp = typeof state.temperature === 'number' ? state.temperature.toFixed(1) : state.temperature;\n    const hum = state?.humidity != null ? ` / ${typeof state.humidity === 'number' ? Math.round(Number(state.humidity)) : state.humidity}%` : '';\n    return `${temp}C${hum}`;\n  }\n  if (hasContact) return state?.contact ? ' ' : '';\n  if (hasOccupancy) return state?.occupancy ? '' : '';\n  if (hasCover) {\n    const pos = state?.['position'];\n    if (pos != null) return ` ${pos}%`;\n    return isOn ? '' : '';\n  }\n  if (caps?.brightness && isOn && state?.brightness != null) {\n    return ` ${Math.round(Number(state.brightness) / 2.54)}%`;\n  }\n  // Multi-endpoint: show per-endpoint state\n  if (caps?.endpoints && caps.endpoints.length > 1) {\n    const parts = caps.endpoints.map((ep) => {\n      const epOn = state?.[ep.property] === 'ON';\n      return `${ep.endpoint.toUpperCase()}:${epOn ? '' : ''}`;\n    });\n    return parts.join(' ');\n  }\n  if (caps?.onOff) return isOn ? '' : '';\n  return '';\n}\n\nexport const DeviceGridCard = memo(function DeviceGridCard({\n  device, onToggle, onBrightnessChange, onEndpointToggle,\n}: DeviceGridCardProps) {\n  const navigate = useNavigate();\n\n  const isOnline = device.lastSeen\n    ? Date.now() - device.lastSeen < 5 * 60 * 1000\n    : device.interview_completed !== false && device.type !== 'coordinator';\n  const isOn = device.state?.state === 'ON';\n  const hasOnOff = device.capabilities?.onOff ?? false;\n  const hasBrightness = device.capabilities?.brightness ?? false;\n  const hasBattery = (device.definition?.exposes ?? []).some((e) => e.name === 'battery');\n  const hasCover = device.capabilities?.['cover'] ?? false;\n  const endpoints = device.capabilities?.endpoints;\n  const isMultiEndpoint = endpoints && endpoints.length > 1;\n  const battery = device.state?.battery as number | undefined;\n  const brightness = device.state?.brightness != null ? Math.round(Number(device.state.brightness) / 2.54) : 0;\n\n  const Icon = getIcon(device);\n  const stateText = getStateText(device, isOn, isOnline);\n  const isActive = isOn && isOnline;\n\n  // Tap = toggle, Long press = go to detail\n  const longPressTimer = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const didLongPress = useRef(false);\n\n  const handleTouchStart = useCallback(() => {\n    didLongPress.current = false;\n    longPressTimer.current = setTimeout(() => {\n      didLongPress.current = true;\n      navigator.vibrate?.(30);\n      navigate(`/device/${encodeURIComponent(device.friendly_name)}`);\n    }, 800);\n  }, [navigate, device.friendly_name]);\n\n  const handleTouchEnd = useCallback(() => {\n    if (longPressTimer.current) {\n      clearTimeout(longPressTimer.current);\n      longPressTimer.current = null;\n    }\n  }, []);\n\n  const handleCardClick = useCallback(() => {\n    if (didLongPress.current) return;\n    // Multi-endpoint: don't toggle on card tap (use per-endpoint toggles instead)\n    if (isMultiEndpoint) return;\n    if (hasOnOff && isOnline) {\n      onToggle(!isOn);\n    } else {\n      navigate(`/device/${encodeURIComponent(device.friendly_name)}`);\n    }\n  }, [isMultiEndpoint, hasOnOff, isOnline, isOn, onToggle, navigate, device.friendly_name]);\n\n  const handleSliderInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      e.stopPropagation();\n      onBrightnessChange(Number(e.target.value));\n    },\n    [onBrightnessChange],\n  );\n\n  // Status square color (matching prototype's small square indicator)\n  const statusColor = !isOnline ? 'var(--z2m-red)' : 'var(--z2m-green)';\n\n  return (\n    <div\n      onClick={handleCardClick}\n      onTouchStart={handleTouchStart}\n      onTouchEnd={handleTouchEnd}\n      onTouchCancel={handleTouchEnd}\n      onContextMenu={(e) => e.preventDefault()}\n      className=\"relative cursor-pointer select-none overflow-hidden rounded-2xl border transition-all active:scale-[0.97]\"\n      style={{\n        background: isActive ? 'var(--z2m-accent-soft)' : 'var(--bg-card)',\n        borderColor: isActive ? 'var(--z2m-accent-border)' : 'var(--z2m-border)',\n        opacity: isOnline ? 1 : 0.5,\n        padding: '14px 14px 12px',\n      }}\n    >\n      {/* Row 1: Icon + Status square */}\n      <div className=\"mb-3 flex items-start justify-between\">\n        <Icon\n          size={26}\n          strokeWidth={1.8}\n          style={{ color: isActive ? 'var(--z2m-accent)' : 'var(--text-tertiary)' }}\n        />\n        <span\n          className=\"mt-1 block rounded-sm\"\n          style={{\n            width: 8, height: 8,\n            background: statusColor,\n            boxShadow: isOnline ? `0 0 6px ${statusColor}` : 'none',\n          }}\n        />\n      </div>\n\n      {/* Row 2: Name */}\n      <div className=\"mb-0.5 truncate text-[14px] font-semibold leading-tight\">\n        {device.friendly_name}\n      </div>\n\n      {/* Row 3: State */}\n      <div\n        className=\"text-[12px] leading-tight\"\n        style={{\n          color: !isOnline\n            ? 'var(--z2m-red)'\n            : isActive\n              ? 'var(--z2m-accent)'\n              : 'var(--text-tertiary)',\n        }}\n      >\n        {stateText}\n      </div>\n\n      {/* Brightness slider for lights ON */}\n      {hasBrightness && isOn && isOnline && (\n        <div className=\"relative mt-3\">\n          <div\n            className=\"h-[5px] w-full overflow-hidden rounded-full\"\n            style={{ background: 'var(--bg-elevated)' }}\n          >\n            <div\n              className=\"h-full rounded-full\"\n              style={{\n                width: `${brightness}%`,\n                background: 'linear-gradient(90deg, var(--z2m-accent), #FFCB6B)',\n              }}\n            />\n          </div>\n          <input\n            type=\"range\" min={1} max={100} value={brightness}\n            onChange={handleSliderInput}\n            onClick={(e) => e.stopPropagation()}\n            className=\"absolute left-0 top-[-4px] h-4 w-full cursor-pointer opacity-0\"\n          />\n        </div>\n      )}\n\n      {/* Multi-endpoint toggles (multi-gang switches) */}\n      {isMultiEndpoint && isOnline && (\n        <div className=\"mt-3 flex gap-2\">\n          {endpoints.map((ep) => {\n            const epState = device.state?.[ep.property] === 'ON';\n            return (\n              <div key={ep.endpoint} className=\"flex flex-1 items-center justify-between rounded-lg px-2 py-1.5\"\n                style={{ background: 'var(--bg-elevated)' }}\n                onClick={(e) => { e.stopPropagation(); onEndpointToggle?.(ep.endpoint, ep.property, !epState); }}>\n                <span className=\"text-[11px]\" style={{ color: 'var(--text-tertiary)' }}>\n                  {ep.endpoint.toUpperCase()}\n                </span>\n                <div className=\"relative h-[18px] w-[32px] cursor-pointer rounded-full transition-colors duration-300\"\n                  style={{ background: epState ? 'var(--z2m-accent)' : 'rgba(255,255,255,0.1)' }}>\n                  <div className=\"absolute top-[2px] h-[14px] w-[14px] rounded-full bg-white transition-transform duration-300\"\n                    style={{ transform: epState ? 'translateX(16px)' : 'translateX(2px)', boxShadow: '0 1px 2px rgba(0,0,0,0.3)' }} />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Single toggle for on/off devices (switches, plugs  not lights with brightness) */}\n      {hasOnOff && !hasBrightness && !hasCover && !isMultiEndpoint && isOnline && (\n        <div className=\"mt-3 flex justify-end\">\n          <div\n            className=\"relative h-[24px] w-[42px] cursor-pointer rounded-full transition-colors duration-300\"\n            style={{ background: isOn ? 'var(--z2m-accent)' : 'var(--bg-elevated)' }}\n            onClick={(e) => { e.stopPropagation(); onToggle(!isOn); }}\n          >\n            <div\n              className=\"absolute top-[2px] h-[20px] w-[20px] rounded-full bg-white transition-transform duration-300\"\n              style={{\n                transform: isOn ? 'translateX(20px)' : 'translateX(2px)',\n                boxShadow: '0 1px 3px rgba(0,0,0,0.3)',\n              }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Battery bar */}\n      {hasBattery && battery != null && (\n        <div className=\"mt-2.5\">\n          <div className=\"mb-1 text-[11px]\" style={{ color: 'var(--text-tertiary)' }}></div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"h-[4px] flex-1 overflow-hidden rounded-full\" style={{ background: 'var(--bg-elevated)' }}>\n              <div\n                className=\"h-full rounded-full\"\n                style={{\n                  width: `${battery}%`,\n                  background: battery > 20 ? 'var(--z2m-green)' : 'var(--z2m-red)',\n                }}\n              />\n            </div>\n            <span className=\"text-[11px] tabular-nums\" style={{ color: 'var(--text-secondary)' }}>\n              {Math.round(battery)}%\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Cover position */}\n      {hasCover && isOnline && (\n        <div className=\"mt-2.5\">\n          <div\n            className=\"h-[4px] w-full overflow-hidden rounded-full\"\n            style={{ background: 'var(--bg-elevated)' }}\n          >\n            <div\n              className=\"h-full rounded-full\"\n              style={{\n                width: `${device.state?.['position'] ?? 0}%`,\n                background: 'var(--z2m-blue)',\n              }}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n});\n","// Devices hook for Z2M Lite\n// T037: Device list selectors and control functions\n// T070: Error handling and rollback logic\n\nimport { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'sonner';\nimport { useDeviceStore } from '../stores/deviceStore';\nimport { deviceService } from '../services/deviceService';\nimport type { DeviceControlCommand, DeviceState } from '../types/device';\n\nexport function useDevices() {\n  const { t } = useTranslation();\n  const deviceStore = useDeviceStore();\n\n  const controlDevice = useCallback(\n    async (friendlyName: string, command: DeviceControlCommand) => {\n      // Get current state for rollback\n      const device = deviceStore.getDevice(friendlyName);\n      if (!device) {\n        toast.error('Device not found');\n        throw new Error('Device not found');\n      }\n\n      const previousState: Partial<DeviceState> = {\n        state: device.state?.state,\n        brightness: device.state?.brightness,\n        color_temp: device.state?.color_temp,\n      };\n\n      // Optimistic update (skip TOGGLE since it's not a final state)\n      if (command.state && command.state !== 'TOGGLE') {\n        deviceStore.updateDeviceState(friendlyName, { state: command.state });\n      }\n      if (command.brightness !== undefined) {\n        deviceStore.updateDeviceState(friendlyName, { brightness: command.brightness });\n      }\n      if (command.color_temp !== undefined) {\n        deviceStore.updateDeviceState(friendlyName, { color_temp: command.color_temp });\n      }\n\n      try {\n        await deviceService.controlDevice(friendlyName, command);\n      } catch (error) {\n        console.error('Failed to control device:', error);\n\n        // Rollback optimistic update\n        deviceStore.updateDeviceState(friendlyName, previousState);\n\n        // T166: User-friendly error messages\n        const errorMsg = error instanceof Error ? error.message : '';\n        let description: string;\n        if (errorMsg.includes('not connected')) {\n          description = t('connection.connectionRefused');\n        } else if (errorMsg.includes('timeout')) {\n          description = t('connection.timeout');\n        } else {\n          description = t('devices.controlFailed');\n        }\n        toast.error(t('devices.controlFailed'), { description });\n\n        throw error;\n      }\n    },\n    [deviceStore]\n  );\n\n  const toggleDevice = useCallback(\n    async (friendlyName: string) => {\n      await controlDevice(friendlyName, { state: 'TOGGLE' });\n    },\n    [controlDevice]\n  );\n\n  // T125: Optimistic UI update for brightness via controlDevice\n  const setBrightness = useCallback(\n    async (friendlyName: string, percentage: number) => {\n      const brightness = Math.round((percentage / 100) * 254);\n      await controlDevice(friendlyName, { brightness });\n    },\n    [controlDevice],\n  );\n\n  // T125: Optimistic UI update for color temperature via controlDevice\n  const setColorTemperature = useCallback(\n    async (friendlyName: string, kelvin: number) => {\n      const mired = Math.round(1000000 / kelvin);\n      await controlDevice(friendlyName, { color_temp: mired });\n    },\n    [controlDevice],\n  );\n\n  const renameDevice = useCallback(\n    async (currentName: string, newName: string) => {\n      // Optimistic update\n      deviceStore.renameDevice(currentName, newName);\n\n      try {\n        await deviceService.renameDevice(currentName, newName);\n        toast.success(t('rename.success'));\n      } catch (error) {\n        console.error('Failed to rename device:', error);\n\n        // Rollback optimistic update\n        deviceStore.renameDevice(newName, currentName);\n\n        toast.error(t('rename.failed'), {\n          description: error instanceof Error ? error.message : undefined,\n        });\n        throw error;\n      }\n    },\n    [deviceStore, t]\n  );\n\n  return {\n    devices: deviceStore.getAllDevices(),\n    devicesById: deviceStore.byId,\n    getDevice: deviceStore.getDevice,\n    getDevicesByType: deviceStore.getDevicesByType,\n    getOnlineDevices: deviceStore.getOnlineDevices,\n    getOfflineDevices: deviceStore.getOfflineDevices,\n    controlDevice,\n    toggleDevice,\n    setBrightness,\n    setColorTemperature,\n    renameDevice,\n  };\n}\n","import { useMemo, useState } from 'react';\nimport { Plus, Settings } from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDeviceStore } from '../stores/deviceStore';\nimport { useRoomStore } from '../stores/roomStore';\nimport { DeviceGridCard } from '../components/devices/DeviceGridCard';\nimport { PairingModal } from '../components/pairing/PairingModal';\nimport { useDevices } from '../hooks/useDevices';\nimport type { Device } from '../types/device';\n\nexport function Home() {\n  const navigate = useNavigate();\n  const [pairingOpen, setPairingOpen] = useState(false);\n  const allIds = useDeviceStore((s) => s.allIds);\n  const byId = useDeviceStore((s) => s.byId);\n  const rooms = useRoomStore((s) => s.rooms);\n  const deviceRoomAssignments = useRoomStore((s) => s.deviceRoomAssignments);\n  const { controlDevice } = useDevices();\n  const [activeRoom, setActiveRoom] = useState<string | null>(null);\n\n  const devices = useMemo(() => {\n    return allIds\n      .map((id) => byId[id])\n      .filter((d): d is Device => !!d && d.type !== 'coordinator');\n  }, [allIds, byId]);\n\n  const filteredDevices = useMemo(() => {\n    if (!activeRoom) return devices;\n    return devices.filter((d) => deviceRoomAssignments[d.friendly_name] === activeRoom);\n  }, [devices, activeRoom, deviceRoomAssignments]);\n\n  const onlineCount = devices.filter((d) => {\n    if (d.lastSeen) return Date.now() - d.lastSeen < 5 * 60 * 1000;\n    return d.interview_completed !== false;\n  }).length;\n  const offlineCount = devices.length - onlineCount;\n\n  return (\n    <div>\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-5 pb-4 pt-2\">\n        <h1 className=\"text-[28px] font-bold tracking-tight\"></h1>\n        <div className=\"flex gap-3\">\n          <button\n            onClick={() => setPairingOpen(true)}\n            className=\"flex h-10 w-10 items-center justify-center rounded-full border transition-all active:scale-[0.92]\"\n            style={{ background: 'var(--bg-card)', borderColor: 'var(--z2m-border)' }}\n          >\n            <Plus size={18} />\n          </button>\n          <button\n            onClick={() => navigate('/settings')}\n            className=\"flex h-10 w-10 items-center justify-center rounded-full border transition-all active:scale-[0.92]\"\n            style={{ background: 'var(--bg-card)', borderColor: 'var(--z2m-border)' }}\n          >\n            <Settings size={18} />\n          </button>\n        </div>\n      </div>\n\n      {/* Room tabs */}\n      <div className=\"hide-scrollbar flex gap-2 overflow-x-auto px-5 pb-4\">\n        <button\n          onClick={() => setActiveRoom(null)}\n          className=\"flex-shrink-0 rounded-full border px-[18px] py-2 text-sm font-medium transition-all active:scale-95\"\n          style={{\n            background: activeRoom === null ? 'var(--z2m-accent)' : 'var(--bg-card)',\n            color: activeRoom === null ? '#000' : 'var(--text-secondary)',\n            borderColor: activeRoom === null ? 'var(--z2m-accent)' : 'var(--z2m-border)',\n            fontWeight: activeRoom === null ? 600 : 500,\n          }}\n        >\n          \n        </button>\n        {rooms.map((room) => (\n          <button\n            key={room.id}\n            onClick={() => setActiveRoom(room.id)}\n            className=\"flex-shrink-0 whitespace-nowrap rounded-full border px-[18px] py-2 text-sm font-medium transition-all active:scale-95\"\n            style={{\n              background: activeRoom === room.id ? 'var(--z2m-accent)' : 'var(--bg-card)',\n              color: activeRoom === room.id ? '#000' : 'var(--text-secondary)',\n              borderColor: activeRoom === room.id ? 'var(--z2m-accent)' : 'var(--z2m-border)',\n              fontWeight: activeRoom === room.id ? 600 : 500,\n            }}\n          >\n            {room.name}\n          </button>\n        ))}\n      </div>\n\n      {/* Stats */}\n      <div className=\"flex gap-3 px-5 pb-5\">\n        <div className=\"flex items-center gap-1.5 text-[13px]\" style={{ color: 'var(--text-tertiary)' }}>\n          <span className=\"h-2 w-2 rounded-full\" style={{ background: 'var(--z2m-green)', boxShadow: '0 0 6px var(--z2m-green)' }} />\n          {onlineCount} \n        </div>\n        <div className=\"flex items-center gap-1.5 text-[13px]\" style={{ color: 'var(--text-tertiary)' }}>\n          <span className=\"h-2 w-2 rounded-full\" style={{ background: 'var(--z2m-red)' }} />\n          {offlineCount} \n        </div>\n      </div>\n\n      {/* Device Grid */}\n      <div className=\"grid grid-cols-2 gap-3 px-5 pb-6\">\n        {filteredDevices.map((device) => (\n          <DeviceGridCard\n            key={device.friendly_name}\n            device={device}\n            onToggle={(checked) => {\n              controlDevice(device.friendly_name, { state: checked ? 'ON' : 'OFF' });\n            }}\n            onBrightnessChange={(val) => {\n              controlDevice(device.friendly_name, { brightness: Math.round(val * 2.54) });\n            }}\n            onEndpointToggle={(_endpoint, property, checked) => {\n              controlDevice(device.friendly_name, { [property]: checked ? 'ON' : 'OFF' });\n            }}\n          />\n        ))}\n      </div>\n\n      {filteredDevices.length === 0 && (\n        <div className=\"py-12 text-center text-sm\" style={{ color: 'var(--text-tertiary)' }}>\n          {activeRoom ? '' : ''}\n        </div>\n      )}\n\n      <PairingModal open={pairingOpen} onClose={() => setPairingOpen(false)} />\n    </div>\n  );\n}\n","import { useEffect, lazy, Suspense } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport { Toaster } from './components/ui/sonner';\nimport { ErrorBoundary } from './components/ErrorBoundary';\nimport { useWebSocket } from './hooks/useWebSocket';\nimport { useRoomStore } from './stores/roomStore';\nimport { usePreferencesStore } from './stores/preferencesStore';\nimport { MainLayout } from './components/layout/MainLayout';\nimport { Home } from './pages/Home';\n\nconst DeviceDetail = lazy(() =>\n  import('./pages/DeviceDetail').then((m) => ({ default: m.DeviceDetail }))\n);\nconst GroupManagement = lazy(() =>\n  import('./pages/GroupManagement').then((m) => ({ default: m.GroupManagement }))\n);\nconst Settings = lazy(() =>\n  import('./pages/Settings').then((m) => ({ default: m.Settings }))\n);\nconst RoomManagement = lazy(() =>\n  import('./pages/RoomManagement').then((m) => ({ default: m.RoomManagement }))\n);\n\nfunction PageLoader() {\n  return (\n    <div className=\"flex items-center justify-center py-20\">\n      <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent\"\n        style={{ borderColor: 'var(--z2m-accent)', borderTopColor: 'transparent' }} />\n    </div>\n  );\n}\n\nfunction App() {\n  useWebSocket();\n\n  const loadRooms = useRoomStore((state) => state.loadRooms);\n  const loadPreferences = usePreferencesStore((state) => state.loadPreferences);\n\n  useEffect(() => {\n    loadRooms();\n    loadPreferences();\n    // Force dark mode\n    document.documentElement.classList.add('dark');\n  }, [loadRooms, loadPreferences]);\n\n  return (\n    <ErrorBoundary>\n      <BrowserRouter>\n        <Routes>\n          <Route path=\"/\" element={<MainLayout />}>\n            <Route index element={<Home />} />\n            <Route\n              path=\"device/:deviceId\"\n              element={\n                <Suspense fallback={<PageLoader />}>\n                  <DeviceDetail />\n                </Suspense>\n              }\n            />\n            <Route\n              path=\"groups\"\n              element={\n                <Suspense fallback={<PageLoader />}>\n                  <GroupManagement />\n                </Suspense>\n              }\n            />\n            <Route\n              path=\"settings\"\n              element={\n                <Suspense fallback={<PageLoader />}>\n                  <Settings />\n                </Suspense>\n              }\n            />\n            <Route\n              path=\"rooms\"\n              element={\n                <Suspense fallback={<PageLoader />}>\n                  <RoomManagement />\n                </Suspense>\n              }\n            />\n            <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n          </Route>\n        </Routes>\n        <Toaster />\n      </BrowserRouter>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n\nimport zhTW from '../locales/zh-TW.json';\nimport en from '../locales/en.json';\n\nexport const defaultLanguage = 'zh-TW';\nexport const supportedLanguages = ['zh-TW', 'en'] as const;\n\nexport type SupportedLanguage = (typeof supportedLanguages)[number];\n\nvoid i18n.use(initReactI18next).init({\n  resources: {\n    'zh-TW': { translation: zhTW },\n    en: { translation: en },\n  },\n  lng: defaultLanguage,\n  fallbackLng: defaultLanguage,\n  interpolation: {\n    escapeValue: false,\n  },\n  react: {\n    useSuspense: false,\n  },\n});\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\nimport './i18n/config';\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error('Failed to find root element');\n}\n\nReactDOM.createRoot(rootElement).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"file":"assets/index-Cd7pvFwH.js"}