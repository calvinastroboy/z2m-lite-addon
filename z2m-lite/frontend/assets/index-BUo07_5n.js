const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DeviceDetail-Cim7FR8h.js","./ui-BNQquHvV.js","./vendor-DN6e53jq.js","./icons-Cg0FTVUT.js","./i18n-BzK7rx8x.js","./GroupManagement-BYb6U7dP.js","./Settings-DyB1fuZ2.js","./RoomManagement-DdX7Iog7.js"])))=>i.map(i=>d[i]);
import{j as c}from"./ui-BNQquHvV.js";import{a as At,R as m,b as Ot,r as v,g as Mt,u as Pt,c as We,O as zt,B as $t,d as Bt,e as se,N as Ft}from"./vendor-DN6e53jq.js";import{L as Lt,X as Gt,A as Wt,I as Ht,C as Ut,H as Yt,U as Vt,P as dt,S as ut,W as Kt,a as qt,B as Qt,E as Xt,D as Zt,T as Jt,b as en,R as tn,c as nn,d as on}from"./icons-Cg0FTVUT.js";import{u as mt,i as sn,a as rn}from"./i18n-BzK7rx8x.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();var Fe={},Je=At;Fe.createRoot=Je.createRoot,Fe.hydrateRoot=Je.hydrateRoot;const an="modulepreload",cn=function(o,t){return new URL(o,t).href},et={},Oe=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){const l=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),i=d?.nonce||d?.getAttribute("nonce");s=Promise.allSettled(e.map(u=>{if(u=cn(u,n),u in et)return;et[u]=!0;const g=u.endsWith(".css"),r=g?'[rel="stylesheet"]':"";if(!!n)for(let f=l.length-1;f>=0;f--){const S=l[f];if(S.href===u&&(!g||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${r}`))return;const p=document.createElement("link");if(p.rel=g?"stylesheet":an,g||(p.as="script"),p.crossOrigin="",p.href=u,i&&p.setAttribute("nonce",i),document.head.appendChild(p),g)return new Promise((f,S)=>{p.addEventListener("load",f),p.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return s.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})};function ln(o){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.appendChild(e),e.styleSheet?e.styleSheet.cssText=o:e.appendChild(document.createTextNode(o))}const dn=o=>{switch(o){case"success":return pn;case"info":return gn;case"warning":return fn;case"error":return hn;default:return null}},un=Array(12).fill(0),mn=({visible:o,className:t})=>m.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":o},m.createElement("div",{className:"sonner-spinner"},un.map((e,n)=>m.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),pn=m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},m.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),fn=m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},m.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gn=m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},m.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hn=m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},m.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),vn=m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},m.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bn=()=>{const[o,t]=m.useState(document.hidden);return m.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),o};let Le=1;class yn{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;const{message:n,...s}=t,a=typeof t?.id=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Le++,l=this.toasts.find(i=>i.id===a),d=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(i=>i.id===a?(this.publish({...i,...t,id:a,title:n}),{...i,...t,id:a,dismissible:d,title:n}):i):this.addToast({title:n,...s,dismissible:d,id:a}),a},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:t,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let a=n!==void 0,l;const d=s.then(async u=>{if(l=["resolve",u],m.isValidElement(u))a=!1,this.create({id:n,type:"default",message:u});else if(wn(u)&&!u.ok){a=!1;const r=typeof e.error=="function"?await e.error(`HTTP error! status: ${u.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${u.status}`):e.description,f=typeof r=="object"&&!m.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:h,...f})}else if(u instanceof Error){a=!1;const r=typeof e.error=="function"?await e.error(u):e.error,h=typeof e.description=="function"?await e.description(u):e.description,f=typeof r=="object"&&!m.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:h,...f})}else if(e.success!==void 0){a=!1;const r=typeof e.success=="function"?await e.success(u):e.success,h=typeof e.description=="function"?await e.description(u):e.description,f=typeof r=="object"&&!m.isValidElement(r)?r:{message:r};this.create({id:n,type:"success",description:h,...f})}}).catch(async u=>{if(l=["reject",u],e.error!==void 0){a=!1;const g=typeof e.error=="function"?await e.error(u):e.error,r=typeof e.description=="function"?await e.description(u):e.description,p=typeof g=="object"&&!m.isValidElement(g)?g:{message:g};this.create({id:n,type:"error",description:r,...p})}}).finally(()=>{a&&(this.dismiss(n),n=void 0),e.finally==null||e.finally.call(e)}),i=()=>new Promise((u,g)=>d.then(()=>l[0]==="reject"?g(l[1]):u(l[1])).catch(g));return typeof n!="string"&&typeof n!="number"?{unwrap:i}:Object.assign(n,{unwrap:i})},this.custom=(t,e)=>{const n=e?.id||Le++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const I=new yn,xn=(o,t)=>{const e=t?.id||Le++;return I.addToast({title:o,...t,id:e}),e},wn=o=>o&&typeof o=="object"&&"ok"in o&&typeof o.ok=="boolean"&&"status"in o&&typeof o.status=="number",Sn=xn,Dn=()=>I.toasts,En=()=>I.getActiveToasts(),fe=Object.assign(Sn,{success:I.success,info:I.info,warning:I.warning,error:I.error,custom:I.custom,message:I.message,promise:I.promise,dismiss:I.dismiss,loading:I.loading},{getHistory:Dn,getToasts:En});ln("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Te(o){return o.label!==void 0}const Rn=3,Cn="24px",Nn="16px",tt=4e3,Tn=356,_n=14,jn=45,kn=200;function U(...o){return o.filter(Boolean).join(" ")}function In(o){const[t,e]=o.split("-"),n=[];return t&&n.push(t),e&&n.push(e),n}const An=o=>{var t,e,n,s,a,l,d,i,u;const{invert:g,toast:r,unstyled:h,interacting:p,setHeights:f,visibleToasts:S,heights:M,index:x,toasts:Y,expanded:F,removeToast:q,defaultRichColors:he,closeButton:P,style:Z,cancelButtonStyle:V,actionButtonStyle:ae,className:R="",descriptionClassName:J="",duration:ee,position:H,gap:we,expandByDefault:ve,classNames:w,icons:_,closeButtonAriaLabel:Q="Close toast"}=o,[te,L]=m.useState(null),[ne,Se]=m.useState(null),[y,C]=m.useState(!1),[E,z]=m.useState(!1),[ie,D]=m.useState(!1),[ce,De]=m.useState(!1),[Ee,le]=m.useState(!1),[wt,Pe]=m.useState(0),[St,He]=m.useState(0),be=m.useRef(r.duration||ee||tt),Ue=m.useRef(null),K=m.useRef(null),Dt=x===0,Et=x+1<=S,A=r.type,de=r.dismissible!==!1,Rt=r.className||"",Ct=r.descriptionClassName||"",Re=m.useMemo(()=>M.findIndex(b=>b.toastId===r.id)||0,[M,r.id]),Nt=m.useMemo(()=>{var b;return(b=r.closeButton)!=null?b:P},[r.closeButton,P]),Ye=m.useMemo(()=>r.duration||ee||tt,[r.duration,ee]),ze=m.useRef(0),ue=m.useRef(0),Ve=m.useRef(0),me=m.useRef(null),[Tt,_t]=H.split("-"),Ke=m.useMemo(()=>M.reduce((b,T,k)=>k>=Re?b:b+T.height,0),[M,Re]),qe=bn(),jt=r.invert||g,$e=A==="loading";ue.current=m.useMemo(()=>Re*we+Ke,[Re,Ke]),m.useEffect(()=>{be.current=Ye},[Ye]),m.useEffect(()=>{C(!0)},[]),m.useEffect(()=>{const b=K.current;if(b){const T=b.getBoundingClientRect().height;return He(T),f(k=>[{toastId:r.id,height:T,position:r.position},...k]),()=>f(k=>k.filter(O=>O.toastId!==r.id))}},[f,r.id]),m.useLayoutEffect(()=>{if(!y)return;const b=K.current,T=b.style.height;b.style.height="auto";const k=b.getBoundingClientRect().height;b.style.height=T,He(k),f(O=>O.find(j=>j.toastId===r.id)?O.map(j=>j.toastId===r.id?{...j,height:k}:j):[{toastId:r.id,height:k,position:r.position},...O])},[y,r.title,r.description,f,r.id,r.jsx,r.action,r.cancel]);const X=m.useCallback(()=>{z(!0),Pe(ue.current),f(b=>b.filter(T=>T.toastId!==r.id)),setTimeout(()=>{q(r)},kn)},[r,q,f,ue]);m.useEffect(()=>{if(r.promise&&A==="loading"||r.duration===1/0||r.type==="loading")return;let b;return F||p||qe?(()=>{if(Ve.current<ze.current){const O=new Date().getTime()-ze.current;be.current=be.current-O}Ve.current=new Date().getTime()})():(()=>{be.current!==1/0&&(ze.current=new Date().getTime(),b=setTimeout(()=>{r.onAutoClose==null||r.onAutoClose.call(r,r),X()},be.current))})(),()=>clearTimeout(b)},[F,p,r,A,qe,X]),m.useEffect(()=>{r.delete&&(X(),r.onDismiss==null||r.onDismiss.call(r,r))},[X,r.delete]);function kt(){var b;if(_?.loading){var T;return m.createElement("div",{className:U(w?.loader,r==null||(T=r.classNames)==null?void 0:T.loader,"sonner-loader"),"data-visible":A==="loading"},_.loading)}return m.createElement(mn,{className:U(w?.loader,r==null||(b=r.classNames)==null?void 0:b.loader),visible:A==="loading"})}const It=r.icon||_?.[A]||dn(A);var Qe,Xe;return m.createElement("li",{tabIndex:0,ref:K,className:U(R,Rt,w?.toast,r==null||(t=r.classNames)==null?void 0:t.toast,w?.default,w?.[A],r==null||(e=r.classNames)==null?void 0:e[A]),"data-sonner-toast":"","data-rich-colors":(Qe=r.richColors)!=null?Qe:he,"data-styled":!(r.jsx||r.unstyled||h),"data-mounted":y,"data-promise":!!r.promise,"data-swiped":Ee,"data-removed":E,"data-visible":Et,"data-y-position":Tt,"data-x-position":_t,"data-index":x,"data-front":Dt,"data-swiping":ie,"data-dismissible":de,"data-type":A,"data-invert":jt,"data-swipe-out":ce,"data-swipe-direction":ne,"data-expanded":!!(F||ve&&y),"data-testid":r.testId,style:{"--index":x,"--toasts-before":x,"--z-index":Y.length-x,"--offset":`${E?wt:ue.current}px`,"--initial-height":ve?"auto":`${St}px`,...Z,...r.style},onDragEnd:()=>{D(!1),L(null),me.current=null},onPointerDown:b=>{b.button!==2&&($e||!de||(Ue.current=new Date,Pe(ue.current),b.target.setPointerCapture(b.pointerId),b.target.tagName!=="BUTTON"&&(D(!0),me.current={x:b.clientX,y:b.clientY})))},onPointerUp:()=>{var b,T,k;if(ce||!de)return;me.current=null;const O=Number(((b=K.current)==null?void 0:b.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ce=Number(((T=K.current)==null?void 0:T.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),j=new Date().getTime()-((k=Ue.current)==null?void 0:k.getTime()),$=te==="x"?O:Ce,Ne=Math.abs($)/j;if(Math.abs($)>=jn||Ne>.11){Pe(ue.current),r.onDismiss==null||r.onDismiss.call(r,r),Se(te==="x"?O>0?"right":"left":Ce>0?"down":"up"),X(),De(!0);return}else{var G,W;(G=K.current)==null||G.style.setProperty("--swipe-amount-x","0px"),(W=K.current)==null||W.style.setProperty("--swipe-amount-y","0px")}le(!1),D(!1),L(null)},onPointerMove:b=>{var T,k,O;if(!me.current||!de||((T=window.getSelection())==null?void 0:T.toString().length)>0)return;const j=b.clientY-me.current.y,$=b.clientX-me.current.x;var Ne;const G=(Ne=o.swipeDirections)!=null?Ne:In(H);!te&&(Math.abs($)>1||Math.abs(j)>1)&&L(Math.abs($)>Math.abs(j)?"x":"y");let W={x:0,y:0};const Ze=oe=>1/(1.5+Math.abs(oe)/20);if(te==="y"){if(G.includes("top")||G.includes("bottom"))if(G.includes("top")&&j<0||G.includes("bottom")&&j>0)W.y=j;else{const oe=j*Ze(j);W.y=Math.abs(oe)<Math.abs(j)?oe:j}}else if(te==="x"&&(G.includes("left")||G.includes("right")))if(G.includes("left")&&$<0||G.includes("right")&&$>0)W.x=$;else{const oe=$*Ze($);W.x=Math.abs(oe)<Math.abs($)?oe:$}(Math.abs(W.x)>0||Math.abs(W.y)>0)&&le(!0),(k=K.current)==null||k.style.setProperty("--swipe-amount-x",`${W.x}px`),(O=K.current)==null||O.style.setProperty("--swipe-amount-y",`${W.y}px`)}},Nt&&!r.jsx&&A!=="loading"?m.createElement("button",{"aria-label":Q,"data-disabled":$e,"data-close-button":!0,onClick:$e||!de?()=>{}:()=>{X(),r.onDismiss==null||r.onDismiss.call(r,r)},className:U(w?.closeButton,r==null||(n=r.classNames)==null?void 0:n.closeButton)},(Xe=_?.close)!=null?Xe:vn):null,(A||r.icon||r.promise)&&r.icon!==null&&(_?.[A]!==null||r.icon)?m.createElement("div",{"data-icon":"",className:U(w?.icon,r==null||(s=r.classNames)==null?void 0:s.icon)},r.promise||r.type==="loading"&&!r.icon?r.icon||kt():null,r.type!=="loading"?It:null):null,m.createElement("div",{"data-content":"",className:U(w?.content,r==null||(a=r.classNames)==null?void 0:a.content)},m.createElement("div",{"data-title":"",className:U(w?.title,r==null||(l=r.classNames)==null?void 0:l.title)},r.jsx?r.jsx:typeof r.title=="function"?r.title():r.title),r.description?m.createElement("div",{"data-description":"",className:U(J,Ct,w?.description,r==null||(d=r.classNames)==null?void 0:d.description)},typeof r.description=="function"?r.description():r.description):null),m.isValidElement(r.cancel)?r.cancel:r.cancel&&Te(r.cancel)?m.createElement("button",{"data-button":!0,"data-cancel":!0,style:r.cancelButtonStyle||V,onClick:b=>{Te(r.cancel)&&de&&(r.cancel.onClick==null||r.cancel.onClick.call(r.cancel,b),X())},className:U(w?.cancelButton,r==null||(i=r.classNames)==null?void 0:i.cancelButton)},r.cancel.label):null,m.isValidElement(r.action)?r.action:r.action&&Te(r.action)?m.createElement("button",{"data-button":!0,"data-action":!0,style:r.actionButtonStyle||ae,onClick:b=>{Te(r.action)&&(r.action.onClick==null||r.action.onClick.call(r.action,b),!b.defaultPrevented&&X())},className:U(w?.actionButton,r==null||(u=r.classNames)==null?void 0:u.actionButton)},r.action.label):null)};function nt(){if(typeof window>"u"||typeof document>"u")return"ltr";const o=document.documentElement.getAttribute("dir");return o==="auto"||!o?window.getComputedStyle(document.documentElement).direction:o}function On(o,t){const e={};return[o,t].forEach((n,s)=>{const a=s===1,l=a?"--mobile-offset":"--offset",d=a?Nn:Cn;function i(u){["top","right","bottom","left"].forEach(g=>{e[`${l}-${g}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?i(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?e[`${l}-${u}`]=d:e[`${l}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):i(d)}),e}const Mn=m.forwardRef(function(t,e){const{id:n,invert:s,position:a="bottom-right",hotkey:l=["altKey","KeyT"],expand:d,closeButton:i,className:u,offset:g,mobileOffset:r,theme:h="light",richColors:p,duration:f,style:S,visibleToasts:M=Rn,toastOptions:x,dir:Y=nt(),gap:F=_n,icons:q,containerAriaLabel:he="Notifications"}=t,[P,Z]=m.useState([]),V=m.useMemo(()=>n?P.filter(y=>y.toasterId===n):P.filter(y=>!y.toasterId),[P,n]),ae=m.useMemo(()=>Array.from(new Set([a].concat(V.filter(y=>y.position).map(y=>y.position)))),[V,a]),[R,J]=m.useState([]),[ee,H]=m.useState(!1),[we,ve]=m.useState(!1),[w,_]=m.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=m.useRef(null),te=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=m.useRef(null),ne=m.useRef(!1),Se=m.useCallback(y=>{Z(C=>{var E;return(E=C.find(z=>z.id===y.id))!=null&&E.delete||I.dismiss(y.id),C.filter(({id:z})=>z!==y.id)})},[]);return m.useEffect(()=>I.subscribe(y=>{if(y.dismiss){requestAnimationFrame(()=>{Z(C=>C.map(E=>E.id===y.id?{...E,delete:!0}:E))});return}setTimeout(()=>{Ot.flushSync(()=>{Z(C=>{const E=C.findIndex(z=>z.id===y.id);return E!==-1?[...C.slice(0,E),{...C[E],...y},...C.slice(E+1)]:[y,...C]})})})}),[P]),m.useEffect(()=>{if(h!=="system"){_(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?_("dark"):_("light")),typeof window>"u")return;const y=window.matchMedia("(prefers-color-scheme: dark)");try{y.addEventListener("change",({matches:C})=>{_(C?"dark":"light")})}catch{y.addListener(({matches:E})=>{try{_(E?"dark":"light")}catch(z){console.error(z)}})}},[h]),m.useEffect(()=>{P.length<=1&&H(!1)},[P]),m.useEffect(()=>{const y=C=>{var E;if(l.every(D=>C[D]||C.code===D)){var ie;H(!0),(ie=Q.current)==null||ie.focus()}C.code==="Escape"&&(document.activeElement===Q.current||(E=Q.current)!=null&&E.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[l]),m.useEffect(()=>{if(Q.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,ne.current=!1)}},[Q.current]),m.createElement("section",{ref:e,"aria-label":`${he} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ae.map((y,C)=>{var E;const[z,ie]=y.split("-");return V.length?m.createElement("ol",{key:y,dir:Y==="auto"?nt():Y,tabIndex:-1,ref:Q,className:u,"data-sonner-toaster":!0,"data-sonner-theme":w,"data-y-position":z,"data-x-position":ie,style:{"--front-toast-height":`${((E=R[0])==null?void 0:E.height)||0}px`,"--width":`${Tn}px`,"--gap":`${F}px`,...S,...On(g,r)},onBlur:D=>{ne.current&&!D.currentTarget.contains(D.relatedTarget)&&(ne.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,L.current=D.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{we||H(!1)},onDragEnd:()=>H(!1),onPointerDown:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||ve(!0)},onPointerUp:()=>ve(!1)},V.filter(D=>!D.position&&C===0||D.position===y).map((D,ce)=>{var De,Ee;return m.createElement(An,{key:D.id,icons:q,index:ce,toast:D,defaultRichColors:p,duration:(De=x?.duration)!=null?De:f,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:s,visibleToasts:M,closeButton:(Ee=x?.closeButton)!=null?Ee:i,interacting:we,position:y,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,closeButtonAriaLabel:x?.closeButtonAriaLabel,removeToast:Se,toasts:V.filter(le=>le.position==D.position),heights:R.filter(le=>le.position==D.position),setHeights:J,expandByDefault:d,gap:F,expanded:ee,swipeDirections:t.swipeDirections})})):null}))}),Pn=({...o})=>c.jsx(Mn,{theme:"light",className:"toaster group",icons:{success:c.jsx(Ut,{className:"h-4 w-4"}),info:c.jsx(Ht,{className:"h-4 w-4"}),warning:c.jsx(Wt,{className:"h-4 w-4"}),error:c.jsx(Gt,{className:"h-4 w-4"}),loading:c.jsx(Lt,{className:"h-4 w-4 animate-spin"})},toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...o});class zn extends v.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){console.error("[ErrorBoundary] Uncaught error:",t,e)}handleReset=()=>{this.setState({hasError:!1,error:null})};render(){return this.state.hasError?c.jsx("div",{className:"flex min-h-screen items-center justify-center p-5 bg-z-bg-primary",children:c.jsxs("div",{className:"w-full max-w-md bg-z-bg-card rounded-2xl border border-z-border p-6 text-center space-y-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-z-red",children:"出了一點問題"}),c.jsx("p",{className:"text-sm text-z-text-secondary",children:this.state.error?.message||"發生了未預期的錯誤"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx("button",{onClick:this.handleReset,className:"px-4 py-2 rounded-xl bg-z-bg-elevated text-z-text-primary border border-z-border text-sm font-medium transition-all active:scale-95",children:"重試"}),c.jsx("button",{onClick:()=>{window.location.href="/"},className:"px-4 py-2 rounded-xl bg-z-accent text-black text-sm font-semibold transition-all active:scale-95",children:"回首頁"})]})]})}):this.props.children}}class $n{ws=null;url="";reconnectAttempt=0;maxReconnectAttempts=1/0;reconnectDelay=1e3;maxReconnectDelay=3e4;reconnectTimeout=null;messageHandlers=new Set;connectionListeners=new Set;commandQueue=[];isIntentionalClose=!1;constructor(){const t=new URLSearchParams(window.location.search),e=window.location;if(e.pathname.includes("/api/hassio_ingress/")||document.querySelector('meta[name="z2m-proxy"]')){const n=e.protocol==="https:"?"wss":"ws";this.url=`${n}://${e.host}${e.pathname.replace(/\/+$/,"")}/z2m-ws`}else if(t.get("z2m_host")){const n=t.get("z2m_host"),s=t.get("z2m_port")||"8080",a=t.get("z2m_secure")==="true";this.url=`${a?"wss":"ws"}://${n}:${s}/api`}else{const n="192.168.10.53",s="8099",a="/api";this.url=`ws://${n}:${s}${a}`}console.log("[WebSocket] Target URL:",this.url)}connect(){if(!(this.ws?.readyState===WebSocket.OPEN||this.ws?.readyState===WebSocket.CONNECTING)){this.isIntentionalClose=!1;try{this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("[WebSocket] Connected to Z2M"),this.reconnectAttempt=0,this.reconnectDelay=1e3,this.notifyConnectionListeners(!0),this.processCommandQueue()},this.ws.onmessage=t=>{try{const e=JSON.parse(t.data);this.handleMessage(e)}catch(e){console.error("[WebSocket] Failed to parse message:",e)}},this.ws.onerror=t=>{console.error("[WebSocket] Error:",t)},this.ws.onclose=()=>{console.log("[WebSocket] Disconnected from Z2M"),this.notifyConnectionListeners(!1),this.isIntentionalClose||this.scheduleReconnect()}}catch(t){console.error("[WebSocket] Connection failed:",t),this.scheduleReconnect()}}}disconnect(){this.isIntentionalClose=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.ws&&(this.ws.close(),this.ws=null)}scheduleReconnect(){if(this.reconnectAttempt>=this.maxReconnectAttempts){console.error("[WebSocket] Max reconnect attempts reached");return}this.reconnectAttempt++;const t=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempt-1),this.maxReconnectDelay);console.log(`[WebSocket] Reconnecting in ${t}ms (attempt ${this.reconnectAttempt}/${this.maxReconnectAttempts})`),this.reconnectTimeout=setTimeout(()=>{this.connect()},t)}handleMessage(t){this.messageHandlers.forEach(e=>{try{e(t.topic,t.payload)}catch(n){console.error("[WebSocket] Handler error:",n)}})}send(t,e){return new Promise((n,s)=>{if(this.ws?.readyState!==WebSocket.OPEN){this.commandQueue.push({topic:t,message:e}),s(new Error("WebSocket not connected"));return}try{const a={topic:t,payload:e};console.log("[WebSocket] Sending:",JSON.stringify(a)),this.ws.send(JSON.stringify(a)),n()}catch(a){console.error("[WebSocket] Send failed:",a),s(a)}})}processCommandQueue(){for(;this.commandQueue.length>0;){const t=this.commandQueue.shift();t&&this.send(t.topic,t.message).catch(e=>{console.error("[WebSocket] Queued command failed:",e)})}}subscribe(t){return this.messageHandlers.add(t),()=>this.messageHandlers.delete(t)}onConnectionChange(t){return this.connectionListeners.add(t),()=>this.connectionListeners.delete(t)}notifyConnectionListeners(t){this.connectionListeners.forEach(e=>{try{e(t)}catch(n){console.error("[WebSocket] Listener error:",n)}})}isConnected(){return this.ws?.readyState===WebSocket.OPEN}updateConfig(t,e,n,s="/api"){const l=`${n?"wss":"ws"}://${t}:${e}${s}`;l!==this.url&&(this.url=l,this.disconnect(),this.connect())}}const N=new $n,Bn={},ot=o=>{let t;const e=new Set,n=(g,r)=>{const h=typeof g=="function"?g(t):g;if(!Object.is(h,t)){const p=t;t=r??(typeof h!="object"||h===null)?h:Object.assign({},t,h),e.forEach(f=>f(t,p))}},s=()=>t,i={setState:n,getState:s,getInitialState:()=>u,subscribe:g=>(e.add(g),()=>e.delete(g)),destroy:()=>{(Bn?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},u=t=o(n,s,i);return i},Fn=o=>o?ot(o):ot;var pt={exports:{}},ft={},gt={exports:{}},ht={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ge=v;function Ln(o,t){return o===t&&(o!==0||1/o===1/t)||o!==o&&t!==t}var Gn=typeof Object.is=="function"?Object.is:Ln,Wn=ge.useState,Hn=ge.useEffect,Un=ge.useLayoutEffect,Yn=ge.useDebugValue;function Vn(o,t){var e=t(),n=Wn({inst:{value:e,getSnapshot:t}}),s=n[0].inst,a=n[1];return Un(function(){s.value=e,s.getSnapshot=t,Be(s)&&a({inst:s})},[o,e,t]),Hn(function(){return Be(s)&&a({inst:s}),o(function(){Be(s)&&a({inst:s})})},[o]),Yn(e),e}function Be(o){var t=o.getSnapshot;o=o.value;try{var e=t();return!Gn(o,e)}catch{return!0}}function Kn(o,t){return t()}var qn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Kn:Vn;ht.useSyncExternalStore=ge.useSyncExternalStore!==void 0?ge.useSyncExternalStore:qn;gt.exports=ht;var Qn=gt.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me=v,Xn=Qn;function Zn(o,t){return o===t&&(o!==0||1/o===1/t)||o!==o&&t!==t}var Jn=typeof Object.is=="function"?Object.is:Zn,eo=Xn.useSyncExternalStore,to=Me.useRef,no=Me.useEffect,oo=Me.useMemo,so=Me.useDebugValue;ft.useSyncExternalStoreWithSelector=function(o,t,e,n,s){var a=to(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=oo(function(){function i(p){if(!u){if(u=!0,g=p,p=n(p),s!==void 0&&l.hasValue){var f=l.value;if(s(f,p))return r=f}return r=p}if(f=r,Jn(g,p))return f;var S=n(p);return s!==void 0&&s(f,S)?(g=p,f):(g=p,r=S)}var u=!1,g,r,h=e===void 0?null:e;return[function(){return i(t())},h===null?void 0:function(){return i(h())}]},[t,e,n,s]);var d=eo(o,a[0],a[1]);return no(function(){l.hasValue=!0,l.value=d},[d]),so(d),d};pt.exports=ft;var ro=pt.exports;const ao=Mt(ro),vt={},{useDebugValue:io}=m,{useSyncExternalStoreWithSelector:co}=ao;let st=!1;const lo=o=>o;function uo(o,t=lo,e){(vt?"production":void 0)!=="production"&&e&&!st&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),st=!0);const n=co(o.subscribe,o.getState,o.getServerState||o.getInitialState,t,e);return io(n),n}const rt=o=>{(vt?"production":void 0)!=="production"&&typeof o!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof o=="function"?Fn(o):o,e=(n,s)=>uo(t,n,s);return Object.assign(e,t),e},xe=o=>o?rt(o):rt,mo={host:"192.168.10.53",port:parseInt("8099",10),secure:!1,path:"/api",reconnectDelay:1e3,maxReconnectDelay:3e4,reconnectAttempts:10},re=xe(o=>({state:"disconnected",config:mo,error:void 0,lastConnected:void 0,lastDisconnected:void 0,reconnectAttempt:0,bridgeState:void 0,permitJoin:!1,permitJoinTimeout:void 0,setConnectionState:t=>{o({state:t})},setError:t=>{o({error:t})},setBridgeState:t=>{o({bridgeState:t})},setPermitJoin:(t,e)=>{o({permitJoin:t,permitJoinTimeout:e})},incrementReconnectAttempt:()=>{o(t=>({reconnectAttempt:t.reconnectAttempt+1}))},resetReconnectAttempt:()=>{o({reconnectAttempt:0})},updateConfig:t=>{o(e=>({config:{...e.config,...t}}))},updateLastConnected:()=>{o({lastConnected:Date.now()})},updateLastDisconnected:()=>{o({lastDisconnected:Date.now()})}}));function po(o){const t={},e=[];function n(s,a,l){for(const d of s){const i=d.type,u=d.name,g=d.endpoint||a;if(Array.isArray(d.features)){if((i==="light"||i==="switch")&&(t.onOff=!0,g)){const r=d.features.find(p=>p.name==="state"),h=[];for(const p of d.features)p.name==="brightness"&&h.push("brightness"),p.name==="color_temp"&&h.push("color_temp");e.push({endpoint:g,property:r?.property||`state_${g}`,type:i,features:h.length>0?h:void 0})}i==="cover"&&(t.cover=!0),n(d.features,g);continue}u==="state"&&(i==="binary"||i==="enum")&&(t.onOff=!0),u==="brightness"&&i==="numeric"&&(t.brightness=!0),u==="color_temp"&&i==="numeric"&&(t.colorTemperature=!0),u==="color_xy"&&(t.colorXY=!0),u==="color_hs"&&(t.colorHS=!0)}}return n(o),e.length>1&&(t.endpoints=e),t}function fo(o,t){const e=o.toLowerCase();if(e==="coordinator")return"coordinator";const n=t.some(d=>d.type==="light"),s=t.some(d=>d.type==="switch"),a=t.some(d=>d.type==="cover"),l=t.some(d=>{const i=d.name;return i==="temperature"||i==="humidity"||i==="occupancy"||i==="contact"});return n?"light":s||a?"switch":l?"sensor":e==="router"?"router":"unknown"}function go(o){const t=o.definition,e=t?.exposes??[],n=o.type??"unknown";return{ieee_address:o.ieee_address??"",type:fo(n,e),friendly_name:o.friendly_name??"",model_id:o.model_id,manufacturer:o.manufacturer,definition:t,capabilities:po(e),state:o.state??{},supported:o.supported??!1,disabled:o.disabled??!1,power_source:o.power_source,date_code:o.date_code,software_build_id:o.software_build_id,interviewing:o.interviewing,interview_completed:o.interview_completed,lastSeen:typeof o.last_seen=="number"?o.last_seen:Date.now(),isNew:!1}}const ye=xe((o,t)=>({byId:{},allIds:[],setDevices:e=>{const n={},s=[];e.forEach(a=>{const l=go(a);n[l.friendly_name]=l,s.push(l.friendly_name)}),o({byId:n,allIds:s})},addDevice:e=>{o(n=>({byId:{...n.byId,[e.friendly_name]:e},allIds:n.allIds.includes(e.friendly_name)?n.allIds:[...n.allIds,e.friendly_name]}))},updateDevice:(e,n)=>{o(s=>{const a=s.byId[e];return a?{byId:{...s.byId,[e]:{...a,...n}}}:s})},updateDeviceState:(e,n)=>{o(s=>{const a=s.byId[e];return a?{byId:{...s.byId,[e]:{...a,state:{...a.state,...n},lastSeen:Date.now()}}}:s})},removeDevice:e=>{o(n=>{const{[e]:s,...a}=n.byId;return{byId:a,allIds:n.allIds.filter(l=>l!==e)}})},markDeviceAsNew:e=>{o(n=>{const s=n.byId[e];return s?{byId:{...n.byId,[e]:{...s,isNew:!0}}}:n})},clearNewFlag:e=>{o(n=>{const s=n.byId[e];return s?{byId:{...n.byId,[e]:{...s,isNew:!1}}}:n})},renameDevice:(e,n)=>{o(s=>{const a=s.byId[e];if(!a)return s;const{[e]:l,...d}=s.byId,i={...a,friendly_name:n};return{byId:{...d,[n]:i},allIds:s.allIds.map(u=>u===e?n:u)}})},getDevice:e=>t().byId[e],getAllDevices:()=>{const{byId:e,allIds:n}=t();return n.map(s=>e[s]).filter(s=>!!s)},getDevicesByType:e=>t().getAllDevices().filter(n=>n.type===e),getOnlineDevices:()=>t().getAllDevices().filter(e=>{if(!e.lastSeen)return!1;const n=5*60*1e3;return Date.now()-e.lastSeen<n}),getOfflineDevices:()=>t().getAllDevices().filter(e=>{if(!e.lastSeen)return!0;const n=5*60*1e3;return Date.now()-e.lastSeen>=n})})),ho=xe((o,t)=>({groups:[],byId:{},setGroups:e=>{const n={};e.forEach(s=>{n[s.id]=s}),o({groups:e,byId:n})},addGroup:e=>{o(n=>({groups:[...n.groups,e],byId:{...n.byId,[e.id]:e}}))},updateGroup:(e,n)=>{o(s=>{const a=s.byId[e];if(!a)return s;const l={...a,...n};return{groups:s.groups.map(d=>d.id===e?l:d),byId:{...s.byId,[e]:l}}})},removeGroup:e=>{o(n=>{const{[e]:s,...a}=n.byId;return{groups:n.groups.filter(l=>l.id!==e),byId:a}})},updateGroupState:(e,n)=>{o(s=>{const a=s.byId[e];if(!a)return s;const l={...a,state:{...a.state,...n}};return{groups:s.groups.map(d=>d.id===e?l:d),byId:{...s.byId,[e]:l}}})},getGroup:e=>t().byId[e],getGroupAggregateState:(e,n)=>{const s=t().byId[e];if(!s||s.members.length===0)return"all_off";const a=s.members.map(i=>n[i.ieee_address]?.state).filter(Boolean);if(a.length===0)return"all_off";const l=a.every(i=>i==="ON"),d=a.every(i=>i==="OFF");return l?"all_on":d?"all_off":"mixed"},getGroupAverageBrightness:(e,n)=>{const s=t().byId[e];if(!s||s.members.length===0)return;const a=s.members.map(d=>n[d.ieee_address]?.brightness).filter(d=>typeof d=="number");if(a.length===0)return;const l=a.reduce((d,i)=>d+i,0);return Math.round(l/a.length)}}));function vo(){const o=re(s=>s.state),t=re(s=>s.bridgeState);v.useEffect(()=>{const s=(d,i)=>{const u=re.getState(),g=ye.getState(),r=ho.getState(),h=d.startsWith("zigbee2mqtt/")?d.replace("zigbee2mqtt/",""):d;if(h==="bridge/state"){if(i&&typeof i=="object"&&"state"in i){const p=i;u.setBridgeState(p.state)}}else if(h==="bridge/info"){if(i&&typeof i=="object"){const p=i;u.setPermitJoin(!!p.permit_join,p.permit_join_timeout??void 0)}}else if(h!=="bridge/converters"){if(h==="bridge/devices"){const p=Array.isArray(i)?i:[];g.setDevices(p)}else if(h==="bridge/groups"){const p=Array.isArray(i)?i:[];r.setGroups(p)}else if(h==="bridge/event"){if(!i||typeof i!="object")return;const p=i;if(p.type==="device_joined"&&p.data.friendly_name)g.markDeviceAsNew(p.data.friendly_name);else if(p.type==="device_leave"&&p.data.friendly_name)g.removeDevice(p.data.friendly_name);else if(p.type==="device_renamed"&&p.data.from&&p.data.to){const f=p.data.from,S=p.data.to;g.renameDevice(f,S)}}else if(!h.startsWith("bridge/")){const p=h.split("/")[0],f=i;if(p){const S=r.groups.find(M=>M.friendly_name===p);S&&r.updateGroupState(S.id,f),g.updateDeviceState(p,f)}}}},a=N.subscribe(s),l=N.onConnectionChange(d=>{const i=re.getState();d?(i.setConnectionState("connected"),i.updateLastConnected(),i.resetReconnectAttempt(),N.send("bridge/request/config",{}),N.send("bridge/request/device/list",{}),N.send("bridge/request/group/list",{})):(i.setConnectionState("disconnected"),i.updateLastDisconnected())});return re.getState().setConnectionState("connecting"),N.connect(),()=>{a(),l()}},[]);const e=v.useCallback(()=>{re.getState().setConnectionState("connecting"),N.connect()},[]),n=v.useCallback(()=>{N.disconnect(),re.getState().setConnectionState("disconnected")},[]);return{connect:e,disconnect:n,isConnected:o==="connected",connectionState:o,bridgeState:t}}const at="z2m-lite:",it="1";class bo{getKey(t){return`${at}${t}`}set(t,e,n){try{const s=this.getKey(t),a={version:n?.version||it,data:e,timestamp:Date.now(),expiresAt:n?.expiresIn?Date.now()+n.expiresIn:void 0};return localStorage.setItem(s,JSON.stringify(a)),!0}catch(s){return console.error(`[Storage] Failed to set ${t}:`,s),!1}}get(t,e){try{const n=this.getKey(t),s=localStorage.getItem(n);if(!s)return e;const a=JSON.parse(s);return a.expiresAt&&Date.now()>a.expiresAt?(this.remove(t),e):a.version!==it?(console.warn(`[Storage] Version mismatch for ${t}, clearing old data`),this.remove(t),e):a.data}catch(n){return console.error(`[Storage] Failed to get ${t}:`,n),e}}remove(t){try{const e=this.getKey(t);localStorage.removeItem(e)}catch(e){console.error(`[Storage] Failed to remove ${t}:`,e)}}clear(){try{Object.keys(localStorage).forEach(e=>{e.startsWith(at)&&localStorage.removeItem(e)})}catch(t){console.error("[Storage] Failed to clear storage:",t)}}has(t){const e=this.getKey(t);return localStorage.getItem(e)!==null}getTimestamp(t){try{const e=this.getKey(t),n=localStorage.getItem(e);return n?JSON.parse(n).timestamp:void 0}catch(e){console.error(`[Storage] Failed to get timestamp for ${t}:`,e);return}}isStale(t,e){const n=this.getTimestamp(t);return n?Date.now()-n>e:!0}}const B=new bo,pe="rooms",_e="room-assignments";class yo{getRooms(){return B.get(pe,[])??[]}getRoom(t){return this.getRooms().find(n=>n.id===t)}createRoom(t,e){const n=this.getRooms(),s=Date.now(),a={id:`room-${s}`,name:t,icon:e,deviceIds:[],createdAt:s,updatedAt:s};return n.push(a),B.set(pe,n),a}updateRoom(t,e){const n=this.getRooms(),s=n.findIndex(d=>d.id===t);if(s===-1)return;const a=n[s],l={id:a.id,name:e.name??a.name,icon:e.icon??a.icon,deviceIds:a.deviceIds,createdAt:a.createdAt,updatedAt:Date.now()};return n[s]=l,B.set(pe,n),l}deleteRoom(t){const e=this.getRooms(),n=e.filter(l=>l.id!==t);if(n.length===e.length)return!1;B.set(pe,n);const s=this.getRoomAssignments(),a={};return Object.entries(s).forEach(([l,d])=>{d!==t&&(a[l]=d)}),B.set(_e,a),!0}getRoomAssignments(){return B.get(_e,{})??{}}assignDeviceToRoom(t,e){const n=this.getRoomAssignments();n[t]=e,B.set(_e,n);const s=this.getRooms();s.forEach(a=>{a.id===e&&!a.deviceIds.includes(t)?(a.deviceIds.push(t),a.updatedAt=Date.now()):a.id!==e&&a.deviceIds.includes(t)&&(a.deviceIds=a.deviceIds.filter(l=>l!==t),a.updatedAt=Date.now())}),B.set(pe,s)}unassignDevice(t){const e=this.getRoomAssignments(),n=e[t];if(delete e[t],B.set(_e,e),n){const s=this.getRooms(),a=s.find(l=>l.id===n);a&&(a.deviceIds=a.deviceIds.filter(l=>l!==t),a.updatedAt=Date.now(),B.set(pe,s))}}getDeviceRoom(t){return this.getRoomAssignments()[t]}getDevicesInRoom(t){return this.getRoom(t)?.deviceIds||[]}}const je=new yo,Ge=xe((o,t)=>({rooms:[],deviceRoomAssignments:{},loadRooms:()=>{const e=je.getRooms(),n=je.getRoomAssignments();o({rooms:e,deviceRoomAssignments:n})},addRoom:e=>{o(n=>({rooms:[...n.rooms,e]}))},updateRoom:(e,n)=>{o(s=>({rooms:s.rooms.map(a=>a.id===e?{...a,...n,updatedAt:Date.now()}:a)}))},deleteRoom:e=>{o(n=>{const s={...n.deviceRoomAssignments};return Object.entries(s).forEach(([a,l])=>{l===e&&delete s[a]}),{rooms:n.rooms.filter(a=>a.id!==e),deviceRoomAssignments:s}})},assignDevice:(e,n)=>{je.assignDeviceToRoom(e,n),o(s=>({deviceRoomAssignments:{...s.deviceRoomAssignments,[e]:n}}))},unassignDevice:e=>{je.unassignDevice(e),o(n=>{const{[e]:s,...a}=n.deviceRoomAssignments;return{deviceRoomAssignments:a}})},getRoom:e=>t().rooms.find(n=>n.id===e),getDeviceRoom:e=>t().deviceRoomAssignments[e],getRoomDevices:e=>{const{deviceRoomAssignments:n}=t();return Object.entries(n).filter(([,s])=>s===e).map(([s])=>s)},getUnassignedDevices:e=>{const{deviceRoomAssignments:n}=t();return e.filter(s=>!n[s])}})),ct="preferences",ke={theme:"dark",language:"zh-TW",pairingState:{active:!1,remainingSeconds:0}},bt=xe((o,t)=>({...ke,setTheme:e=>{o({theme:e}),t().savePreferences()},setLanguage:e=>{o({language:e}),t().savePreferences()},startPairing:e=>{o({pairingState:{active:!0,remainingSeconds:e}})},stopPairing:()=>{o({pairingState:{active:!1,remainingSeconds:0}})},decrementPairingTimer:()=>{o(e=>{if(!e.pairingState.active)return e;const n=e.pairingState.remainingSeconds-1;return n<=0?{pairingState:{active:!1,remainingSeconds:0}}:{pairingState:{active:!0,remainingSeconds:n}}})},loadPreferences:()=>{const e=B.get(ct);e&&o({theme:e.theme||ke.theme,language:e.language||ke.language,pairingState:e.pairingState||ke.pairingState})},savePreferences:()=>{const{theme:e,language:n,pairingState:s}=t();B.set(ct,{theme:e,language:n,pairingState:s})}})),xo=[{path:"/",icon:Yt,label:"首頁"},{path:"/groups",icon:Vt,label:"群組"},{path:"/pairing",icon:dt,label:"配對",isCenter:!0},{path:"/settings",icon:ut,label:"設定"}];function wo({onPairing:o}){const t=Pt(),e=We();return c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-t backdrop-blur-xl",style:{background:"var(--bg-secondary)",borderColor:"var(--z2m-border)"},children:c.jsx("div",{className:"mx-auto flex max-w-[430px] justify-around px-0 pb-7 pt-2",children:xo.map(n=>{const s=n.path==="/"?t.pathname==="/":t.pathname.startsWith(n.path),a=n.icon;return c.jsxs("button",{onClick:()=>{n.path==="/pairing"?o():e(n.path)},className:"flex flex-col items-center gap-1 px-4 py-1 transition-colors",style:{color:s?"var(--z2m-accent)":"var(--text-tertiary)",minHeight:"auto",minWidth:"auto"},children:[c.jsx(a,{size:n.isCenter?28:22,strokeWidth:n.isCenter?2.5:2}),c.jsx("span",{className:"text-[11px]",children:n.label})]},n.path)})})})}class So{async controlDevice(t,e){const n=`${t}/set`;console.log("[DeviceService] controlDevice:",n,e),await N.send(n,e)}async toggleDevice(t){await this.controlDevice(t,{state:"TOGGLE"})}async turnOn(t){await this.controlDevice(t,{state:"ON"})}async turnOff(t){await this.controlDevice(t,{state:"OFF"})}async setBrightness(t,e,n=0){const s=Math.round(e/100*254);await this.controlDevice(t,{brightness:s,transition:n})}async setColorTemperature(t,e,n=0){const s=Math.round(1e6/e);await this.controlDevice(t,{color_temp:s,transition:n})}async renameDevice(t,e){const n="bridge/request/device/rename",s={from:t,to:e};await N.send(n,s)}async removeDevice(t){const e="bridge/request/device/remove",n={id:t};await N.send(e,n)}async startPairing(t=120){const e="bridge/request/permit_join",n={value:!0,time:t};await N.send(e,n)}async stopPairing(){const t="bridge/request/permit_join",e={value:!1};await N.send(t,e)}async controlGroup(t,e){const n=`${t}/set`;await N.send(n,e)}async addGroupMember(t,e){const n="bridge/request/group/members/add",s={group:t,device:e};await N.send(n,s)}async removeGroupMember(t,e){const n="bridge/request/group/members/remove",s={group:t,device:e};await N.send(n,s)}async createGroup(t){const e="bridge/request/group/add",n={friendly_name:t};await N.send(e,n)}async deleteGroup(t){const e="bridge/request/group/remove",n={id:t};await N.send(e,n)}async requestDevices(){await N.send("bridge/request/device/list",{})}brightnessToPercentage(t){return Math.round(t/254*100)}miredToKelvin(t){return Math.round(1e6/t)}kelvinToMired(t){return Math.round(1e6/t)}}const Ae=new So,Do=120;function Eo(){const{t:o}=mt(),{pairingState:t,startPairing:e,stopPairing:n,decrementPairingTimer:s}=bt(),a=ye(),l=v.useRef(null),d=v.useRef(0),i=a.getAllDevices(),u=i.length;v.useEffect(()=>{if(t.active&&u>d.current&&d.current>0){const h=i.filter(p=>p.isNew);if(h.length>0){const p=h[h.length-1].friendly_name;fe.success(o("pairing.deviceJoined"),{description:p}),r()}}d.current=u},[u,t.active,i,o]),v.useEffect(()=>(t.active&&(l.current=setInterval(()=>{s()},1e3)),()=>{l.current&&(clearInterval(l.current),l.current=null)}),[t.active,s]),v.useEffect(()=>{!t.active&&l.current&&(clearInterval(l.current),l.current=null)},[t.active]);const g=v.useCallback(async(h=Do)=>{try{await Ae.startPairing(h),e(h)}catch(p){console.error("Failed to start pairing:",p),fe.error(o("pairing.startFailed"))}},[e,o]),r=v.useCallback(async()=>{try{await Ae.stopPairing()}catch(h){console.error("Failed to stop pairing:",h)}finally{n()}},[n]);return{isPairing:t.active,remainingSeconds:t.remainingSeconds,startPairing:g,stopPairing:r}}function yt({open:o,onClose:t}){const{startPairing:e,stopPairing:n,isPairing:s,remainingSeconds:a}=Eo(),[l,d]=v.useState(!1),i=v.useCallback(()=>{e(120),d(!0)},[e]),u=v.useCallback(()=>{n(),d(!1),t()},[n,t]);if(v.useEffect(()=>{o||d(!1)},[o]),!o)return null;const g=Math.floor((a??0)/60),r=(a??0)%60;return c.jsx("div",{className:"fixed inset-0 z-[200] flex items-end justify-center",style:{background:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)"},onClick:u,children:c.jsxs("div",{className:"animate-slide-up w-full max-w-[430px] rounded-t-3xl px-5 pb-10 pt-6",style:{background:"var(--bg-secondary)"},onClick:h=>h.stopPropagation(),children:[c.jsx("div",{className:"mx-auto mb-5 h-1 w-9 rounded-full",style:{background:"var(--text-tertiary)"}}),c.jsx("h2",{className:"mb-2 text-center text-xl font-bold",children:"配對新設備"}),c.jsx("p",{className:"mb-6 text-center text-sm",style:{color:"var(--text-secondary)"},children:"請確保新設備已進入配對模式"}),c.jsx("div",{className:"mx-auto mb-6 flex h-[120px] w-[120px] items-center justify-center rounded-full border-[3px]",style:{borderColor:"var(--z2m-accent)",animation:s?"pulse-glow 2s ease-in-out infinite":"none"},children:c.jsx(Kt,{size:48,style:{color:"var(--z2m-accent)"}})}),l&&s?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-2 text-center text-3xl font-bold tabular-nums",style:{color:"var(--z2m-accent)"},children:[g,":",String(r).padStart(2,"0")]}),c.jsx("p",{className:"mb-6 text-center text-sm",style:{color:"var(--text-secondary)"},children:"正在搜尋附近設備..."})]}):null,l?c.jsx("button",{onClick:u,className:"w-full rounded-xl py-4 text-base font-semibold transition-all active:scale-[0.98] active:opacity-90",style:{background:"var(--z2m-accent)",color:"#000"},children:"停止配對"}):c.jsx("button",{onClick:i,className:"w-full rounded-xl py-4 text-base font-semibold transition-all active:scale-[0.98] active:opacity-90",style:{background:"var(--z2m-accent)",color:"#000"},children:"開始配對"}),c.jsx("button",{onClick:u,className:"mt-2 w-full rounded-xl border py-4 text-base font-medium transition-all active:scale-[0.98]",style:{background:"var(--bg-card)",borderColor:"var(--z2m-border)",color:"var(--text-primary)"},children:"取消"})]})})}function Ro(){return null}function Co(){const[o,t]=v.useState(!1);return c.jsxs("div",{className:"relative mx-auto min-h-screen w-full max-w-[430px]",style:{background:"var(--bg-primary)"},children:[c.jsx(Ro,{}),c.jsx("main",{className:"pb-24",children:c.jsx(zt,{})}),c.jsx(wo,{onPairing:()=>t(!0)}),c.jsx(yt,{open:o,onClose:()=>t(!1)})]})}function No(o){const t=o.type,e=o.capabilities,n=o.definition?.exposes??[],s=e?.cover||n.some(i=>i.type==="cover"),a=n.some(i=>i.name==="temperature"),l=n.some(i=>i.name==="occupancy"),d=n.some(i=>i.name==="contact");return t==="light"||e?.brightness||e?.colorTemperature?qt:s?Qt:l?Xt:d?Zt:a?Jt:t==="switch"?en:t==="router"?tn:e?.onOff?nn:on}function To(o,t,e){if(!e)return"離線";const n=o.state,s=o.capabilities,a=o.definition?.exposes??[],l=a.some(g=>g.name==="temperature"),d=a.some(g=>g.name==="contact"),i=a.some(g=>g.name==="occupancy"),u=s?.cover||a.some(g=>g.type==="cover");if(l&&n?.temperature!=null){const g=typeof n.temperature=="number"?n.temperature.toFixed(1):n.temperature,r=n?.humidity!=null?` / ${typeof n.humidity=="number"?Math.round(Number(n.humidity)):n.humidity}%`:"";return`${g}°C${r}`}if(d)return n?.contact?"已關閉 ✓":"已開啟";if(i)return n?.occupancy?"有動作":"無動作";if(u){const g=n?.position;return g!=null?`開啟 ${g}%`:t?"開啟中":"已關閉"}return s?.brightness&&t&&n?.brightness!=null?`亮度 ${Math.round(Number(n.brightness)/2.54)}%`:s?.endpoints&&s.endpoints.length>1?s.endpoints.map(r=>{const h=n?.[r.property]==="ON";return`${r.endpoint.toUpperCase()}:${h?"開":"關"}`}).join(" "):s?.onOff?t?"開啟中":"已關閉":"線上"}const _o=v.memo(function({device:t,onToggle:e,onBrightnessChange:n,onEndpointToggle:s}){const a=We(),l=t.lastSeen?Date.now()-t.lastSeen<5*60*1e3:t.interview_completed!==!1&&t.type!=="coordinator",d=t.state?.state==="ON",i=t.capabilities?.onOff??!1,u=t.capabilities?.brightness??!1,g=(t.definition?.exposes??[]).some(R=>R.name==="battery"),r=t.capabilities?.cover??!1,h=t.capabilities?.endpoints,p=h&&h.length>1,f=t.state?.battery,S=t.state?.brightness!=null?Math.round(Number(t.state.brightness)/2.54):0,M=No(t),x=To(t,d,l),Y=d&&l,F=v.useRef(null),q=v.useRef(!1),he=v.useCallback(()=>{q.current=!1,F.current=setTimeout(()=>{q.current=!0,navigator.vibrate?.(30),a(`/device/${encodeURIComponent(t.friendly_name)}`)},800)},[a,t.friendly_name]),P=v.useCallback(()=>{F.current&&(clearTimeout(F.current),F.current=null)},[]),Z=v.useCallback(()=>{q.current||p||(i&&l?e(!d):a(`/device/${encodeURIComponent(t.friendly_name)}`))},[p,i,l,d,e,a,t.friendly_name]),V=v.useCallback(R=>{R.stopPropagation(),n(Number(R.target.value))},[n]),ae=l?"var(--z2m-green)":"var(--z2m-red)";return c.jsxs("div",{onClick:Z,onTouchStart:he,onTouchEnd:P,onTouchCancel:P,onContextMenu:R=>R.preventDefault(),className:"relative cursor-pointer select-none overflow-hidden rounded-2xl border transition-all active:scale-[0.97]",style:{background:Y?"var(--z2m-accent-soft)":"var(--bg-card)",borderColor:Y?"var(--z2m-accent-border)":"var(--z2m-border)",opacity:l?1:.5,padding:"14px 14px 12px"},children:[c.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[c.jsx(M,{size:26,strokeWidth:1.8,style:{color:Y?"var(--z2m-accent)":"var(--text-tertiary)"}}),c.jsx("span",{className:"mt-1 block rounded-sm",style:{width:8,height:8,background:ae,boxShadow:l?`0 0 6px ${ae}`:"none"}})]}),c.jsx("div",{className:"mb-0.5 truncate text-[14px] font-semibold leading-tight",children:t.friendly_name}),c.jsx("div",{className:"text-[12px] leading-tight",style:{color:l?Y?"var(--z2m-accent)":"var(--text-tertiary)":"var(--z2m-red)"},children:x}),u&&d&&l&&c.jsxs("div",{className:"relative mt-3",children:[c.jsx("div",{className:"h-[5px] w-full overflow-hidden rounded-full",style:{background:"var(--bg-elevated)"},children:c.jsx("div",{className:"h-full rounded-full",style:{width:`${S}%`,background:"linear-gradient(90deg, var(--z2m-accent), #FFCB6B)"}})}),c.jsx("input",{type:"range",min:1,max:100,value:S,onChange:V,onClick:R=>R.stopPropagation(),className:"absolute left-0 top-[-4px] h-4 w-full cursor-pointer opacity-0"})]}),p&&l&&c.jsx("div",{className:"mt-3 flex gap-2",children:h.map(R=>{const J=t.state?.[R.property]==="ON";return c.jsxs("div",{className:"flex flex-1 items-center justify-between rounded-lg px-2 py-1.5",style:{background:"var(--bg-elevated)"},onClick:ee=>{ee.stopPropagation(),s?.(R.endpoint,R.property,!J)},children:[c.jsx("span",{className:"text-[11px]",style:{color:"var(--text-tertiary)"},children:R.endpoint.toUpperCase()}),c.jsx("div",{className:"relative h-[18px] w-[32px] cursor-pointer rounded-full transition-colors duration-300",style:{background:J?"var(--z2m-accent)":"rgba(255,255,255,0.1)"},children:c.jsx("div",{className:"absolute top-[2px] h-[14px] w-[14px] rounded-full bg-white transition-transform duration-300",style:{transform:J?"translateX(16px)":"translateX(2px)",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"}})})]},R.endpoint)})}),i&&!u&&!r&&!p&&l&&c.jsx("div",{className:"mt-3 flex justify-end",children:c.jsx("div",{className:"relative h-[24px] w-[42px] cursor-pointer rounded-full transition-colors duration-300",style:{background:d?"var(--z2m-accent)":"var(--bg-elevated)"},onClick:R=>{R.stopPropagation(),e(!d)},children:c.jsx("div",{className:"absolute top-[2px] h-[20px] w-[20px] rounded-full bg-white transition-transform duration-300",style:{transform:d?"translateX(20px)":"translateX(2px)",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}})})}),g&&f!=null&&c.jsxs("div",{className:"mt-2.5",children:[c.jsx("div",{className:"mb-1 text-[11px]",style:{color:"var(--text-tertiary)"},children:"電量"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-[4px] flex-1 overflow-hidden rounded-full",style:{background:"var(--bg-elevated)"},children:c.jsx("div",{className:"h-full rounded-full",style:{width:`${f}%`,background:f>20?"var(--z2m-green)":"var(--z2m-red)"}})}),c.jsxs("span",{className:"text-[11px] tabular-nums",style:{color:"var(--text-secondary)"},children:[Math.round(f),"%"]})]})]}),r&&l&&c.jsx("div",{className:"mt-2.5",children:c.jsx("div",{className:"h-[4px] w-full overflow-hidden rounded-full",style:{background:"var(--bg-elevated)"},children:c.jsx("div",{className:"h-full rounded-full",style:{width:`${t.state?.position??0}%`,background:"var(--z2m-blue)"}})})})]})});function jo(){const{t:o}=mt(),t=ye(),e=v.useCallback(async(d,i)=>{const u=t.getDevice(d);if(!u)throw fe.error("Device not found"),new Error("Device not found");const g={state:u.state?.state,brightness:u.state?.brightness,color_temp:u.state?.color_temp};i.state&&i.state!=="TOGGLE"&&t.updateDeviceState(d,{state:i.state}),i.brightness!==void 0&&t.updateDeviceState(d,{brightness:i.brightness}),i.color_temp!==void 0&&t.updateDeviceState(d,{color_temp:i.color_temp});try{await Ae.controlDevice(d,i)}catch(r){console.error("Failed to control device:",r),t.updateDeviceState(d,g);const h=r instanceof Error?r.message:"";let p;throw h.includes("not connected")?p=o("connection.connectionRefused"):h.includes("timeout")?p=o("connection.timeout"):p=o("devices.controlFailed"),fe.error(o("devices.controlFailed"),{description:p}),r}},[t]),n=v.useCallback(async d=>{await e(d,{state:"TOGGLE"})},[e]),s=v.useCallback(async(d,i)=>{const u=Math.round(i/100*254);await e(d,{brightness:u})},[e]),a=v.useCallback(async(d,i)=>{const u=Math.round(1e6/i);await e(d,{color_temp:u})},[e]),l=v.useCallback(async(d,i)=>{t.renameDevice(d,i);try{await Ae.renameDevice(d,i),fe.success(o("rename.success"))}catch(u){throw console.error("Failed to rename device:",u),t.renameDevice(i,d),fe.error(o("rename.failed"),{description:u instanceof Error?u.message:void 0}),u}},[t,o]);return{devices:t.getAllDevices(),devicesById:t.byId,getDevice:t.getDevice,getDevicesByType:t.getDevicesByType,getOnlineDevices:t.getOnlineDevices,getOfflineDevices:t.getOfflineDevices,controlDevice:e,toggleDevice:n,setBrightness:s,setColorTemperature:a,renameDevice:l}}function ko(){const o=We(),[t,e]=v.useState(!1),n=ye(f=>f.allIds),s=ye(f=>f.byId),a=Ge(f=>f.rooms),l=Ge(f=>f.deviceRoomAssignments),{controlDevice:d}=jo(),[i,u]=v.useState(null),g=v.useMemo(()=>n.map(f=>s[f]).filter(f=>!!f&&f.type!=="coordinator"),[n,s]),r=v.useMemo(()=>i?g.filter(f=>l[f.friendly_name]===i):g,[g,i,l]),h=g.filter(f=>f.lastSeen?Date.now()-f.lastSeen<5*60*1e3:f.interview_completed!==!1).length,p=g.length-h;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between px-5 pb-4 pt-2",children:[c.jsx("h1",{className:"text-[28px] font-bold tracking-tight",children:"我的家"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>e(!0),className:"flex h-10 w-10 items-center justify-center rounded-full border transition-all active:scale-[0.92]",style:{background:"var(--bg-card)",borderColor:"var(--z2m-border)"},children:c.jsx(dt,{size:18})}),c.jsx("button",{onClick:()=>o("/settings"),className:"flex h-10 w-10 items-center justify-center rounded-full border transition-all active:scale-[0.92]",style:{background:"var(--bg-card)",borderColor:"var(--z2m-border)"},children:c.jsx(ut,{size:18})})]})]}),c.jsxs("div",{className:"hide-scrollbar flex gap-2 overflow-x-auto px-5 pb-4",children:[c.jsx("button",{onClick:()=>u(null),className:"flex-shrink-0 rounded-full border px-[18px] py-2 text-sm font-medium transition-all active:scale-95",style:{background:i===null?"var(--z2m-accent)":"var(--bg-card)",color:i===null?"#000":"var(--text-secondary)",borderColor:i===null?"var(--z2m-accent)":"var(--z2m-border)",fontWeight:i===null?600:500},children:"全部"}),a.map(f=>c.jsx("button",{onClick:()=>u(f.id),className:"flex-shrink-0 whitespace-nowrap rounded-full border px-[18px] py-2 text-sm font-medium transition-all active:scale-95",style:{background:i===f.id?"var(--z2m-accent)":"var(--bg-card)",color:i===f.id?"#000":"var(--text-secondary)",borderColor:i===f.id?"var(--z2m-accent)":"var(--z2m-border)",fontWeight:i===f.id?600:500},children:f.name},f.id))]}),c.jsxs("div",{className:"flex gap-3 px-5 pb-5",children:[c.jsxs("div",{className:"flex items-center gap-1.5 text-[13px]",style:{color:"var(--text-tertiary)"},children:[c.jsx("span",{className:"h-2 w-2 rounded-full",style:{background:"var(--z2m-green)",boxShadow:"0 0 6px var(--z2m-green)"}}),h," 在線"]}),c.jsxs("div",{className:"flex items-center gap-1.5 text-[13px]",style:{color:"var(--text-tertiary)"},children:[c.jsx("span",{className:"h-2 w-2 rounded-full",style:{background:"var(--z2m-red)"}}),p," 離線"]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-3 px-5 pb-6",children:r.map(f=>c.jsx(_o,{device:f,onToggle:S=>{d(f.friendly_name,{state:S?"ON":"OFF"})},onBrightnessChange:S=>{d(f.friendly_name,{brightness:Math.round(S*2.54)})},onEndpointToggle:(S,M,x)=>{d(f.friendly_name,{[M]:x?"ON":"OFF"})}},f.friendly_name))}),r.length===0&&c.jsx("div",{className:"py-12 text-center text-sm",style:{color:"var(--text-tertiary)"},children:i?"此房間沒有設備":"沒有找到設備"}),c.jsx(yt,{open:t,onClose:()=>e(!1)})]})}const Io=v.lazy(()=>Oe(()=>import("./DeviceDetail-Cim7FR8h.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(o=>({default:o.DeviceDetail}))),Ao=v.lazy(()=>Oe(()=>import("./GroupManagement-BYb6U7dP.js"),__vite__mapDeps([5,1,2,3,4]),import.meta.url).then(o=>({default:o.GroupManagement}))),Oo=v.lazy(()=>Oe(()=>import("./Settings-DyB1fuZ2.js"),__vite__mapDeps([6,1,2,3,4]),import.meta.url).then(o=>({default:o.Settings}))),Mo=v.lazy(()=>Oe(()=>import("./RoomManagement-DdX7Iog7.js"),__vite__mapDeps([7,1,2,3,4]),import.meta.url).then(o=>({default:o.RoomManagement})));function Ie(){return c.jsx("div",{className:"flex items-center justify-center py-20",children:c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-t-transparent",style:{borderColor:"var(--z2m-accent)",borderTopColor:"transparent"}})})}function Po(){vo();const o=Ge(e=>e.loadRooms),t=bt(e=>e.loadPreferences);return v.useEffect(()=>{o(),t(),document.documentElement.classList.add("dark")},[o,t]),c.jsx(zn,{children:c.jsxs($t,{children:[c.jsx(Bt,{children:c.jsxs(se,{path:"/",element:c.jsx(Co,{}),children:[c.jsx(se,{index:!0,element:c.jsx(ko,{})}),c.jsx(se,{path:"device/:deviceId",element:c.jsx(v.Suspense,{fallback:c.jsx(Ie,{}),children:c.jsx(Io,{})})}),c.jsx(se,{path:"groups",element:c.jsx(v.Suspense,{fallback:c.jsx(Ie,{}),children:c.jsx(Ao,{})})}),c.jsx(se,{path:"settings",element:c.jsx(v.Suspense,{fallback:c.jsx(Ie,{}),children:c.jsx(Oo,{})})}),c.jsx(se,{path:"rooms",element:c.jsx(v.Suspense,{fallback:c.jsx(Ie,{}),children:c.jsx(Mo,{})})}),c.jsx(se,{path:"*",element:c.jsx(Ft,{to:"/",replace:!0})})]})}),c.jsx(Pn,{})]})})}const zo={name:"Z2M Lite",description:"簡化版 Zigbee2MQTT 控制面板"},$o={loading:"載入中...",error:"錯誤",success:"成功",cancel:"取消",confirm:"確認",save:"儲存",delete:"刪除",edit:"編輯",close:"關閉",back:"返回",yes:"是",no:"否"},Bo={connected:"已連接",connecting:"連接中...",disconnected:"已斷線",reconnecting:"重新連接中...",error:"連接錯誤",staleData:"資料可能已過時",connectionRefused:"無法連接至伺服器",timeout:"連接逾時",deviceOffline:"設備離線"},Fo={home:"首頁",rooms:"房間",groups:"群組",settings:"設定",main:"主要導航"},Lo={title:"設備",online:"線上",offline:"離線",on:"開啟",off:"關閉",toggle:"切換設備",noDevices:"尚無設備",noDevicesHint:"請確認 Z2M 已連接且設備已配對",controlFailed:"控制設備失敗",deviceNotFound:"找不到設備"},Go={details:"詳細資訊",controls:"控制",information:"設備資訊",type:"類型",ieeeAddress:"IEEE 地址",linkQuality:"訊號品質",powerSource:"電源",power:"電源開關",brightness:"亮度",colorTemperature:"色溫",warmWhite:"暖白",naturalWhite:"自然白",daylight:"日光",coolWhite:"冷白"},Wo={title:"儀表板",totalDevices:"總設備數",onlineDevices:"線上設備",offlineDevices:"離線設備",recentDevices:"最近使用的設備"},Ho={title:"房間管理",addRoom:"新增房間",editRoom:"編輯房間",deleteRoom:"刪除房間",roomName:"房間名稱",roomIcon:"房間圖示",yourRooms:"您的房間",noRooms:"尚無房間",noRoomsHint:"建立房間以整理您的設備",uncategorized:"未分類",deviceCount:"{{count}} 個設備",deleteConfirm:"確定刪除房間嗎？",deleteWarning:"此房間中的設備將被移到「未分類」",createSuccess:"房間已建立",updateSuccess:"房間已更新",deleteSuccess:"房間已刪除",assignDevice:"分配到房間",moveDevice:"移動設備",collapseRoom:"收合房間",expandRoom:"展開房間"},Uo={title:"新增設備",addDevice:"新增設備",pairing:"配對中",description:"啟用配對模式以添加新的 Zigbee 設備",activeDescription:"正在搜尋新設備...",readyDescription:"按下開始配對後，請將新設備設為配對模式",instructions:"請將新設備設為配對模式（通常是長按設備上的按鈕）",start:"開始配對",stop:"停止配對",startFailed:"啟動配對模式失敗",deviceJoined:"配對成功",noDeviceFound:"未找到新設備",newDevice:"新設備"},Yo={title:"群組管理",addGroup:"新增群組",editGroup:"編輯群組",deleteGroup:"刪除群組",groupName:"群組名稱",yourGroups:"您的群組",noGroups:"尚無群組",noGroupsHint:"建立群組以同時控制多個設備",memberCount:"{{count}} 個設備",selectedCount:"已選擇 {{count}} 個設備",selectDevices:"選擇設備",allOn:"全部開啟",allOff:"全部關閉",partiallyOn:"部分開啟",toggleGroup:"切換群組",deleteConfirm:"確定刪除此群組嗎？",deleteWarning:"群組中的設備不會被刪除，只會移除群組關聯",createSuccess:"群組已建立",updateSuccess:"群組已更新",deleteSuccess:"群組已刪除",createFailed:"建立群組失敗",updateFailed:"更新群組失敗",deleteFailed:"刪除群組失敗",controlFailed:"控制群組失敗",editGroupDescription:"編輯群組名稱和成員",addGroupDescription:"建立新群組以同時控制多個設備",brightness:"亮度 {{value}}%"},Vo={title:"重新命名設備",description:"輸入新的設備名稱",currentName:"目前名稱",newName:"新名稱",placeholder:"請輸入新名稱",submit:"確認改名",success:"設備已重新命名",failed:"重新命名失敗",rename:"改名",emptyName:"名稱不能為空",tooLong:"名稱不能超過 50 個字元",leadingTrailingSpaces:"名稱不能有前後空格",invalidChars:"名稱不能包含特殊字元（/ # +）",duplicateName:"此名稱已被其他設備使用",renaming:"正在重新命名..."},Ko={title:"設定",connection:"連接設定",connectionDescription:"Zigbee2MQTT 連接設定",host:"主機位址",port:"連接埠",secure:"安全連線 (WSS)",connectionSaved:"連接設定已儲存",invalidPort:"無效的連接埠號",testConnection:"測試連線",testing:"測試中...",testSuccess:"連線成功",testFailed:"連線失敗",theme:"主題",themeDescription:"選擇您偏好的外觀",lightTheme:"淺色",darkTheme:"深色",systemTheme:"跟隨系統",language:"語言",languageDescription:"選擇您偏好的語言",about:"關於",version:"版本",description:"輕量化行動優先的 Zigbee2MQTT 控制介面",compatibility:"相容 Zigbee2MQTT v1.30.0+"},qo={app:zo,common:$o,connection:Bo,navigation:Fo,devices:Lo,device:Go,home:Wo,rooms:Ho,pairing:Uo,groups:Yo,rename:Vo,settings:Ko},Qo={name:"Z2M Lite",description:"Simplified Zigbee2MQTT Control Panel"},Xo={loading:"Loading...",error:"Error",success:"Success",cancel:"Cancel",confirm:"Confirm",save:"Save",delete:"Delete",edit:"Edit",close:"Close",back:"Back",yes:"Yes",no:"No"},Zo={connected:"Connected",connecting:"Connecting...",disconnected:"Disconnected",reconnecting:"Reconnecting...",error:"Connection Error",staleData:"Data may be outdated",connectionRefused:"Unable to connect to server",timeout:"Connection timeout",deviceOffline:"Device is offline"},Jo={home:"Home",rooms:"Rooms",groups:"Groups",settings:"Settings",main:"Main navigation"},es={title:"Devices",online:"Online",offline:"Offline",on:"On",off:"Off",toggle:"Toggle device",noDevices:"No devices found",noDevicesHint:"Make sure Z2M is connected and devices are paired",controlFailed:"Failed to control device",deviceNotFound:"Device not found"},ts={details:"Details",controls:"Controls",information:"Device Information",type:"Type",ieeeAddress:"IEEE Address",linkQuality:"Link Quality",powerSource:"Power Source",power:"Power",brightness:"Brightness",colorTemperature:"Color Temperature",warmWhite:"Warm White",naturalWhite:"Natural White",daylight:"Daylight",coolWhite:"Cool White"},ns={title:"Dashboard",totalDevices:"Total Devices",onlineDevices:"Online",offlineDevices:"Offline",recentDevices:"Recent Devices"},os={title:"Room Management",addRoom:"Add Room",editRoom:"Edit Room",deleteRoom:"Delete Room",roomName:"Room Name",roomIcon:"Room Icon",yourRooms:"Your Rooms",noRooms:"No rooms yet",noRoomsHint:"Create rooms to organize your devices",uncategorized:"Uncategorized",deviceCount:"{{count}} device",deviceCount_plural:"{{count}} devices",deleteConfirm:"Are you sure you want to delete this room?",deleteWarning:"Devices in this room will be moved to 'Uncategorized'",createSuccess:"Room created",updateSuccess:"Room updated",deleteSuccess:"Room deleted",assignDevice:"Assign to room",moveDevice:"Move device",collapseRoom:"Collapse room",expandRoom:"Expand room"},ss={title:"Add Device",addDevice:"Add Device",pairing:"Pairing",description:"Enable pairing mode to add new Zigbee devices",activeDescription:"Searching for new devices...",readyDescription:"After starting pairing, put your new device into pairing mode",instructions:"Put the new device into pairing mode (usually by holding a button on the device)",start:"Start Pairing",stop:"Stop Pairing",startFailed:"Failed to start pairing mode",deviceJoined:"Pairing successful",noDeviceFound:"No new device found",newDevice:"New"},rs={title:"Group Management",addGroup:"Add Group",editGroup:"Edit Group",deleteGroup:"Delete Group",groupName:"Group Name",yourGroups:"Your Groups",noGroups:"No groups yet",noGroupsHint:"Create groups to control multiple devices together",memberCount:"{{count}} device",memberCount_plural:"{{count}} devices",selectedCount:"{{count}} device selected",selectedCount_plural:"{{count}} devices selected",selectDevices:"Select Devices",allOn:"All On",allOff:"All Off",partiallyOn:"Partially On",toggleGroup:"Toggle group",deleteConfirm:"Are you sure you want to delete this group?",deleteWarning:"Devices in this group will not be deleted, only the group association will be removed",createSuccess:"Group created",updateSuccess:"Group updated",deleteSuccess:"Group deleted",createFailed:"Failed to create group",updateFailed:"Failed to update group",deleteFailed:"Failed to delete group",controlFailed:"Failed to control group",editGroupDescription:"Edit group name and members",addGroupDescription:"Create a new group to control multiple devices together",brightness:"{{value}}% brightness"},as={title:"Rename Device",description:"Enter a new name for this device",currentName:"Current name",newName:"New name",placeholder:"Enter new name",submit:"Rename",success:"Device renamed successfully",failed:"Failed to rename device",rename:"Rename",emptyName:"Name cannot be empty",tooLong:"Name cannot exceed 50 characters",leadingTrailingSpaces:"Name cannot have leading or trailing spaces",invalidChars:"Name cannot contain special characters (/ # +)",duplicateName:"This name is already used by another device",renaming:"Renaming..."},is={title:"Settings",connection:"Connection",connectionDescription:"Zigbee2MQTT connection settings",host:"Host",port:"Port",secure:"Secure (WSS)",connectionSaved:"Connection settings saved",invalidPort:"Invalid port number",testConnection:"Test Connection",testing:"Testing...",testSuccess:"Connection successful",testFailed:"Connection failed",theme:"Theme",themeDescription:"Choose your preferred appearance",lightTheme:"Light",darkTheme:"Dark",systemTheme:"System",language:"Language",languageDescription:"Choose your preferred language",about:"About",version:"Version",description:"A lightweight mobile-first interface for Zigbee2MQTT",compatibility:"Compatible with Zigbee2MQTT v1.30.0+"},cs={app:Qo,common:Xo,connection:Zo,navigation:Jo,devices:es,device:ts,home:ns,rooms:os,pairing:ss,groups:rs,rename:as,settings:is},lt="zh-TW";sn.use(rn).init({resources:{"zh-TW":{translation:qo},en:{translation:cs}},lng:lt,fallbackLng:lt,interpolation:{escapeValue:!1},react:{useSuspense:!1}});const xt=document.getElementById("root");if(!xt)throw new Error("Failed to find root element");Fe.createRoot(xt).render(c.jsx(m.StrictMode,{children:c.jsx(Po,{})}));export{jo as a,ho as b,re as c,Ae as d,Ge as e,fe as t,ye as u};
//# sourceMappingURL=index-BUo07_5n.js.map
